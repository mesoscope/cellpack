

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui &mdash; cellPack 0.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../../../../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../../../../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../../../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../../../../" src="../../../../../../../_static/documentation_options.js"></script>
        <script src="../../../../../../../_static/jquery.js"></script>
        <script src="../../../../../../../_static/underscore.js"></script>
        <script src="../../../../../../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../../../../../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../../../../../index.html" class="icon icon-home"> cellPack
          

          
          </a>

          
            
            
              <div class="version">
                0.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../installation.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../installation.html#stable-release">Stable release</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../installation.html#from-sources">From sources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../modules.html">Package modules</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../cellpack.html">cellpack package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../../cellpack.html#subpackages">Subpackages</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../../../../cellpack.autopack.html">cellpack.autopack package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../../../cellpack.bin.html">cellpack.bin package</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../../../../cellpack.mgl_tools.html">cellpack.mgl_tools package</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../../cellpack.html#submodules">Submodules</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../../cellpack.html#module-cellpack.example">cellpack.example module</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../../../../cellpack.html#module-cellpack">Module contents</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../../contributing.html">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../contributing.html#get-started">Get Started!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../../../../contributing.html#deploying">Deploying</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../../index.html">cellPack</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../../../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../../../../../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../../../../../cellpack.html">cellpack</a> &raquo;</li>
        
          <li><a href="../../../gui.html">cellpack.mgl_tools.mglutil.gui</a> &raquo;</li>
        
      <li>cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui</h1><div class="highlight"><pre>
<span></span><span class="c1">#############################################################################</span>
<span class="c1">#</span>
<span class="c1"># Author: Michel F. SANNER, Sophie I COON, Ruth HUEY</span>
<span class="c1">#</span>
<span class="c1"># Copyright: M. Sanner TSRI 2000</span>
<span class="c1">#</span>
<span class="c1">#############################################################################</span>

<span class="c1"># $Header: /opt/cvs/python/packages/share1.5/mglutil/gui/InputForm/Tk/gui.py,v 1.47 2009/05/12 17:07:40 sargis Exp $</span>
<span class="c1">#</span>
<span class="c1"># $Id: gui.py,v 1.47 2009/05/12 17:07:40 sargis Exp $</span>
<span class="c1">#</span>

<span class="c1">#</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">This module implements a bunch of objects useful for user interaction</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c1"># from DejaVu.extendedSlider import ExtendedSlider</span>
<span class="c1"># from DejaVu.Slider import Slider</span>
<span class="kn">import</span> <span class="nn">tkinter</span>
<span class="kn">import</span> <span class="nn">tkinter.scrolledtext</span>
<span class="kn">import</span> <span class="nn">Pmw</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">cellpack.mgl_tools.mglutil.util.packageFilePath</span> <span class="kn">import</span> <span class="n">findFilePath</span>
<span class="kn">from</span> <span class="nn">cellpack.mgl_tools.mglutil.util.misc</span> <span class="kn">import</span> <span class="n">ensureFontCase</span><span class="p">,</span> <span class="n">isInstance</span>


<div class="viewcode-block" id="autoPlaceWidget"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.autoPlaceWidget">[docs]</a><span class="k">def</span> <span class="nf">autoPlaceWidget</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">relx</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">rely</span><span class="o">=</span><span class="mf">0.3</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Auto center the window rooted at master&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_ismapped</span><span class="p">():</span>
        <span class="n">m_width</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span>
        <span class="n">m_height</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_height</span><span class="p">()</span>
        <span class="n">m_x</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_rootx</span><span class="p">()</span>
        <span class="n">m_y</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_rooty</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">m_width</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">()</span>
        <span class="n">m_height</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">()</span>
        <span class="n">m_x</span> <span class="o">=</span> <span class="n">m_y</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">w_width</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_reqwidth</span><span class="p">()</span>
    <span class="n">w_height</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_reqheight</span><span class="p">()</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">m_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">m_width</span> <span class="o">-</span> <span class="n">w_width</span><span class="p">)</span> <span class="o">*</span> <span class="n">relx</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">m_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">m_height</span> <span class="o">-</span> <span class="n">w_height</span><span class="p">)</span> <span class="o">*</span> <span class="n">rely</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">+</span> <span class="n">w_width</span> <span class="o">&gt;</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">():</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">()</span> <span class="o">-</span> <span class="n">w_width</span>
    <span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">+</span> <span class="n">w_height</span> <span class="o">&gt;</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">():</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">()</span> <span class="o">-</span> <span class="n">w_height</span>
    <span class="k">elif</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">master</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s2">&quot;+</span><span class="si">%d</span><span class="s2">+</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span></div>


<div class="viewcode-block" id="AutoPlaceWidget"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.AutoPlaceWidget">[docs]</a><span class="k">class</span> <span class="nc">AutoPlaceWidget</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;defines method _set_transient used to place a widget automatically</span>
<span class="sd">    to the center of the screen&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_set_transient</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">,</span> <span class="n">relx</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">rely</span><span class="o">=</span><span class="mf">0.3</span><span class="p">):</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">withdraw</span><span class="p">()</span>  <span class="c1"># Remain invisible while we figure out the geometry</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">transient</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">update_idletasks</span><span class="p">()</span>  <span class="c1"># Actualize geometry information</span>
        <span class="k">if</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_ismapped</span><span class="p">():</span>
            <span class="n">m_width</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_width</span><span class="p">()</span>
            <span class="n">m_height</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_height</span><span class="p">()</span>
            <span class="n">m_x</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_rootx</span><span class="p">()</span>
            <span class="n">m_y</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_rooty</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">m_width</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">()</span>
            <span class="n">m_height</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">()</span>
            <span class="n">m_x</span> <span class="o">=</span> <span class="n">m_y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">w_width</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">winfo_reqwidth</span><span class="p">()</span>
        <span class="n">w_height</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">winfo_reqheight</span><span class="p">()</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">m_x</span> <span class="o">+</span> <span class="p">(</span><span class="n">m_width</span> <span class="o">-</span> <span class="n">w_width</span><span class="p">)</span> <span class="o">*</span> <span class="n">relx</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">m_y</span> <span class="o">+</span> <span class="p">(</span><span class="n">m_height</span> <span class="o">-</span> <span class="n">w_height</span><span class="p">)</span> <span class="o">*</span> <span class="n">rely</span>
        <span class="k">if</span> <span class="n">x</span> <span class="o">+</span> <span class="n">w_width</span> <span class="o">&gt;</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">():</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenwidth</span><span class="p">()</span> <span class="o">-</span> <span class="n">w_width</span>
        <span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="n">y</span> <span class="o">+</span> <span class="n">w_height</span> <span class="o">&gt;</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">():</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">master</span><span class="o">.</span><span class="n">winfo_screenheight</span><span class="p">()</span> <span class="o">-</span> <span class="n">w_height</span>
        <span class="k">elif</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s2">&quot;+</span><span class="si">%d</span><span class="s2">+</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">))</span>
        <span class="n">widget</span><span class="o">.</span><span class="n">deiconify</span><span class="p">()</span>  <span class="c1"># Become visible at the desired location</span></div>


<span class="c1">##             self.info()</span>


<div class="viewcode-block" id="ListChooser"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ListChooser">[docs]</a><span class="k">class</span> <span class="nc">ListChooser</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;class to present a list of objects in a scrolled listbox.</span>
<span class="sd">    entries are given as a list of items associated with a description.</span>
<span class="sd">    double clicking on an entry display the associated comment&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">root</span><span class="p">,</span>
        <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;single&quot;</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Choose&quot;</span><span class="p">,</span>
        <span class="n">entries</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">defaultValue</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">lbpackcfg</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;fill&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
        <span class="n">lbwcfg</span><span class="o">=</span><span class="p">{},</span>
    <span class="p">):</span>

        <span class="k">assert</span> <span class="n">mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;single&quot;</span><span class="p">,</span> <span class="s2">&quot;browse&quot;</span><span class="p">,</span> <span class="s2">&quot;multiple&quot;</span><span class="p">,</span> <span class="s2">&quot;extended&quot;</span><span class="p">]</span>
        <span class="c1"># put everything inside a Frame</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">top</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

        <span class="c1"># add a scrolled text widget to display comments</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">scrolledtext</span><span class="o">.</span><span class="n">ScrolledText</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">4</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># add a title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;n&quot;</span><span class="p">)</span>

        <span class="c1"># build the scroll list</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">top</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="n">scrollbar</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Scrollbar</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s2">&quot;vertical&quot;</span><span class="p">)</span>
        <span class="n">lbwcfg</span><span class="p">[</span><span class="s2">&quot;selectmode&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mode</span>
        <span class="n">lbwcfg</span><span class="p">[</span><span class="s2">&quot;yscrollcommand&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">scrollbar</span><span class="o">.</span><span class="n">set</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lb</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Listbox</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">,),</span> <span class="o">**</span><span class="n">lbwcfg</span><span class="p">)</span>
        <span class="n">scrollbar</span><span class="o">.</span><span class="n">config</span><span class="p">(</span><span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">yview</span><span class="p">)</span>
        <span class="n">scrollbar</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="o">*</span><span class="p">(),</span> <span class="o">**</span><span class="n">lbpackcfg</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hasInfo</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># add entries</span>
        <span class="k">if</span> <span class="n">entries</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="o">==</span> <span class="nb">tuple</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">e</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasInfo</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">forget</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">defaultValue</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">hasInfo</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">defaultValue</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">]</span>
                <span class="c1"># get the entry of the listBox corresponding to the defaultValue.</span>
                <span class="n">defaultEntry</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">defaultValue</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">df</span><span class="p">,</span> <span class="n">entries</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">assert</span> <span class="n">defaultValue</span> <span class="ow">in</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">]</span>
                <span class="c1"># get the entry of the listBox corresponding to the defaultValue.</span>
                <span class="n">defaultEntry</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">defaultValue</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="n">df</span><span class="p">,</span> <span class="n">entries</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="c1"># Get its index</span>
            <span class="n">indexDefaultValue</span> <span class="o">=</span> <span class="n">entries</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">defaultEntry</span><span class="p">)</span>
            <span class="c1"># Set the the selection at this index using the select_set of the</span>
            <span class="c1"># listBox widget.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">select_set</span><span class="p">(</span><span class="n">indexDefaultValue</span><span class="p">)</span>

<div class="viewcode-block" id="ListChooser.add"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ListChooser.add">[docs]</a>    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;add an entry to the list&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">entry</span><span class="p">,</span> <span class="n">comment</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">bytes</span><span class="p">:</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">comment</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;ButtonRelease-1&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">hasInfo</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span></div>

<div class="viewcode-block" id="ListChooser.insert"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ListChooser.insert">[docs]</a>    <span class="k">def</span> <span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">entry</span><span class="p">,</span> <span class="n">comment</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;insert an entry to the list&quot;&quot;&quot;</span>
        <span class="c1"># assert pos &lt; len(self.entries)</span>
        <span class="k">if</span> <span class="n">pos</span> <span class="o">==</span> <span class="s2">&quot;end&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">entry</span><span class="p">,</span> <span class="n">comment</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="p">(</span><span class="n">entry</span><span class="p">,</span> <span class="n">comment</span><span class="p">))</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span> <span class="ow">is</span> <span class="ow">not</span> <span class="nb">bytes</span><span class="p">:</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="nb">repr</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span></div>

<div class="viewcode-block" id="ListChooser.info"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ListChooser.info">[docs]</a>    <span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;dispaly information about the curent selection&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">curselection</span><span class="p">())[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">s</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ListChooser.clear"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ListChooser.clear">[docs]</a>    <span class="k">def</span> <span class="nf">clear</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;clear all entries&quot;&quot;&quot;</span>
        <span class="c1"># self.lb.delete(0.0, &#39;end&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entries</span> <span class="o">=</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="ListChooser.clearComments"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ListChooser.clearComments">[docs]</a>    <span class="k">def</span> <span class="nf">clearComments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;clear all entries&quot;&quot;&quot;</span>
        <span class="c1"># self.comments.delete(0.0, &#39;end&#39;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="ListChooser.remove"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ListChooser.remove">[docs]</a>    <span class="k">def</span> <span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;remove an entry&quot;&quot;&quot;</span>
        <span class="n">ind</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">)</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="n">ind</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="n">ind</span><span class="p">)</span></div>

<div class="viewcode-block" id="ListChooser.get"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ListChooser.get">[docs]</a>    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;get the current selection&quot;&quot;&quot;</span>
        <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">ent</span> <span class="ow">in</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">curselection</span><span class="p">()):</span>
            <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">entries</span><span class="p">[</span><span class="n">ent</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">res</span></div>

<div class="viewcode-block" id="ListChooser.select"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ListChooser.select">[docs]</a>    <span class="k">def</span> <span class="nf">select</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;add an entry to the current selection&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">last</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">mode</span> <span class="o">!=</span> <span class="s2">&quot;single&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">select_set</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">last</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">select_set</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">info</span><span class="p">()</span></div></div>


<span class="kn">from</span> <span class="nn">tkinter.simpledialog</span> <span class="kn">import</span> <span class="n">SimpleDialog</span>
<span class="kn">import</span> <span class="nn">string</span>

<span class="c1">##  class InputFormItem:</span>
<span class="c1">##      &quot;&quot;&quot;Class to describe things that can be put inside an inputForm&quot;&quot;&quot;</span>

<span class="c1">##      def __init__(self, tkwcfg={}, tkpackOptions={}, tkpackMode=None):</span>

<span class="c1">##          self.master = None</span>
<span class="c1">##          self.type = Tkinter.Entry</span>
<span class="c1">##          self.name = &#39;NoName&#39;</span>
<span class="c1">##          self.tkwcfg = tkwcfg</span>
<span class="c1">##          self.tkpackOptions = tkpackOptions</span>
<span class="c1">##          if tkpackMode==None: self.tkpacker = Tkinter.grid</span>
<span class="c1">##          else: self.tkpackMode = tkpacker</span>


<span class="c1">##  class IFentry(InputFormItem):</span>
<span class="c1">##      pass</span>
<span class="c1">##  class IFradiobutton(InputFormItem):</span>
<span class="c1">##      pass</span>
<span class="c1">##  class IFcheckbutton(InputFormItem):</span>
<span class="c1">##      pass</span>
<span class="c1">##  class IFbutton(InputFormItem):</span>
<span class="c1">##      pass</span>
<span class="c1">##  class IFframe(InputFormItem):</span>
<span class="c1">##      pass</span>
<span class="c1">##  class IFscrolledText(InputFormItem):</span>
<span class="c1">##      pass</span>

<span class="c1">##  class IFlistChooser(InputFormItem):</span>
<span class="c1">##      def __init__(self, mode=&#39;single&#39;, title=&#39;choose one&#39;, entries=[],</span>
<span class="c1">##                   tkwcfg={}, tkpackOptions={}, tkpackMode=None):</span>

<span class="c1">##          InputFormItem.__init__(self, tkwcfg=tkwcfg,</span>
<span class="c1">##                                 tkpackOptions=tkpackOptions,</span>
<span class="c1">##                                 tkpackMode=tkpackMode)</span>
<span class="c1">##          self.mode = mode</span>
<span class="c1">##          self.title = title</span>
<span class="c1">##          self.entries = entries</span>

<span class="c1">##  class IFunctionButton(InputFormItem):</span>
<span class="c1">##      pass</span>


<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">UserList</span>


<div class="viewcode-block" id="InputFormDescr"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputFormDescr">[docs]</a><span class="k">class</span> <span class="nc">InputFormDescr</span><span class="p">(</span><span class="n">UserList</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    InputFormDescr is a list of dictionary describing the widgets to be placed</span>
<span class="sd">    in an inputform.</span>
<span class="sd">    Such an object can be passed to an InputForm object to actually build an</span>
<span class="sd">    InputForm</span>

<span class="sd">    The dictionnary can contain the following key:value couples:</span>
<span class="sd">    * widgetType: This specifies the type of the widget. It is usually a class</span>
<span class="sd">        name that can be any of the following</span>

<span class="sd">        o any Tkinter widget (Tkinter.Button etc....)</span>
<span class="sd">        o any CustomizedWidgets widgets (ListChooser, Dial etc....)</span>
<span class="sd">        o any of the Pmw widgets (Pmw.EntryFields....)</span>
<span class="sd">    For examples go to any Pmv commands.</span>
<span class="sd">    The dictionary of a widget can hold the following (keys:value) couples:</span>

<span class="sd">    * name      : string to specify a name associated to the widget. This name</span>
<span class="sd">        is then used to create the value dictionary.</span>

<span class="sd">    * tooltip   : string describing the widget which will be displayed in</span>
<span class="sd">                  a balloon when the mouse is over it.</span>
<span class="sd">    * wcfg      : The widget configuration dictionary must contain all the</span>
<span class="sd">        couple keyword:value you want to use to describe your widget.</span>
<span class="sd">        For a list of the option available to describe widgets:</span>
<span class="sd">        o Tkinter widgets options</span>
<span class="sd">        http://www.pythonware.com/library/tkinter/introduction/index.htm</span>
<span class="sd">        o Pmw widgets options</span>
<span class="sd">        http://pmw.sourceforge.net/doc/refindex.html</span>
<span class="sd">        o Tix widgets options</span>
<span class="sd">        http://www.python.org/doc/current/lib/module-Tix.html</span>
<span class="sd">        o Customized widgets options:</span>
<span class="sd">        http://www.scripps.edu/~sanner/python/inputform/customizedWidgets.html</span>

<span class="sd">    * gridcfg    : The grid configuration dictionary specifies where in the</span>
<span class="sd">        form the current widget will be placed.</span>
<span class="sd">        It contains keyword:value where the keys are the option of the</span>
<span class="sd">        Tkinter grid manager. The value of the row and column can be negative</span>
<span class="sd">        if you want to place your widget several row or column before the last</span>
<span class="sd">        one. The position of the widget will be found by the function</span>
<span class="sd">        findGridPosition. If no row or column is specified it will place your</span>
<span class="sd">        widget after the last one according to the specified direction you</span>
<span class="sd">        want your inputform to be built.You can&#39;t leave an empty space between</span>
<span class="sd">        two widgets.</span>

<span class="sd">    * container  : dictionary specifying the current widget or part of the</span>
<span class="sd">        current widget as a container.</span>
<span class="sd">        o key :(string) name of the container. This name will then be used</span>
<span class="sd">        to specify their parent</span>
<span class="sd">        o value : instance of the container or a string that will be evaluated</span>
<span class="sd">        and the result of which will be the container.</span>
<span class="sd">        &#39;container&#39;:{&#39;Page1&#39;:&#39;w.page(&#39;Page1&#39;)},</span>
<span class="sd">        example:</span>
<span class="sd">        Notebook widget with two pages Page1 and Page2</span>
<span class="sd">        &#39;container&#39;:{&#39;Page1&#39;:&#39;w.page(&#39;Page1&#39;)&#39;,</span>
<span class="sd">                     &#39;Page2&#39;:&#39;w.page(&#39;Page2&#39;)&#39;</span>
<span class="sd">        Frame</span>
<span class="sd">        &#39;container&#39;:{&#39;myFrame&#39;:&#39;w&#39;}</span>

<span class="sd">        (see colorCommands.py, APBSCommand.py, fileCommands for example)</span>
<span class="sd">    * parent    : allows to specify in which container to pack the current</span>
<span class="sd">      widget.(see colorCommands.py, APBSCommand.py, fileCommands for example)</span>

<span class="sd">    * componentcfg: dictionnary allowing the developer to describe the</span>
<span class="sd">        components of the current widget.</span>
<span class="sd">        o key   : is the name of the component</span>
<span class="sd">        o value : description of the widget</span>
<span class="sd">        (see APBSCommand for an example)</span>

<span class="sd">    * defaultValue: The given defaultValue is used to initialize the widget</span>
<span class="sd">        if it has a bound variable or if the widget has a set method.</span>

<span class="sd">    * type        :The keyword type is used to check the validity of the data</span>
<span class="sd">        the user gives (it is a string by default).</span>

<span class="sd">    * required    : (1 or 0) The keyword required is flag to specify</span>
<span class="sd">        whether or not this field is required.</span>

<span class="sd">    example:</span>
<span class="sd">    =========================================================================</span>

<span class="sd">        # Build a Tkinter.Button with the text &#39;hello&#39;, the text will be in</span>
<span class="sd">        # red, using the font times size 20 and bold, the background will</span>
<span class="sd">        # be blue when not activated and green when activated.</span>
<span class="sd">        # The foreground will be white when desactivated. The button&#39;s relief</span>
<span class="sd">        # will be sunken and its borderwidth will be 8 pixel.</span>
<span class="sd">        idf = InputFormDescr(title=&#39;Button Example&#39;)</span>
<span class="sd">        idf.append({&#39;widgetType&#39;:Tkinter.Button,</span>
<span class="sd">                    &#39;name&#39;:&#39;helloBut&#39;,</span>
<span class="sd">                    &#39;wcfg&#39;:{&#39;text&#39;:&#39;Hello&#39;,&#39;foreground&#39;:&#39;White&#39;,</span>
<span class="sd">                            &#39;background&#39; : &#39;Blue&#39;,</span>
<span class="sd">                            &#39;relief&#39; : Tkinter.SUNKEN,</span>
<span class="sd">                            &#39;font&#39;:(ensureFontCase(&#39;times&#39;),20, &#39;bold&#39;), &#39;borderwidth&#39; : 8,</span>
<span class="sd">                            &#39;activebackground&#39; : &#39;Green&#39;},</span>
<span class="sd">                     &#39;gridcfg&#39;:{&#39;sticky&#39;:&#39;we&#39;}})</span>


<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Form&quot;</span><span class="p">):</span>
        <span class="n">UserList</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">entryByName</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># reverse lookup to find an item using a name</span></div>


<div class="viewcode-block" id="CallBackFunction"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.CallBackFunction">[docs]</a><span class="k">class</span> <span class="nc">CallBackFunction</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to allow to specify arguments to a callback function bound to a widget&quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">function</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function</span> <span class="o">=</span> <span class="n">function</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">=</span> <span class="n">args</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kw</span> <span class="o">=</span> <span class="n">kw</span>

    <span class="k">def</span> <span class="fm">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="n">args</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span> <span class="o">+</span> <span class="n">args</span>
        <span class="n">kw</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">kw</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">function</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span></div>


<div class="viewcode-block" id="getkw"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.getkw">[docs]</a><span class="k">def</span> <span class="nf">getkw</span><span class="p">(</span><span class="n">kw</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; function to get a dictionary entry and remove it from the dictionary&quot;&quot;&quot;</span>

    <span class="n">v</span> <span class="o">=</span> <span class="n">kw</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">kw</span><span class="o">.</span><span class="n">keys</span><span class="p">()):</span>
        <span class="k">del</span> <span class="n">kw</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">v</span></div>


<div class="viewcode-block" id="InputForm"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm">[docs]</a><span class="k">class</span> <span class="nc">InputForm</span><span class="p">(</span><span class="n">AutoPlaceWidget</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Class to create a inputForm to collect values from users and</span>
<span class="sd">    return these values.</span>
<span class="sd">    More information and examples can be found at</span>
<span class="sd">    http://www.scripps.edu/~sanner/software/inputform/tableOfContent.html</span>

<span class="sd">    required arguments:</span>
<span class="sd">       master  -- argument to specify the master of the widget to be created</span>
<span class="sd">                  which means that the current form will be a &#39;slave&#39; of the</span>
<span class="sd">                  given master</span>

<span class="sd">       root    --  If None is specified then a Tkinter.TopLevel object is</span>
<span class="sd">                   created.</span>

<span class="sd">       descr   -- (instance of InputFormDescr) which is a list of dictionary</span>
<span class="sd">                   describing the widgets to be added to the form.</span>
<span class="sd">                   see the documentation string for InputFormDescr</span>

<span class="sd">    optional arguments :</span>

<span class="sd">        modal  -- Flag specifying if the form is modal or not. When a form</span>
<span class="sd">          is modal it grabs the focus and only releases it when the</span>
<span class="sd">          form is dismissed. When a form is modal an OK and a CANCEL</span>
<span class="sd">          button will be automatically added to the form.</span>
<span class="sd">          (default = 1)</span>

<span class="sd">        blocking -- Flag specifying if the form is blocking or not. When set to</span>
<span class="sd">          1 the form is blocking and the calling code will be stopped until the</span>
<span class="sd">          form is dismissed. An OK and a CANCEL button will be automatically</span>
<span class="sd">          added to the form. (default = 0)</span>

<span class="sd">        defaultDirection -- (&#39;row&#39;, &#39;col&#39;) specifies the direction in</span>
<span class="sd">          which widgets are gridded  into the form by default. (default=&#39;row&#39;)</span>

<span class="sd">        closeWithWindow -- Flag specifying whether or not the form should be</span>
<span class="sd">          minimized/maximized  when the master window is. (default=1)</span>

<span class="sd">        okCfg -- dictionnary specifying the configuration of the OK button.</span>
<span class="sd">                 if a callback function is specified using the keyword</span>
<span class="sd">                 command this callback will be added to the default callback</span>
<span class="sd">                 Ok_cb</span>

<span class="sd">        cancelCfg -- dictionnary specifying the configuration of the CANCEL button</span>
<span class="sd">                 if a callback function is specified using the keyword</span>
<span class="sd">                 command this callback will be added to the default callback</span>
<span class="sd">                 Ok_cb</span>

<span class="sd">        initFunc  -- specifies a function to initialize the form.</span>

<span class="sd">        onDestroy -- specifies a function to be called when using the close</span>
<span class="sd">           widget of a window.</span>

<span class="sd">        okcancel -- Boolean Flag to specify whether or not to create the OK and CANCEL</span>
<span class="sd">                    button.</span>
<span class="sd">        scrolledFrame -- Flag when set to 1 the main frame is a scrollable frame</span>
<span class="sd">                         else it is static Frame (default 0)</span>
<span class="sd">        width -- specifies the width of the main frame (400)</span>
<span class="sd">        height -- specifies the height of the main frame. (200)</span>
<span class="sd">        help   -- specifies the web adress to a help page. If this is provided</span>
<span class="sd">                  a Help (?) button will be created which will open a</span>
<span class="sd">                  web browser to the given adress.</span>

<span class="sd">        If the list of argument of the constructor changes please update</span>
<span class="sd">        the showForm method of the ViewerFramework.VFCommand</span>
<span class="sd">        class to present a form for the user to fill out.</span>
<span class="sd">        After building the form the entryByName dictionary has been built</span>
<span class="sd">        and the InputFormDescr has been extended with a &#39;widget&#39; entry..</span>

<span class="sd">        The form can be constructed to be modal, i.e. the form grabs the focus</span>
<span class="sd">        and requires the form to be dissmissed using the OK or CANCEL button</span>
<span class="sd">        before the user can proceed. (this is the default behavior)</span>
<span class="sd">        When the form is NOT modal, it can still block and require the user to</span>
<span class="sd">        dismiss the form. The difference with modal is that other forms remain</span>
<span class="sd">        active, allowing for instance to pick something in a nother window.</span>
<span class="sd">        The program however blocks until the form is dismissed.</span>
<span class="sd">        When both the modal and blocking are 0, the form is displayed and</span>
<span class="sd">        worksasynchronously. The OK and Cancel buttons are not displayed.</span>
<span class="sd">        The form descriptor should provide a button to dismiss the form. The</span>
<span class="sd">        call back function for that button should call the destroy method. In</span>
<span class="sd">        this mode the current value of widgets have to retrieved manually.</span>
<span class="sd">        This can be done either by accessiing the widget directly:</span>
<span class="sd">        ipf[i][&#39;widget&#39;].get() or ipf.entryByName[&#39;mywidget&#39;][widget].get();</span>
<span class="sd">        or by calling the checkValues() method that returns a dictionary.</span>
<span class="sd">        You can also by giving to the argument defaultDirection the values</span>
<span class="sd">        &#39;col&#39; or &#39;row&#39;, choose the direction to build the whole inputForm.</span>
<span class="sd">        For example if row is choosen all the widget if not specifies</span>
<span class="sd">        otherwise will be added row after row..</span>
<span class="sd">        When the flag closeWidthWindow is set to 1 then the form created is</span>
<span class="sd">        closed simultaneously with the main window. It is set to 1 by default.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">master</span><span class="p">,</span>
        <span class="n">root</span><span class="p">,</span>
        <span class="n">descr</span><span class="p">,</span>
        <span class="n">modal</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">blocking</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">defaultDirection</span><span class="o">=</span><span class="s2">&quot;row&quot;</span><span class="p">,</span>
        <span class="n">closeWithWindow</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">okCfg</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">},</span>
        <span class="n">cancelCfg</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Cancel&quot;</span><span class="p">},</span>
        <span class="n">initFunc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">onDestroy</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">okcancel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">scrolledFrame</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">okOnEnter</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="p">):</span>

        <span class="k">assert</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">descr</span><span class="p">,</span> <span class="n">InputFormDescr</span><span class="p">)</span>

        <span class="c1"># master is the container widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">master</span> <span class="o">=</span> <span class="n">master</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">root</span>
        <span class="c1"># Creates a Tkinter Toplevel widget if self.root is None.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Toplevel</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span>

        <span class="c1"># Setting the title of self.root with the one provided.</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Tk</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Toplevel</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="n">descr</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">modal</span> <span class="o">=</span> <span class="n">modal</span>  <span class="c1"># when true, form will grab focus AND block</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">blocking</span> <span class="o">=</span> <span class="n">blocking</span>  <span class="c1"># when true and form is not modal,</span>
        <span class="c1"># make the form block</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">okcancel</span> <span class="o">=</span> <span class="n">okcancel</span>  <span class="c1"># When true an OK/CANCEL button will be created.</span>

        <span class="c1"># Variable used to grid the given widgets</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">defaultDirection</span> <span class="o">=</span> <span class="n">defaultDirection</span>

        <span class="c1"># dictionary widgetID_entries : key = id of the widget</span>
        <span class="c1">#                        value = entries corresponding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">descr</span> <span class="o">=</span> <span class="n">descr</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">descr</span><span class="o">.</span><span class="n">form</span> <span class="o">=</span> <span class="bp">self</span>

        <span class="c1"># width and height</span>
        <span class="n">autoSize</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="mi">400</span>
            <span class="n">autoSize</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">height</span> <span class="o">=</span> <span class="mi">200</span>
            <span class="n">autoSize</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># MAIN FRAME</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mf</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

        <span class="c1"># form main frame</span>
        <span class="k">if</span> <span class="n">scrolledFrame</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">autoSize</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sf</span> <span class="o">=</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">ScrolledFrame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">mf</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sf</span> <span class="o">=</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">ScrolledFrame</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">mf</span><span class="p">,</span> <span class="n">usehullsize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">hull_width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">hull_height</span><span class="o">=</span><span class="n">height</span>
                <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">sf</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">sf</span><span class="o">.</span><span class="n">interior</span><span class="p">()</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">mf</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="s2">&quot;groove&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span>
            <span class="p">)</span>

        <span class="c1"># Create the parentName dictionnary with the name of the parent</span>
        <span class="c1"># and the container object</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;mainContainer&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;container&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[]}}</span>

        <span class="c1"># if not hasattr(self, &#39;last&#39;): self.last = {}</span>

        <span class="c1"># Keep track of all the notebooks widget contained in the form and</span>
        <span class="c1"># all the Pmw widgets.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notebooks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">wwidgets</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">wnum</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">descr</span><span class="p">:</span>
            <span class="c1"># build reverse lookup dictionary</span>
            <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">descr</span><span class="o">.</span><span class="n">entryByName</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">e</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">descr</span><span class="o">.</span><span class="n">entryByName</span><span class="p">[</span><span class="n">wnum</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>
            <span class="n">wnum</span> <span class="o">=</span> <span class="n">wnum</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addEntry</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="c1"># Call the initFunc method if not none.</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">initFunc</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">initFunc</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>

        <span class="c1"># Pack the frames.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">mf</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s2">&quot;both&quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

        <span class="c1"># Build the ok and cancel buttons with the information</span>
        <span class="c1"># provided.</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blocking</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">modal</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">okcancel</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buildOkCancelButtons</span><span class="p">(</span><span class="n">okCfg</span><span class="p">,</span> <span class="n">cancelCfg</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">help</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_set_transient</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">okOnEnter</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Return&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">OK_cb</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">help</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">buildHelpButton</span><span class="p">(</span><span class="n">help</span><span class="p">)</span>
        <span class="c1"># FIXME: Need to find all the possibilities....</span>
        <span class="c1"># bind the [x] button of the inputform</span>
        <span class="k">if</span> <span class="n">onDestroy</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">blocking</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">modal</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">okcancel</span><span class="p">:</span>
                <span class="c1"># self Cancel_cb is modal or blocking</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cancel_cb</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># to just withdraw</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Tk</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Toplevel</span>
                <span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">withdraw</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># or finally the specified function.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">protocol</span><span class="p">(</span><span class="s2">&quot;WM_DELETE_WINDOW&quot;</span><span class="p">,</span> <span class="n">onDestroy</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">closeWithWindow</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;transient&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">transient</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span>
            <span class="c1"># self._set_transient(self.master)</span>

        <span class="c1">## Set the notebook widget to their natural size.</span>
        <span class="k">for</span> <span class="n">nb</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">notebooks</span><span class="p">:</span>
            <span class="n">nb</span><span class="o">.</span><span class="n">setnaturalsize</span><span class="p">()</span>
        <span class="c1">## Call the alignLabels method to align all the labels of the</span>
        <span class="c1">## different Pmw widgets added to the form</span>
        <span class="c1"># apply(Pmw.alignlabels, (self.wwidgets,), {})</span>

        <span class="k">if</span> <span class="n">autoSize</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">autoSize</span><span class="p">()</span>

<div class="viewcode-block" id="InputForm.autoSize"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.autoSize">[docs]</a>    <span class="k">def</span> <span class="nf">autoSize</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>  <span class="c1"># force packing to happen to size are right</span>
        <span class="c1"># self.root can be Tkinter.Frame instance. Frames do not have geometry attribute.</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="s2">&quot;geometry&quot;</span><span class="p">):</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">winfo_reqwidth</span><span class="p">()</span>
            <span class="n">h</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">winfo_reqheight</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2">x</span><span class="si">%d</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">))</span></div>

    <span class="c1">## ###########################################################</span>
    <span class="c1">## # Methods handling the creation of each widgets</span>

<div class="viewcode-block" id="InputForm.addEntry"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addEntry">[docs]</a>    <span class="k">def</span> <span class="nf">addEntry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="p">{}):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        optional argument:</span>
<span class="sd">        entry -- ({}) Dictionary describing the widget to be added.</span>
<span class="sd">                 See the InputFormDescr documentation for the accepted</span>
<span class="sd">                 format.</span>

<span class="sd">        This method creates each given widgets, find their position</span>
<span class="sd">        in the form, grid them, sets their default values etc...</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">w</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s2">&quot;gridcfg&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="c1"># dealing with the fact that the given widget belongs to</span>
        <span class="c1"># another container than the default mainContainer.</span>
        <span class="k">if</span> <span class="s2">&quot;parent&quot;</span> <span class="ow">in</span> <span class="n">entry</span> <span class="ow">and</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span><span class="p">:</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span><span class="p">[</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">]][</span><span class="s2">&quot;container&quot;</span><span class="p">]</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;mainContainer&quot;</span>

        <span class="c1"># widget type</span>
        <span class="k">if</span> <span class="s2">&quot;widgetType&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">wtype</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wtype</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Entry</span>

        <span class="c1"># InputForm</span>
        <span class="k">if</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;InputForm&quot;</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addInputForm</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">,</span> <span class="n">wtype</span><span class="p">)</span>
        <span class="c1"># Container</span>
        <span class="k">elif</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;Container&quot;</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addContainer</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">,</span> <span class="n">wtype</span><span class="p">)</span>

        <span class="c1"># FunctionCheckButton or FunctionRadiobutton:</span>
        <span class="k">elif</span> <span class="n">wtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;FunctionCheckbutton&quot;</span><span class="p">,</span> <span class="s2">&quot;FunctionRadiobutton&quot;</span><span class="p">]:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addFunctionButton</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">,</span> <span class="n">wtype</span><span class="p">)</span>

        <span class="c1"># Save Button</span>
        <span class="k">elif</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;SaveButton&quot;</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addSaveButton</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>

        <span class="c1"># Open Button</span>
        <span class="k">elif</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;OpenButton&quot;</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addOpenButton</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>

        <span class="c1"># ScrolledText</span>
        <span class="k">elif</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;ScrolledText&quot;</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addScrolledText</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>

        <span class="c1"># ListChooser:</span>
        <span class="k">elif</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;ListChooser&quot;</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addListChooser</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>

        <span class="c1"># Entry</span>
        <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">wtype</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Entry</span><span class="p">):</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addTkinterEntry</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>

        <span class="c1"># other Tkinter Widget:</span>
        <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">wtype</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Widget</span><span class="p">):</span>
            <span class="k">if</span> <span class="s2">&quot;listtext&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
                <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addGroupWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addTkinterWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>

        <span class="c1"># Python Mega Widgets  :</span>
        <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">wtype</span><span class="p">,</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">MegaWidget</span><span class="p">):</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addPMegaWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wwidgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="c1"># Pmw MegaArchetype</span>
        <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">wtype</span><span class="p">,</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">MegaArchetype</span><span class="p">):</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addPMegaWidget</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">entry</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">wwidgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># You can add any customized widget if you pass the class in wtype</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">wtype</span><span class="p">)</span> <span class="o">==</span> <span class="nb">type</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;wcfg&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
                    <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
                <span class="c1"># w = apply(wtype, (self.f,),entry[&#39;wcfg&#39;])</span>
                <span class="n">w</span> <span class="o">=</span> <span class="n">wtype</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">parent</span><span class="p">,),</span> <span class="o">**</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">])</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;set&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="s2">&quot;defaultValue&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
                    <span class="n">w</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
                <span class="c1"># w = wtype(self.f,entry[&#39;wcfg&#39;])</span>
                <span class="k">if</span> <span class="s2">&quot;gridcfg&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
                    <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2"> unsupported widget type&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">wtype</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">w</span><span class="p">:</span>
            <span class="c1"># Once the widgets has been created</span>
            <span class="c1"># If a parent has been specified for this widgets</span>
            <span class="k">if</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span> <span class="ow">and</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
                <span class="n">widgets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span><span class="p">[</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">]][</span><span class="s2">&quot;widgets&quot;</span><span class="p">]</span>
                <span class="n">widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

            <span class="c1"># The widget is a container widget</span>
            <span class="k">if</span> <span class="s2">&quot;container&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">cont</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;container&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">cont</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bytes</span><span class="p">:</span>
                        <span class="n">exec</span><span class="p">(</span>
                            <span class="s2">&quot;self.parentName[&#39;</span><span class="si">%s</span><span class="s2">&#39;] = {&#39;container&#39;:</span><span class="si">%s</span><span class="s2">, &#39;widgets&#39;:[]}&quot;</span>
                            <span class="o">%</span> <span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">cont</span><span class="p">)</span>
                        <span class="p">)</span>
                        <span class="c1"># print self.parentName[key]</span>
                    <span class="c1"># elif type(cont) is types.InstanceType:</span>
                    <span class="k">elif</span> <span class="n">isInstance</span><span class="p">(</span><span class="n">cont</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">True</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;container&quot;</span><span class="p">:</span> <span class="n">cont</span><span class="p">,</span> <span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[]}</span>

            <span class="c1"># If tooltip string has been specified creating a Balloon</span>
            <span class="c1"># widget to display the tooltip</span>
            <span class="k">if</span> <span class="s2">&quot;tooltip&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
                <span class="n">balloon</span> <span class="o">=</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">Balloon</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">yoffset</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">balloon</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;tooltip&quot;</span><span class="p">])</span>
                    <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;balloon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">balloon</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;balloon&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="c1"># Finding the position of the widget in the form</span>
            <span class="n">gridcfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findGridPosition</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">])</span>
            <span class="k">if</span> <span class="s2">&quot;sticky&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">gridcfg</span><span class="p">:</span>
                <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;sticky&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;wens&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;weight&quot;</span> <span class="ow">in</span> <span class="n">gridcfg</span><span class="p">:</span>
                <span class="n">weight</span> <span class="o">=</span> <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">weight</span> <span class="o">=</span> <span class="mi">1</span>

            <span class="c1"># Grid the widget.</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;grid&quot;</span><span class="p">):</span>
                <span class="n">w</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="o">*</span><span class="p">(),</span> <span class="o">**</span><span class="n">gridcfg</span><span class="p">)</span>

            <span class="c1"># the 2 following lines mean that the frame self.f</span>
            <span class="c1"># will allow the widget w placed at gridcfg[&#39;row&#39;],</span>
            <span class="c1"># gridcfg[&#39;column&#39;] to resize with the corresponding</span>
            <span class="c1"># weight with itself only if the sticky option of the</span>
            <span class="c1"># grid method is specified.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;row&quot;</span><span class="p">],</span> <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">],</span> <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">)</span>
            <span class="c1"># Same for container widget</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">parent</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">f</span><span class="p">:</span>
                <span class="n">parent</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;row&quot;</span><span class="p">],</span> <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">)</span>
                <span class="n">parent</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">],</span> <span class="n">weight</span><span class="o">=</span><span class="n">weight</span><span class="p">)</span>

        <span class="c1"># Keep track of the different notebooks</span>
        <span class="k">if</span> <span class="n">wtype</span> <span class="ow">in</span> <span class="p">[</span>
            <span class="n">Pmw</span><span class="o">.</span><span class="n">NoteBook</span><span class="p">,</span>
        <span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">notebooks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">w</span><span class="p">)</span>

        <span class="c1"># Handle some widgets a particular way</span>
        <span class="k">if</span> <span class="n">wtype</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ListChooser&quot;</span><span class="p">,</span> <span class="s2">&quot;ScrolledText&quot;</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Entry</span><span class="p">]:</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="n">entry</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">entry</span></div>

<div class="viewcode-block" id="InputForm.addContainer"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addContainer">[docs]</a>    <span class="k">def</span> <span class="nf">addContainer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">entry</span><span class="p">,</span> <span class="n">wtype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method handling container widgets</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;wcfg&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">wcfg</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;frameType&quot;</span> <span class="ow">in</span> <span class="n">entry</span> <span class="ow">and</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;frameType&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;scrolledFrame&quot;</span><span class="p">:</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">ScrolledFrame</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">,),</span> <span class="o">**</span><span class="n">wcfg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span><span class="p">[</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;container&quot;</span><span class="p">:</span> <span class="n">parent</span><span class="o">.</span><span class="n">interior</span><span class="p">(),</span>
                <span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="p">}</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">,),</span> <span class="o">**</span><span class="n">wcfg</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span><span class="p">[</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;container&quot;</span><span class="p">:</span> <span class="n">parent</span><span class="p">,</span> <span class="s2">&quot;widgets&quot;</span><span class="p">:</span> <span class="p">[]}</span>
        <span class="k">return</span> <span class="n">parent</span></div>

<div class="viewcode-block" id="InputForm.addInputForm"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addInputForm">[docs]</a>    <span class="k">def</span> <span class="nf">addInputForm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">entry</span><span class="p">,</span> <span class="n">wtype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method handling InputForm widgets</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;wcfg&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">wcfg</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wcfg</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">description</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;description&quot;</span><span class="p">]</span>
        <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;modal&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;blocking&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">form</span> <span class="o">=</span> <span class="n">InputForm</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">description</span><span class="p">),</span> <span class="o">**</span><span class="n">wcfg</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">frame</span></div>

<div class="viewcode-block" id="InputForm.addFunctionButton"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addFunctionButton">[docs]</a>    <span class="k">def</span> <span class="nf">addFunctionButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">wtype</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Add a FunctionCheckbutton or FunctionRadiobutton&quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;wcfg&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wcfg</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wcfg</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># if a variable is bound to the widget</span>
        <span class="k">if</span> <span class="s2">&quot;variable&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;FunctionCheckbutton&quot;</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">var</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">IntVar</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;FunctionRadiobutton&quot;</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">var</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>

            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">var</span>
            <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;defaultValue&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="s2">&quot;text&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;value&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;FunctionCheckbutton&quot;</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Checkbutton</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">,),</span> <span class="o">**</span><span class="n">wcfg</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;FunctionRadiobutton&quot;</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Radiobutton</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">,),</span> <span class="o">**</span><span class="n">wcfg</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Button-1&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">FuncButton_cb</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">w</span></div>

<div class="viewcode-block" id="InputForm.addScrolledText"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addScrolledText">[docs]</a>    <span class="k">def</span> <span class="nf">addScrolledText</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method handling ScrolledText widgets&quot;&quot;&quot;</span>
        <span class="n">f1</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;label&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">tkinter</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">anchor</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Text</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">vbar</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Scrollbar</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;vbar&quot;</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">vbar</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">15</span>
        <span class="n">w</span><span class="o">.</span><span class="n">vbar</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">tkinter</span><span class="o">.</span><span class="n">LEFT</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;y&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;size&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">w</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">w</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">w</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">80</span>
            <span class="n">w</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span>
        <span class="k">if</span> <span class="s2">&quot;defaultValue&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">w</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tkinter</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
        <span class="k">if</span> <span class="s2">&quot;writeButton&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addWriteButton</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
            <span class="c1"># Bind the descr to the Button write, will be used</span>
            <span class="c1"># by the write_cb function to write in the appropriate Text</span>
            <span class="c1"># zone.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">wb</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>
            <span class="n">wb</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;readButton&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">rb</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addReadButton</span><span class="p">(</span><span class="n">f1</span><span class="p">)</span>
            <span class="c1"># Bind the descr to the Button read, will be used</span>
            <span class="c1"># by the read_cb function to read in the appropriate Text</span>
            <span class="c1"># zone.</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">rb</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>
            <span class="n">rb</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;right&quot;</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
        <span class="n">w</span><span class="p">[</span><span class="s2">&quot;yscrollcommand&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">vbar</span><span class="o">.</span><span class="n">set</span>
        <span class="n">w</span><span class="o">.</span><span class="n">vbar</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span><span class="o">.</span><span class="n">yview</span>
        <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span>
        <span class="k">return</span> <span class="n">f1</span></div>

<div class="viewcode-block" id="InputForm.addReadButton"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addReadButton">[docs]</a>    <span class="k">def</span> <span class="nf">addReadButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to add a button to read text from file and add it in a</span>
<span class="sd">        scrolled Text or a text zone.&quot;&quot;&quot;</span>
        <span class="n">readBut</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Read&quot;</span><span class="p">)</span>
        <span class="n">readBut</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Button-1&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">read_cb</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">readBut</span></div>

<div class="viewcode-block" id="InputForm.addWriteButton"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addWriteButton">[docs]</a>    <span class="k">def</span> <span class="nf">addWriteButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to add a button to write the text contained in a scrolled</span>
<span class="sd">        text or a text zone in a file.&quot;&quot;&quot;</span>

        <span class="n">writeBut</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Write&quot;</span><span class="p">)</span>
        <span class="n">writeBut</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Button-1&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">write_cb</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">writeBut</span></div>

<div class="viewcode-block" id="InputForm.addSaveButton"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addSaveButton">[docs]</a>    <span class="k">def</span> <span class="nf">addSaveButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">wdescr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to add a button or a checkbutton or a radiobutton  to open</span>
<span class="sd">        a Save</span>
<span class="sd">        fileBrowser.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">##          wdescr[&#39;widgetType&#39;] = Tkinter.Button</span>
        <span class="k">if</span> <span class="s2">&quot;typeofwidget&quot;</span> <span class="ow">in</span> <span class="n">wdescr</span><span class="p">:</span>
            <span class="n">wdescr</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wdescr</span><span class="p">[</span><span class="s2">&quot;typeofwidget&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wdescr</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span>
        <span class="n">saveBut</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addTkinterWidget</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">wdescr</span><span class="p">)</span>
        <span class="n">wdescr</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;SaveButton&quot;</span>
        <span class="n">saveBut</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Button-1&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">save_cb</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">saveBut</span></div>

<div class="viewcode-block" id="InputForm.addOpenButton"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addOpenButton">[docs]</a>    <span class="k">def</span> <span class="nf">addOpenButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">,</span> <span class="n">wdescr</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method to add a button , checkbutton or radiobutton to open file browser.&quot;&quot;&quot;</span>
        <span class="n">wdescr</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span>
        <span class="n">openBut</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addTkinterWidget</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">wdescr</span><span class="p">)</span>
        <span class="n">wdescr</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;OpenButton&quot;</span>
        <span class="n">openBut</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;Button-1&gt;&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">open_cb</span><span class="p">,</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">openBut</span></div>

<div class="viewcode-block" id="InputForm.addTkinterWidget"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addTkinterWidget">[docs]</a>    <span class="k">def</span> <span class="nf">addTkinterWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method handling any Tkinter widgets</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;wcfg&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wcfg</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wcfg</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="s2">&quot;text&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;variable&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span>

        <span class="k">elif</span> <span class="s2">&quot;variable&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">wcfg</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="nb">issubclass</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">],</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Radiobutton</span><span class="p">)</span>
            <span class="ow">or</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">],</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Checkbutton</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>

        <span class="k">if</span> <span class="s2">&quot;textvariable&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;textvariable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;textvariable&quot;</span><span class="p">]</span>
            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;textvariable&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;command&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;value&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>

        <span class="n">w</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">](</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">,),</span> <span class="o">**</span><span class="n">wcfg</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;defaultValue&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">],</span> <span class="s2">&quot;set&quot;</span><span class="p">):</span>
                <span class="n">w</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">],</span> <span class="s2">&quot;insert&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="s2">&quot;textvariable&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">e</span> <span class="ow">or</span> <span class="s2">&quot;textvariable&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">wcfg</span>
            <span class="p">):</span>
                <span class="c1"># Text case but not Entry</span>
                <span class="n">w</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tkinter</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>

            <span class="k">elif</span> <span class="s2">&quot;textvariable&quot;</span> <span class="ow">in</span> <span class="n">wcfg</span><span class="p">:</span>
                <span class="c1"># Entry widget case.</span>
                <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;textvariable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>

            <span class="k">elif</span> <span class="s2">&quot;variable&quot;</span> <span class="ow">in</span> <span class="n">wcfg</span><span class="p">:</span>
                <span class="n">wcfg</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">w</span></div>

<div class="viewcode-block" id="InputForm.addPMegaWidget"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addPMegaWidget">[docs]</a>    <span class="k">def</span> <span class="nf">addPMegaWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">                Method handling any Python Mega Widgets (Pmw)</span>
<span class="sd">        &#39;-&#39; character are replaced by &#39;-&#39; to avoid Pmw exceptions, the oppposite</span>
<span class="sd">        translation is done in checkValues()</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># - pass directly the python mega widget dictionary as an argument</span>
        <span class="k">if</span> <span class="s2">&quot;wcfg&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">wcfg</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">wcfg</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">](</span><span class="o">*</span><span class="p">(</span><span class="n">f</span><span class="p">,),</span> <span class="o">**</span><span class="n">wcfg</span><span class="p">)</span>
        <span class="n">w</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">fill</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">padx</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">pady</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
        <span class="c1"># This mega widget can have components to be added to it</span>
        <span class="c1"># This will replace the listtext and listoption.</span>
        <span class="k">if</span> <span class="s2">&quot;componentcfg&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">compcfg</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;componentcfg&quot;</span><span class="p">]:</span>
                <span class="n">w</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">compcfg</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">),),</span> <span class="o">**</span><span class="n">compcfg</span><span class="p">[</span><span class="s2">&quot;cfg&quot;</span><span class="p">])</span>

        <span class="k">elif</span> <span class="s2">&quot;listtext&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;listoption&quot;</span> <span class="ow">in</span> <span class="n">e</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;listoption&quot;</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;listoption&quot;</span><span class="p">]:</span>
                        <span class="n">w</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">),),</span> <span class="o">**</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;listoption&quot;</span><span class="p">][</span><span class="n">name</span><span class="p">])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">]:</span>
                    <span class="n">w</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;_&quot;</span><span class="p">,</span> <span class="s2">&quot;-&quot;</span><span class="p">))</span>

        <span class="c1">##         if e.has_key(&#39;container&#39;):</span>
        <span class="c1">##             for key, cont in e[&#39;container&#39;].items():</span>
        <span class="c1">##                 if type(cont) is types.StringType:</span>
        <span class="c1">##                     exec(&quot;self.parentName[&#39;%s&#39;] = {&#39;container&#39;:%s, &#39;widgets&#39;:[]}&quot;%(key,cont))</span>
        <span class="c1">##                     #print self.parentName[key]</span>
        <span class="c1">##                 elif type(cont) is types.InstanceType:</span>
        <span class="c1">##                     self.parentName[key]= {&#39;container&#39;:cont, &#39;widgets&#39;:[]}</span>

        <span class="k">if</span> <span class="s2">&quot;defaultValue&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">ScrolledText</span><span class="p">):</span>
                <span class="n">w</span><span class="o">.</span><span class="n">settext</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">ScrolledListBox</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">ScrolledText</span><span class="p">):</span>
                <span class="n">w</span><span class="o">.</span><span class="n">setvalue</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;set&quot;</span><span class="p">):</span>
                <span class="n">w</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;invoke&quot;</span><span class="p">):</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">w</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;selectitem&quot;</span><span class="p">):</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="n">w</span><span class="o">.</span><span class="n">selectitem</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span>
                                <span class="s2">&quot;Could not use </span><span class="si">%s</span><span class="s2"> as the defaultValue!&quot;</span>
                                <span class="o">%</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">]</span>
                            <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;sorry cannot set to the defaultValue&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">w</span><span class="p">,</span> <span class="s2">&quot;insert&quot;</span><span class="p">):</span>
                <span class="n">w</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">w</span></div>

<div class="viewcode-block" id="InputForm.addGroupWidget"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addGroupWidget">[docs]</a>    <span class="k">def</span> <span class="nf">addGroupWidget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method handling GroupWidgets</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;wcfg&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="s2">&quot;gridcfg&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="s2">&quot;direction&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;direction&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">defaultDirection</span>
        <span class="k">if</span> <span class="s2">&quot;groupedBy&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">groupedBy</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;groupedBy&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">groupedBy</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">])</span>
        <span class="n">number</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">])</span> <span class="o">/</span> <span class="n">groupedBy</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">])</span> <span class="o">%</span> <span class="n">groupedBy</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">number</span> <span class="o">=</span> <span class="n">number</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="n">j</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="c1"># For the first radiobutton, use findGridPosition to get</span>
            <span class="c1"># the widget&#39;s position.</span>
            <span class="n">gridcfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findGridPosition</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">])</span>
            <span class="n">firstrow</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">][</span><span class="s2">&quot;row&quot;</span><span class="p">]</span>
            <span class="n">firstcolumn</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">][</span><span class="s2">&quot;column&quot;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">j</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;col&quot;</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">=</span> <span class="n">firstrow</span> <span class="o">+</span> <span class="n">n</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span> <span class="o">=</span> <span class="n">firstcolumn</span> <span class="o">-</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">=</span> <span class="n">firstrow</span> <span class="o">-</span> <span class="mi">1</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span> <span class="o">=</span> <span class="n">firstcolumn</span> <span class="o">+</span> <span class="n">n</span>

            <span class="k">while</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">groupedBy</span> <span class="o">*</span> <span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span> <span class="ow">and</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">]):</span>
                <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">][</span><span class="s2">&quot;text&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
                <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">][</span><span class="s2">&quot;value&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">][</span><span class="n">j</span><span class="p">]</span>
                <span class="c1"># w = apply(e[&#39;widgetType&#39;], (f,), wcfg)</span>
                <span class="k">if</span> <span class="n">j</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">direction</span> <span class="o">==</span> <span class="s2">&quot;col&quot;</span><span class="p">:</span>
                        <span class="n">e</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">][</span><span class="s2">&quot;column&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span> <span class="o">+</span> <span class="mi">1</span>
                        <span class="n">e</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">][</span><span class="s2">&quot;row&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span>
                        <span class="n">gridcfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findGridPosition</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">])</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">e</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">][</span><span class="s2">&quot;row&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">+</span> <span class="mi">1</span>
                        <span class="n">e</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">][</span><span class="s2">&quot;column&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">+</span> <span class="mi">1</span>
                        <span class="n">gridcfg</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">findGridPosition</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;gridcfg&quot;</span><span class="p">])</span>

                <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addTkinterWidget</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">w</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span> <span class="ow">and</span> <span class="s2">&quot;name&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                        <span class="n">widgets</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">]][</span><span class="s2">&quot;widgets&quot;</span><span class="p">]</span>
                        <span class="n">widgets</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">])</span>

                <span class="n">w</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="o">*</span><span class="p">(),</span> <span class="o">**</span><span class="n">gridcfg</span><span class="p">)</span>
                <span class="n">j</span> <span class="o">=</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="s2">&quot;defaultValue&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">][</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">])</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">][</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="InputForm.addTkinterEntry"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addTkinterEntry">[docs]</a>    <span class="k">def</span> <span class="nf">addTkinterEntry</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">e</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        add an Entry widget with a possible label</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;textvariable&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">]:</span>
            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">][</span><span class="s2">&quot;textvariable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">StringVar</span><span class="p">()</span>

        <span class="n">command</span> <span class="o">=</span> <span class="n">getkw</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">],</span> <span class="s2">&quot;command&quot;</span><span class="p">)</span>
        <span class="n">eventType</span> <span class="o">=</span> <span class="n">getkw</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">],</span> <span class="s2">&quot;eventType&quot;</span><span class="p">)</span>
        <span class="n">commandArgs</span> <span class="o">=</span> <span class="n">getkw</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">],</span> <span class="s2">&quot;commandArgs&quot;</span><span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">getkw</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">],</span> <span class="s2">&quot;label&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">label</span><span class="p">:</span>
            <span class="n">f1</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">tkinter</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">label</span><span class="p">)</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;e&quot;</span><span class="p">)</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addTkinterWidget</span><span class="p">(</span><span class="n">f1</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="n">w</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">)</span>
            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>
            <span class="n">returnVal</span> <span class="o">=</span> <span class="n">f1</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">addTkinterWidget</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
            <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">w</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">w</span><span class="p">]</span> <span class="o">=</span> <span class="n">e</span>
            <span class="n">returnVal</span> <span class="o">=</span> <span class="n">w</span>

        <span class="k">if</span> <span class="n">command</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">eventType</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">eventType</span> <span class="o">=</span> <span class="s2">&quot;&lt;Return&gt;&quot;</span>
            <span class="k">if</span> <span class="n">commandArgs</span><span class="p">:</span>
                <span class="n">w</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">eventType</span><span class="p">,</span> <span class="n">CallBackFunction</span><span class="p">(</span><span class="n">command</span><span class="p">,</span> <span class="n">commandArgs</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">w</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="n">eventType</span><span class="p">,</span> <span class="n">command</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">returnVal</span></div>

<div class="viewcode-block" id="InputForm.addListChooser"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.addListChooser">[docs]</a>    <span class="k">def</span> <span class="nf">addListChooser</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">entry</span><span class="o">=</span><span class="p">{}):</span>
        <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;single&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;mode&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;mode&quot;</span><span class="p">]</span>
        <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Title&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;title&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span>
        <span class="n">width</span> <span class="o">=</span> <span class="mi">40</span>
        <span class="k">if</span> <span class="s2">&quot;width&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">width</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;defaultValue&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">defaultValue</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;defaultValue&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">defaultValue</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;lbpackcfg&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">lbpackcfg</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;lbpackcfg&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lbpackcfg</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;fill&quot;</span><span class="p">:</span> <span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;expand&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>

        <span class="k">if</span> <span class="s2">&quot;lbwcfg&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">lbwcfg</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;lbwcfg&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">lbwcfg</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">lc</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ListChooser</span><span class="p">(</span>
            <span class="n">f</span><span class="p">,</span>
            <span class="n">mode</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
            <span class="n">entries</span><span class="o">=</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;entries&quot;</span><span class="p">],</span>
            <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span>
            <span class="n">defaultValue</span><span class="o">=</span><span class="n">defaultValue</span><span class="p">,</span>
            <span class="n">lbpackcfg</span><span class="o">=</span><span class="n">lbpackcfg</span><span class="p">,</span>
            <span class="n">lbwcfg</span><span class="o">=</span><span class="n">lbwcfg</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;command&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">lc</span><span class="o">.</span><span class="n">lb</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s2">&quot;&lt;ButtonRelease-1&gt;&quot;</span><span class="p">,</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">],</span> <span class="s2">&quot;+&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">lc</span><span class="o">.</span><span class="n">top</span></div>

    <span class="c1">## #############################################################</span>
    <span class="c1">## CALLBACK FUNCTIONS</span>

<div class="viewcode-block" id="InputForm.open_cb"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.open_cb">[docs]</a>    <span class="k">def</span> <span class="nf">open_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">ViewerFramework.VFGUI</span> <span class="kn">import</span> <span class="n">fileOpenAsk</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">releaseFocus</span><span class="p">()</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;idir&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">idir</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;idir&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">idir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;ifile&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">ifile</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;ifile&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ifile</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;title&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;types&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">types</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;types&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">types</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;All types&quot;</span><span class="p">,</span> <span class="s2">&quot;*.*&quot;</span><span class="p">)]</span>

        <span class="n">newfile</span> <span class="o">=</span> <span class="n">fileOpenAsk</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">idir</span><span class="o">=</span><span class="n">idir</span><span class="p">,</span> <span class="n">ifile</span><span class="o">=</span><span class="n">ifile</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;callback&quot;</span> <span class="ow">in</span> <span class="n">entry</span> <span class="ow">and</span> <span class="n">newfile</span><span class="p">:</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;callback&quot;</span><span class="p">](</span><span class="n">newfile</span><span class="p">)</span>
        <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grabFocus</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.save_cb"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.save_cb">[docs]</a>    <span class="k">def</span> <span class="nf">save_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">ViewerFramework.VFGUI</span> <span class="kn">import</span> <span class="n">fileSaveAsk</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">releaseFocus</span><span class="p">()</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;idir&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">idir</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;idir&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">idir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;ifile&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">ifile</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;ifile&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ifile</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;title&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;title&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;types&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">types</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;types&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">types</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;All types&quot;</span><span class="p">,</span> <span class="s2">&quot;*.*&quot;</span><span class="p">)]</span>

        <span class="n">newfile</span> <span class="o">=</span> <span class="n">fileSaveAsk</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">idir</span><span class="o">=</span><span class="n">idir</span><span class="p">,</span> <span class="n">ifile</span><span class="o">=</span><span class="n">ifile</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;callback&quot;</span> <span class="ow">in</span> <span class="n">entry</span> <span class="ow">and</span> <span class="n">newfile</span><span class="p">:</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;callback&quot;</span><span class="p">](</span><span class="n">newfile</span><span class="p">)</span>
        <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">newfile</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grabFocus</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.read_cb"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.read_cb">[docs]</a>    <span class="k">def</span> <span class="nf">read_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">ViewerFramework.VFGUI</span> <span class="kn">import</span> <span class="n">fileOpenAsk</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">releaseFocus</span><span class="p">()</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;readFileType&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">fileType</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;readFileType&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fileType</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Python Files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.py&quot;</span><span class="p">)]</span>

        <span class="k">if</span> <span class="s2">&quot;idir&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">idir</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;idir&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">idir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;ifile&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">ifile</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;ifile&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ifile</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">newfile</span> <span class="o">=</span> <span class="n">fileOpenAsk</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
            <span class="n">idir</span><span class="o">=</span><span class="n">idir</span><span class="p">,</span>
            <span class="n">ifile</span><span class="o">=</span><span class="n">ifile</span><span class="p">,</span>
            <span class="n">types</span><span class="o">=</span><span class="n">fileType</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Read function from file: &quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">newfile</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">newfile</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
            <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
            <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">tkinter</span><span class="o">.</span><span class="n">END</span><span class="p">,</span> <span class="n">lines</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grabFocus</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.write_cb"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.write_cb">[docs]</a>    <span class="k">def</span> <span class="nf">write_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">ViewerFramework.VFGUI</span> <span class="kn">import</span> <span class="n">fileSaveAsk</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">releaseFocus</span><span class="p">()</span>
        <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;writeFileType&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">fileType</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;writeFileType&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">fileType</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Python Files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.py&quot;</span><span class="p">)]</span>

        <span class="k">if</span> <span class="s2">&quot;idir&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">idir</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;idir&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">idir</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;ifile&quot;</span> <span class="ow">in</span> <span class="n">entry</span><span class="p">:</span>
            <span class="n">ifile</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s2">&quot;ifile&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ifile</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="n">newfile</span> <span class="o">=</span> <span class="n">fileSaveAsk</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
            <span class="n">idir</span><span class="o">=</span><span class="n">idir</span><span class="p">,</span>
            <span class="n">ifile</span><span class="o">=</span><span class="n">ifile</span><span class="p">,</span>
            <span class="n">types</span><span class="o">=</span><span class="n">fileType</span><span class="p">,</span>
            <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Save function in file: &quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">newfile</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">newfile</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">entry</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">END</span><span class="p">))</span>
            <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grabFocus</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.FuncButton_cb"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.FuncButton_cb">[docs]</a>    <span class="k">def</span> <span class="nf">FuncButton_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        method used to display a window allowing the user to type in</span>
<span class="sd">        Python code</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">tkinter.messagebox</span>

        <span class="c1"># get the widget&#39;s description</span>
        <span class="k">assert</span> <span class="s2">&quot;variable&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="p">]</span>
        <span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">widgetID_entries</span><span class="p">[</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="p">]</span>

        <span class="c1"># code typein widget is modal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">releaseFocus</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;defaultText&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">widget</span><span class="p">:</span>
            <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;defaultText&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;FunctionRadiobutton&quot;</span><span class="p">:</span>
            <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">widget</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">])</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

        <span class="c1"># create a form description</span>
        <span class="n">ifd</span> <span class="o">=</span> <span class="n">InputFormDescr</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;Define a function&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="s2">&quot;readFileType&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">widget</span><span class="p">:</span>
            <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;readFileType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Python Files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.py&quot;</span><span class="p">)]</span>
        <span class="k">if</span> <span class="s2">&quot;writeFileType&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">widget</span><span class="p">:</span>
            <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;writeFileType&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="s2">&quot;Python Files&quot;</span><span class="p">,</span> <span class="s2">&quot;*.py&quot;</span><span class="p">)]</span>

        <span class="k">if</span> <span class="n">v</span> <span class="ow">or</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;function&quot;</span> <span class="ow">or</span> <span class="n">v</span> <span class="o">==</span> <span class="s2">&quot;mapfunction&quot;</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;size&quot;</span> <span class="ow">in</span> <span class="n">widget</span><span class="p">:</span>

                <span class="n">ifd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;UserFunction&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;widgetType&quot;</span><span class="p">:</span> <span class="s2">&quot;ScrolledText&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;readFileType&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;readFileType&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;writeFileType&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;writeFileType&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;readButton&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="s2">&quot;writeButton&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;size&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;defaultValue&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;defaultText&quot;</span><span class="p">],</span>
                    <span class="p">}</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">ifd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                    <span class="p">{</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;UserFunction&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;widgetType&quot;</span><span class="p">:</span> <span class="s2">&quot;ScrolledText&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;readFileType&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;readFileType&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;writeFileType&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;writeFileType&quot;</span><span class="p">],</span>
                        <span class="s2">&quot;readButton&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="s2">&quot;writeButton&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                        <span class="s2">&quot;defaultValue&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;defaultText&quot;</span><span class="p">],</span>
                    <span class="p">}</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ifd</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;UserFunction&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;type in zone&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;widgetType&quot;</span><span class="p">:</span> <span class="s2">&quot;ScrolledText&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;readFileType&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;readFileType&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;writeFileType&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;writeFileType&quot;</span><span class="p">],</span>
                    <span class="s2">&quot;readButton&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;writeButton&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="s2">&quot;defaultValue&quot;</span><span class="p">:</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;defaultText&quot;</span><span class="p">],</span>
                <span class="p">}</span>
            <span class="p">)</span>

        <span class="n">window</span> <span class="o">=</span> <span class="n">InputForm</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">ifd</span><span class="p">)</span>
        <span class="n">vals</span> <span class="o">=</span> <span class="n">window</span><span class="o">.</span><span class="n">go</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">grabFocus</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;widgetType&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;FunctionCheckbutton&quot;</span><span class="p">:</span>
            <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s2">&quot;0&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vals</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;userFunction&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">vals</span><span class="p">[</span><span class="s2">&quot;UserFunction&quot;</span><span class="p">]</span>
        <span class="n">function</span> <span class="o">=</span> <span class="n">evalString</span><span class="p">(</span><span class="n">vals</span><span class="p">[</span><span class="s2">&quot;UserFunction&quot;</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;userFunction&quot;</span><span class="p">]</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">tkinter</span><span class="o">.</span><span class="n">messagebox</span><span class="o">.</span><span class="n">showwarning</span><span class="p">(</span>
                <span class="s2">&quot;Color by properties&quot;</span><span class="p">,</span> <span class="s2">&quot;no function definied&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="s2">&quot;command&quot;</span> <span class="ow">in</span> <span class="n">widget</span><span class="p">:</span>
            <span class="n">values</span> <span class="o">=</span> <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">](</span><span class="n">function</span><span class="p">)</span>
            <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">values</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">widget</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">function</span></div>

<div class="viewcode-block" id="InputForm.PMWnameToReal"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.PMWnameToReal">[docs]</a>    <span class="k">def</span> <span class="nf">PMWnameToReal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="c1"># PMW does not accept names containing &#39;_&#39; for widgets</span>
        <span class="c1"># addPMegaWidget systematically replaced &#39;_&#39; in names by &#39;-&#39;</span>
        <span class="c1"># this functions is called by checkValues to fo the opposite</span>
        <span class="c1"># i.e. replace &#39;-&#39; by &#39;_&#39; if needed</span>
        <span class="n">names</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s2">&quot;componentcfg&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="n">names</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span> <span class="n">e</span><span class="o">=</span><span class="n">e</span><span class="p">:</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;componentcfg&quot;</span><span class="p">][</span><span class="s2">&quot;name&quot;</span><span class="p">],</span> <span class="n">e</span><span class="p">))</span>
        <span class="k">elif</span> <span class="s2">&quot;listtext&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;listoption&quot;</span> <span class="ow">in</span> <span class="n">e</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;listoption&quot;</span><span class="p">])</span> <span class="ow">is</span> <span class="nb">dict</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;listoption&quot;</span><span class="p">]:</span>
                        <span class="n">names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">names</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;listtext&quot;</span><span class="p">]</span>

        <span class="c1"># len of names can be 0, for instance the widget listing the MSMS</span>
        <span class="c1"># surfaces has an empty list for names</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">names</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">name</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">)</span></div>

    <span class="c1">## #####################################################################</span>
    <span class="c1">##</span>

<div class="viewcode-block" id="InputForm.checkValues"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.checkValues">[docs]</a>    <span class="k">def</span> <span class="nf">checkValues</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">container</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        optional argument:</span>
<span class="sd">        container -- (&#39;all&#39;) specifies the name of a container</span>

<span class="sd">        Method which gets the values of each widgets in the given container</span>
<span class="sd">        It will return a dictionary where the key is the name of the widget</span>
<span class="sd">        and the value is the value of the widget.</span>
<span class="sd">        This method is called by the OK_cb when the OK/CANCEL buttons</span>
<span class="sd">        exist and has to called otherwise.</span>
<span class="sd">        If the widget doesn&#39;t implement a get method a special case has to be</span>
<span class="sd">        implemented in this method.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">values</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="n">container</span> <span class="o">==</span> <span class="s2">&quot;all&quot;</span><span class="p">:</span>
            <span class="n">contNames</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parentName</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="k">elif</span> <span class="nb">type</span><span class="p">(</span><span class="n">container</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">bytes</span><span class="p">:</span>
            <span class="n">contNames</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">container</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">contNames</span> <span class="o">=</span> <span class="n">container</span>

        <span class="n">pN</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parentName</span>

        <span class="n">entryBN</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">descr</span><span class="o">.</span><span class="n">entryByName</span>
        <span class="n">wNames</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">contNames</span><span class="p">:</span>
            <span class="n">wNames</span> <span class="o">=</span> <span class="n">wNames</span> <span class="o">+</span> <span class="n">pN</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;widgets&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">wNames</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;WARNING: No widgets in these containers&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">wName</span> <span class="ow">in</span> <span class="n">wNames</span><span class="p">:</span>
            <span class="n">wtype</span> <span class="o">=</span> <span class="n">entryBN</span><span class="p">[</span><span class="n">wName</span><span class="p">][</span><span class="s2">&quot;widgetType&quot;</span><span class="p">]</span>
            <span class="n">e</span> <span class="o">=</span> <span class="n">entryBN</span><span class="p">[</span><span class="n">wName</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;Container&quot;</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">elif</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;InputForm&quot;</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">form</span><span class="o">.</span><span class="n">checkValues</span><span class="p">()</span>

            <span class="k">elif</span> <span class="n">wtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;SaveButton&quot;</span><span class="p">,</span> <span class="s2">&quot;OpenButton&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="s2">&quot;filename&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;filename&quot;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">elif</span> <span class="n">wtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;FunctionCheckbutton&quot;</span><span class="p">,</span> <span class="s2">&quot;FunctionRadiobutton&quot;</span><span class="p">]:</span>
                <span class="k">if</span> <span class="s2">&quot;result&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;text&quot;</span><span class="p">],</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">],</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;userFunction&quot;</span><span class="p">])</span>
            <span class="c1"># ScrolledText</span>
            <span class="k">elif</span> <span class="n">wtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;ScrolledText&quot;</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Text</span><span class="p">]:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">END</span><span class="p">)</span>

            <span class="c1"># ListChooser:</span>
            <span class="k">elif</span> <span class="n">wtype</span> <span class="o">==</span> <span class="s2">&quot;ListChooser&quot;</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

            <span class="c1"># Tkinter Widget:</span>
            <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">wtype</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Widget</span><span class="p">):</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">],</span> <span class="s2">&quot;get&quot;</span><span class="p">):</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                <span class="k">elif</span> <span class="s2">&quot;wcfg&quot;</span> <span class="ow">in</span> <span class="n">e</span> <span class="ow">and</span> <span class="s2">&quot;variable&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">]:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;wcfg&quot;</span><span class="p">][</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                <span class="k">elif</span> <span class="s2">&quot;variable&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                    <span class="c1"># Here right now because all the descr don&#39;t have a wcfg.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;variable&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># Add this else for the widget with a</span>
                    <span class="c1"># name but no variable.</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">wtype</span><span class="p">,</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">ComboBox</span><span class="p">):</span>
                <span class="n">getVal</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                <span class="n">selVal</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">getcurselection</span><span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">getVal</span> <span class="ow">in</span> <span class="n">selVal</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="p">(</span><span class="n">getVal</span><span class="p">,)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">selVal</span>

            <span class="k">elif</span> <span class="nb">issubclass</span><span class="p">(</span><span class="n">wtype</span><span class="p">,</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">MegaWidget</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">],</span> <span class="s2">&quot;get&quot;</span><span class="p">)</span>
                    <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">],</span> <span class="s2">&quot;getcurselection&quot;</span><span class="p">)</span>
                <span class="p">)</span> <span class="ow">or</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">],</span> <span class="s2">&quot;getcurselection&quot;</span><span class="p">):</span>
                    <span class="n">res</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">getcurselection</span><span class="p">()</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">bytes</span><span class="p">:</span>
                        <span class="k">for</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">res</span><span class="p">:</span>
                            <span class="n">val</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">PMWnameToReal</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">name</span><span class="p">))</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PMWnameToReal</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">res</span><span class="p">)</span>

                <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">],</span> <span class="s2">&quot;get&quot;</span><span class="p">):</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PMWnameToReal</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
                <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">],</span> <span class="s2">&quot;getint&quot;</span><span class="p">):</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">getint</span><span class="p">()</span>
                <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">],</span> <span class="s2">&quot;getstring&quot;</span><span class="p">):</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">PMWnameToReal</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">getstring</span><span class="p">())</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">],</span> <span class="s2">&quot;get&quot;</span><span class="p">):</span>
                <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">val</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="k">if</span> <span class="n">val</span> <span class="o">==</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="s2">&quot;required&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">releaseFocus</span><span class="p">()</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="s2">&quot;missing value for field </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>

                    <span class="n">SimpleDialog</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
                        <span class="n">text</span><span class="o">=</span><span class="n">t</span><span class="p">,</span>
                        <span class="n">buttons</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Continue&quot;</span><span class="p">],</span>
                        <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Missing required field&quot;</span><span class="p">,</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">go</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">grabFocus</span><span class="p">()</span>
                    <span class="k">return</span> <span class="s2">&quot;Error&quot;</span>

            <span class="k">if</span> <span class="s2">&quot;type&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">val</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">](</span><span class="n">val</span><span class="p">)</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">releaseFocus</span><span class="p">()</span>
                    <span class="n">t</span> <span class="o">=</span> <span class="s2">&quot;invalid value for field </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>
                    <span class="n">SimpleDialog</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
                        <span class="n">text</span><span class="o">=</span><span class="n">t</span><span class="p">,</span>
                        <span class="n">buttons</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Continue&quot;</span><span class="p">],</span>
                        <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Invalid value&quot;</span><span class="p">,</span>
                    <span class="p">)</span><span class="o">.</span><span class="n">go</span><span class="p">()</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">grabFocus</span><span class="p">()</span>
                    <span class="k">return</span> <span class="s2">&quot;Error&quot;</span>
            <span class="n">ok</span> <span class="o">=</span> <span class="mi">1</span>
            <span class="k">if</span> <span class="s2">&quot;validateFunc&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;validateArgs&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">arguments</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;validateArgs&quot;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">arguments</span> <span class="o">=</span> <span class="p">()</span>
                <span class="k">if</span> <span class="s2">&quot;err_msg&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">err_msg</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;err_msg&quot;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">err_msg</span> <span class="o">=</span> <span class="s2">&quot;invalid value for field </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span>

                <span class="n">v</span> <span class="o">=</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;validateFunc&quot;</span><span class="p">](</span><span class="o">*</span><span class="p">(</span><span class="n">val</span><span class="p">,)</span> <span class="o">+</span> <span class="n">arguments</span><span class="p">)</span>

                <span class="k">if</span> <span class="ow">not</span> <span class="n">v</span><span class="p">:</span>
                    <span class="n">ok</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">elif</span> <span class="s2">&quot;validValues&quot;</span> <span class="ow">in</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">e</span><span class="p">[</span><span class="s2">&quot;validValues&quot;</span><span class="p">]:</span>
                    <span class="n">ok</span> <span class="o">=</span> <span class="mi">0</span>

            <span class="k">if</span> <span class="n">ok</span><span class="p">:</span>
                <span class="n">values</span><span class="p">[</span><span class="n">e</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]]</span> <span class="o">=</span> <span class="n">val</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">releaseFocus</span><span class="p">()</span>
                <span class="n">t</span> <span class="o">=</span> <span class="n">err_msg</span>
                <span class="n">SimpleDialog</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span>
                    <span class="n">text</span><span class="o">=</span><span class="n">t</span><span class="p">,</span>
                    <span class="n">buttons</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Continue&quot;</span><span class="p">],</span>
                    <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Invalid value&quot;</span><span class="p">,</span>
                <span class="p">)</span><span class="o">.</span><span class="n">go</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">grabFocus</span><span class="p">()</span>
                <span class="k">return</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">values</span></div>

<div class="viewcode-block" id="InputForm.testForm"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.testForm">[docs]</a>    <span class="k">def</span> <span class="nf">testForm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">setWidget</span><span class="o">=</span><span class="p">{},</span> <span class="n">container</span><span class="o">=</span><span class="s2">&quot;all&quot;</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method can be called by tests instead of the go method, It will</span>
<span class="sd">        first set the widgets to the given values provided by the setWidgets dictionary</span>
<span class="sd">        then the checkValues method will be called and the val dictionary returned.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Need to set the widgets to the given values if setWidget is</span>
        <span class="c1"># specified</span>
        <span class="k">if</span> <span class="n">setWidget</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;SETTING THE WIDGETS VALUE....&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">setWidget</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
                <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">descr</span><span class="o">.</span><span class="n">entryByName</span><span class="p">:</span>
                    <span class="n">widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">descr</span><span class="o">.</span><span class="n">entryByName</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;widget&quot;</span><span class="p">]</span>
                    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s2">&quot;set&quot;</span><span class="p">):</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;setting&quot;</span><span class="p">)</span>
                        <span class="n">widget</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s2">&quot;setvalue&quot;</span><span class="p">):</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;setvalue&quot;</span><span class="p">)</span>
                        <span class="n">widget</span><span class="o">.</span><span class="n">setvalue</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s2">&quot;selectitem&quot;</span><span class="p">):</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;selectitem&quot;</span><span class="p">)</span>
                        <span class="n">widget</span><span class="o">.</span><span class="n">selectitem</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span> <span class="s2">&quot;invoke&quot;</span><span class="p">):</span>
                        <span class="k">try</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;invoking with val&quot;</span><span class="p">)</span>
                            <span class="n">widget</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
                        <span class="k">except</span><span class="p">:</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;invoking without&quot;</span><span class="p">)</span>
                            <span class="n">widget</span><span class="o">.</span><span class="n">invoke</span><span class="p">()</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Could not set the value of &quot;</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;=================================================&quot;</span><span class="p">)</span>
        <span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">sleep</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
        <span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;ok&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ok</span><span class="o">.</span><span class="n">invoke</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkValues</span><span class="p">(</span><span class="n">container</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span></div>

    <span class="c1">##  Creates problems on MacOSX, th form gets lifted but not the combobox</span>
    <span class="c1">##  pull down menus (see bindGeometry command)</span>
    <span class="c1">##  Also is anoying with some other forms</span>
    <span class="c1">##     def autoLift(self, event=None):</span>
    <span class="c1">##         self.lift()</span>
    <span class="c1">##         self.autoRaiseID = self.root.after(1000, self.autoLift)</span>

<div class="viewcode-block" id="InputForm.go"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.go">[docs]</a>    <span class="k">def</span> <span class="nf">go</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;This method starts the inputform in modal mode&quot;&quot;&quot;</span>
        <span class="c1"># FIXME WHEN BLOCKING NOT NECESSARILY MODAL.</span>
        <span class="k">if</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">modal</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">blocking</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">okcancel</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="c1">##            self.autoRaiseID = self.root.after(1000, self.autoLift)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">grabFocus</span><span class="p">()</span>  <span class="c1"># grabs the focus because modal</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>  <span class="c1"># wait for the OK</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">releaseFocus</span><span class="p">()</span>
            <span class="c1">##             if self.autoRaiseID is not None:</span>
            <span class="c1">##                 self.root.after_cancel(self.autoRaiseID)</span>
            <span class="c1">##                 self.autoRaiseID = None</span>

            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span></div>

    <span class="c1">## #########################################################3</span>
    <span class="c1">## HELPER METHODS.</span>
<div class="viewcode-block" id="InputForm.buildHelpButton"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.buildHelpButton">[docs]</a>    <span class="k">def</span> <span class="nf">buildHelpButton</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">help</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Method which builds the HELP button.</span>
<span class="sd">        required argument:</span>
<span class="sd">        help == String providing the URL of the help. The callback function</span>
<span class="sd">                bound to the help button will open a webbrowser at this adress.</span>
<span class="sd">        optional argument</span>
<span class="sd">        frame -- (None) Specifies in which frame this button widget should be</span>
<span class="sd">                 added, If None provided then a new frame will be created.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">):</span>
            <span class="n">frame</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="s2">&quot;groove&quot;</span><span class="p">)</span>
            <span class="n">frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;bottom&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="n">ICONPATH</span> <span class="o">=</span> <span class="n">findFilePath</span><span class="p">(</span><span class="s2">&quot;Icons&quot;</span><span class="p">,</span> <span class="s2">&quot;ViewerFramework&quot;</span><span class="p">)</span>
        <span class="n">iconfile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ICONPATH</span><span class="p">,</span> <span class="s2">&quot;32x32&quot;</span><span class="p">,</span> <span class="s2">&quot;info.gif&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">Icon</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">iconfile</span><span class="p">,</span> <span class="n">master</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">help</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="o">*</span><span class="p">(</span><span class="n">frame</span><span class="p">,),</span>
            <span class="o">**</span><span class="p">{</span>
                <span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;?&quot;</span><span class="p">,</span>
                <span class="s2">&quot;image&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Icon</span><span class="p">,</span>
                <span class="s2">&quot;height&quot;</span><span class="p">:</span> <span class="mi">22</span><span class="p">,</span>
                <span class="s2">&quot;width&quot;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
                <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="n">CallBackFunction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">showHelp_cb</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="n">help</span><span class="p">),</span>
            <span class="p">}</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">help</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;we&quot;</span><span class="p">,</span> <span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balloon</span> <span class="o">=</span> <span class="n">Pmw</span><span class="o">.</span><span class="n">Balloon</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">balloon</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">help</span><span class="p">,</span> <span class="s2">&quot;Click to open help link:</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="n">help</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">frame</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="InputForm.showHelp_cb"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.showHelp_cb">[docs]</a>    <span class="k">def</span> <span class="nf">showHelp_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Callback function of the HELP button.</span>
<span class="sd">        It will open a webbrowser at the given help URL when specified.</span>
<span class="sd">        If it can&#39;t open the page then a warning message will be displayed.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">urllib.parse</span><span class="o">,</span> <span class="nn">webbrowser</span>

        <span class="k">if</span> <span class="n">help</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">webbrowser</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">help</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">warning</span>

            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="s2">&quot;Error opening </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">help</span><span class="p">)</span></div>

<div class="viewcode-block" id="InputForm.buildOkCancelButtons"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.buildOkCancelButtons">[docs]</a>    <span class="k">def</span> <span class="nf">buildOkCancelButtons</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">okCfg</span><span class="p">,</span> <span class="n">cancelCfg</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This method creates an OK button and a CANCEL button.</span>
<span class="sd">        required arguments:</span>
<span class="sd">        okCfg == configuration dictionary of the OK button</span>
<span class="sd">        cancelCfg == configuration dictionay of the CANCEL button</span>

<span class="sd">        optional arguments:</span>
<span class="sd">        help == (None) if a help string is provided the buildHelpButton will be called</span>
<span class="sd">                with the f1 frame so that the 3 buttons are in the same frame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">types</span> <span class="kn">import</span> <span class="n">DictType</span>

        <span class="c1"># Frame for the buttons.</span>
        <span class="n">f1</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="p">,</span> <span class="n">bd</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="s2">&quot;groove&quot;</span><span class="p">)</span>
        <span class="n">f1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;bottom&quot;</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="c1"># Ok button</span>
        <span class="n">okopts</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;OK&quot;</span><span class="p">,</span> <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">OK_cb</span><span class="p">}</span>
        <span class="n">okFunc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">cancelFunc</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">okCfg</span><span class="p">)</span> <span class="ow">is</span> <span class="n">DictType</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">okCfg</span> <span class="o">==</span> <span class="p">{}:</span>
            <span class="k">if</span> <span class="s2">&quot;command&quot;</span> <span class="ow">in</span> <span class="n">okCfg</span><span class="p">:</span>
                <span class="n">okFunc</span> <span class="o">=</span> <span class="n">okCfg</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">okCfg</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">]</span>
                <span class="n">okopts</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">CallBackFunction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">OK_cb</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">okFunc</span><span class="p">)</span>
            <span class="n">okopts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">okCfg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ok</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">f1</span><span class="p">,),</span> <span class="o">**</span><span class="n">okopts</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ok</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;we&quot;</span><span class="p">)</span>

        <span class="c1"># Cancel Button</span>
        <span class="n">cancelopts</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;text&quot;</span><span class="p">:</span> <span class="s2">&quot;Cancel&quot;</span><span class="p">,</span> <span class="s2">&quot;command&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">Cancel_cb</span><span class="p">}</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">cancelCfg</span><span class="p">)</span> <span class="ow">is</span> <span class="n">DictType</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">cancelCfg</span> <span class="o">==</span> <span class="p">{}:</span>
            <span class="k">if</span> <span class="s2">&quot;command&quot;</span> <span class="ow">in</span> <span class="n">cancelCfg</span><span class="p">:</span>
                <span class="n">cancelFunc</span> <span class="o">=</span> <span class="n">cancelCfg</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">]</span>
                <span class="k">del</span> <span class="n">cancelCfg</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">]</span>
                <span class="n">cancelCfg</span><span class="p">[</span><span class="s2">&quot;command&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">CallBackFunction</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">Cancel_cb</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="n">cancelFunc</span><span class="p">)</span>
            <span class="n">cancelopts</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">cancelCfg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cancel</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="n">f1</span><span class="p">,),</span> <span class="o">**</span><span class="n">cancelopts</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cancel</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">column</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">sticky</span><span class="o">=</span><span class="s2">&quot;we&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">help</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">buildHelpButton</span><span class="p">(</span><span class="n">help</span><span class="p">,</span> <span class="n">frame</span><span class="o">=</span><span class="n">f1</span><span class="p">)</span>
        <span class="n">f1</span><span class="o">.</span><span class="n">rowconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">f1</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">f1</span><span class="o">.</span><span class="n">columnconfigure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">weight</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></div>

<div class="viewcode-block" id="InputForm.OK_cb"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.OK_cb">[docs]</a>    <span class="k">def</span> <span class="nf">OK_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;call back for OK button&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">checkValues</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">==</span> <span class="s2">&quot;Error&quot;</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">withdraw</span><span class="p">()</span>
        <span class="c1"># If a func is specified the func is then called</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">func</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">func</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.Cancel_cb"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.Cancel_cb">[docs]</a>    <span class="k">def</span> <span class="nf">Cancel_cb</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">func</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;call back for Cancel button&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">values</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="c1"># If a func is specified the func is then called</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">withdraw</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">func</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">func</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.findGridPosition"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.findGridPosition">[docs]</a>    <span class="k">def</span> <span class="nf">findGridPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gridcfg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;find next available position in grid&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;col&quot;</span> <span class="ow">in</span> <span class="n">gridcfg</span> <span class="ow">and</span> <span class="s2">&quot;column&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">gridcfg</span><span class="p">:</span>
            <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;col&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="s2">&quot;column&quot;</span> <span class="ow">in</span> <span class="n">gridcfg</span> <span class="ow">and</span> <span class="s2">&quot;row&quot;</span> <span class="ow">in</span> <span class="n">gridcfg</span><span class="p">:</span>
            <span class="n">requestedRow</span> <span class="o">=</span> <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;row&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">requestedRow</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">requestedRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">+</span> <span class="n">requestedRow</span>
            <span class="k">if</span> <span class="n">requestedRow</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">requestedRow</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span><span class="p">:</span>
                <span class="n">requestedRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">requestedCol</span> <span class="o">=</span> <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">requestedCol</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">requestedCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">+</span> <span class="n">requestedCol</span>
            <span class="k">if</span> <span class="n">requestedCol</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">requestedCol</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span><span class="p">:</span>
                <span class="n">requestedCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">elif</span> <span class="s2">&quot;row&quot;</span> <span class="ow">in</span> <span class="n">gridcfg</span><span class="p">:</span>
            <span class="n">requestedRow</span> <span class="o">=</span> <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;row&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">requestedCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span>
            <span class="k">if</span> <span class="n">requestedRow</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">requestedRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">+</span> <span class="n">requestedRow</span>
            <span class="k">if</span> <span class="n">requestedRow</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">requestedRow</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span><span class="p">:</span>
                <span class="n">requestedRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">elif</span> <span class="s2">&quot;column&quot;</span> <span class="ow">in</span> <span class="n">gridcfg</span><span class="p">:</span>
            <span class="n">requestedCol</span> <span class="o">=</span> <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">requestedRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span>
            <span class="k">if</span> <span class="n">requestedCol</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">requestedCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">+</span> <span class="n">requestedCol</span>
            <span class="k">if</span> <span class="n">requestedCol</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">requestedCol</span> <span class="o">&gt;=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span><span class="p">:</span>
                <span class="n">requestedCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">defaultDirection</span> <span class="o">==</span> <span class="s2">&quot;col&quot;</span><span class="p">:</span>
                <span class="c1"># requestedRow = self.lastUsedRow</span>
                <span class="n">requestedRow</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="c1"># self.lastRow = self.lastRow+1</span>
                <span class="c1"># NB: lastCol is always 1 more than biggest used</span>
                <span class="n">requestedCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># requestedCol = self.lastUsedCol</span>
                <span class="n">requestedCol</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="c1"># self.lastCol = self.lastCol+1</span>
                <span class="c1"># NB: lastRow is always 1 more than biggest used</span>
                <span class="n">requestedRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;row&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">=</span> <span class="n">requestedRow</span>
        <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;column&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span> <span class="o">=</span> <span class="n">requestedCol</span>

        <span class="c1"># make sure we point to first empty column and first empty line</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">&lt;=</span> <span class="n">requestedRow</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">=</span> <span class="n">requestedRow</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">&lt;=</span> <span class="n">requestedCol</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">=</span> <span class="n">requestedCol</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="s2">&quot;columnspan&quot;</span> <span class="ow">in</span> <span class="n">gridcfg</span><span class="p">:</span>
            <span class="n">extraCol</span> <span class="o">=</span> <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;columnspan&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastCol</span> <span class="o">+</span> <span class="n">extraCol</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedCol</span> <span class="o">+</span> <span class="n">extraCol</span>
        <span class="k">if</span> <span class="s2">&quot;rowspan&quot;</span> <span class="ow">in</span> <span class="n">gridcfg</span><span class="p">:</span>
            <span class="n">extraRow</span> <span class="o">=</span> <span class="n">gridcfg</span><span class="p">[</span><span class="s2">&quot;rowspan&quot;</span><span class="p">]</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastRow</span> <span class="o">+</span> <span class="n">extraRow</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">lastUsedRow</span> <span class="o">+</span> <span class="n">extraRow</span>

        <span class="k">return</span> <span class="n">gridcfg</span></div>

    <span class="c1">###################################################################</span>
    <span class="c1">### Tkinter methods.</span>

<div class="viewcode-block" id="InputForm.grabFocus"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.grabFocus">[docs]</a>    <span class="k">def</span> <span class="nf">grabFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Method to grab the focus&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modal</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">grab_set</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.releaseFocus"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.releaseFocus">[docs]</a>    <span class="k">def</span> <span class="nf">releaseFocus</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Method to release the focus of the form&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">modal</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">grab_release</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.destroy"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.destroy">[docs]</a>    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot; Method to destroy the forms&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">destroy</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.lift"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.lift">[docs]</a>    <span class="k">def</span> <span class="nf">lift</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to lift the inputform</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">winfo_toplevel</span><span class="p">()</span><span class="o">.</span><span class="n">lift</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.withdraw"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.withdraw">[docs]</a>    <span class="k">def</span> <span class="nf">withdraw</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to withdraw the inputform</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">winfo_toplevel</span><span class="p">()</span><span class="o">.</span><span class="n">withdraw</span><span class="p">()</span></div>

<div class="viewcode-block" id="InputForm.deiconify"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.InputForm.deiconify">[docs]</a>    <span class="k">def</span> <span class="nf">deiconify</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method to deiconify the inputform.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">root</span><span class="o">.</span><span class="n">winfo_toplevel</span><span class="p">()</span><span class="o">.</span><span class="n">deiconify</span><span class="p">()</span></div></div>


<div class="viewcode-block" id="evalString"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.evalString">[docs]</a><span class="k">def</span> <span class="nf">evalString</span><span class="p">(</span><span class="nb">str</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">function</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="c1"># try:</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="s2">&quot;&lt;string&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;exec&quot;</span><span class="p">)</span>
        <span class="n">exec</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">function</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">co_names</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
    <span class="c1"># except:</span>
    <span class="c1">#    raise ValueError</span>
    <span class="k">return</span> <span class="n">function</span></div>


<span class="kn">from</span> <span class="nn">tkinter.filedialog</span> <span class="kn">import</span> <span class="n">FileDialog</span>
<span class="kn">import</span> <span class="nn">os</span>


<div class="viewcode-block" id="ModuleDialog"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ModuleDialog">[docs]</a><span class="k">class</span> <span class="nc">ModuleDialog</span><span class="p">(</span><span class="n">FileDialog</span><span class="p">):</span>

    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Module Selection Dialog&quot;</span>

<div class="viewcode-block" id="ModuleDialog.ok_command"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.ModuleDialog.ok_command">[docs]</a>    <span class="k">def</span> <span class="nf">ok_command</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_selection</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">bell</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">quit</span><span class="p">(</span><span class="n">file</span><span class="p">)</span></div></div>


<div class="viewcode-block" id="CommandDialog"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.CommandDialog">[docs]</a><span class="k">class</span> <span class="nc">CommandDialog</span><span class="p">(</span><span class="n">FileDialog</span><span class="p">):</span>

    <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;Command Selection Dialog&quot;</span>

<div class="viewcode-block" id="CommandDialog.ok_command"><a class="viewcode-back" href="../../../../../../../cellpack.mgl_tools.mglutil.gui.InputForm.Tk.html#cellpack.mgl_tools.mglutil.gui.InputForm.Tk.gui.CommandDialog.ok_command">[docs]</a>    <span class="k">def</span> <span class="nf">ok_command</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">file</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_selection</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">file</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">bell</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">quit</span><span class="p">(</span><span class="n">file</span><span class="p">)</span></div></div>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">os</span>

    <span class="n">root</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
    <span class="c1">##      lb = ListChooser(root, title=&#39;Choose a letter&#39;,</span>
    <span class="c1">##                       entries=[ (&#39;a&#39;,&#39;comment a&#39;),</span>
    <span class="c1">##                                 (&#39;b&#39;,&#39;comment b&#39;),</span>
    <span class="c1">##                                 (&#39;c&#39;,&#39;comment c&#39;),</span>
    <span class="c1">##                                 (&#39;d&#39;,&#39;comment a&#39;)] )</span>
    <span class="c1">##      lb.insert(1, &#39;Hello&#39;, &#39;value inserted&#39;)</span>
    <span class="c1">##      lb.select(1)</span>
    <span class="c1">##      result = lb.get()</span>
    <span class="c1">##      print result</span>
    <span class="c1">##      res = lb.go()</span>
    <span class="c1">##      print res</span>

    <span class="c1"># should allow to pass a function to check validity</span>
    <span class="n">f</span> <span class="o">=</span> <span class="n">InputForm</span><span class="p">(</span>
        <span class="n">root</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;input 2 strings a float and an int&quot;</span><span class="p">,</span>
        <span class="n">entries</span><span class="o">=</span><span class="p">[</span>
            <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;string 1&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;string 2&quot;</span><span class="p">,</span> <span class="s2">&quot;defaultValue&quot;</span><span class="p">:</span> <span class="s2">&quot;Hello&quot;</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;float&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="s2">&quot;required&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;int&quot;</span><span class="p">,</span> <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="s2">&quot;defaultValue&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
            <span class="p">{</span><span class="s2">&quot;label&quot;</span><span class="p">:</span> <span class="s2">&quot;check&quot;</span><span class="p">,</span> <span class="s2">&quot;widgetType&quot;</span><span class="p">:</span> <span class="s2">&quot;Checkbutton&quot;</span><span class="p">},</span>
        <span class="p">],</span>
    <span class="p">)</span>

    <span class="n">val</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">go</span><span class="p">()</span>
    <span class="n">md</span> <span class="o">=</span> <span class="n">ModuleDialog</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="n">modulefile</span> <span class="o">=</span> <span class="n">md</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;modulekey&quot;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;*Module.py&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">modulefile</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;important string is:&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">modulefile</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
    <span class="n">cd</span> <span class="o">=</span> <span class="n">CommandDialog</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
    <span class="n">commandfile</span> <span class="o">=</span> <span class="n">cd</span><span class="o">.</span><span class="n">go</span><span class="p">(</span><span class="n">key</span><span class="o">=</span><span class="s2">&quot;commandkey&quot;</span><span class="p">,</span> <span class="n">pattern</span><span class="o">=</span><span class="s2">&quot;*Commands.py&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">commandfile</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;important string is:&quot;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">commandfile</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</pre></div>

           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Megan Riel-Mehan.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>