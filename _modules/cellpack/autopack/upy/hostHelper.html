<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>cellpack.autopack.upy.hostHelper &#8212; cellPack 1.0.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/classic.css?v=89b800e6" />
    
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js?v=98d46b1a"></script>
    <script src="../../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../../_static/sphinx_highlight.js?v=4825356b"></script>
    
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">cellPack 1.0.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../../cellpack.html" >cellpack</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../../autopack.html" >cellpack.autopack</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="../upy.html" accesskey="U">cellpack.autopack.upy</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">cellpack.autopack.upy.hostHelper</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for cellpack.autopack.upy.hostHelper</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Copyright (C) &lt;2010&gt;  Autin L. TSRI</span>
<span class="sd">    This file git_upy/hostHelper.py is part of upy.</span>

<span class="sd">    upy is free software: you can redistribute it and/or modify</span>
<span class="sd">    it under the terms of the GNU General Public License as published by</span>
<span class="sd">    the Free Software Foundation, either version 3 of the License, or</span>
<span class="sd">    (at your option) any later version.</span>

<span class="sd">    upy is distributed in the hope that it will be useful,</span>
<span class="sd">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="sd">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="sd">    GNU General Public License for more details.</span>

<span class="sd">    You should have received a copy of the GNU General Public License</span>
<span class="sd">    along with upy.  If not, see &lt;http://www.gnu.org/licenses/gpl-3.0.html&gt;.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">cos</span><span class="p">,</span> <span class="n">sin</span><span class="p">,</span> <span class="n">sqrt</span>
<span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">numpy</span>
<span class="kn">import</span> <span class="nn">PIL</span> <span class="k">as</span> <span class="nn">Image</span>
<span class="kn">from</span> <span class="nn">pymunk.util</span> <span class="kn">import</span> <span class="n">is_clockwise</span><span class="p">,</span> <span class="n">calc_area</span>


<span class="kn">from</span> <span class="nn">cellpack.autopack.upy</span> <span class="kn">import</span> <span class="n">colors</span>

<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span> <span class="o">&gt;=</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span>
    <span class="n">unicode</span> <span class="o">=</span> <span class="nb">str</span>


<div class="viewcode-block" id="vdistance"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.vdistance">[docs]</a><span class="k">def</span> <span class="nf">vdistance</span><span class="p">(</span><span class="n">c0</span><span class="p">,</span> <span class="n">c1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;get the distance between two points c0 and c1&quot;&quot;&quot;</span>
    <span class="n">d</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span> <span class="o">-</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">c0</span><span class="p">)</span>
    <span class="n">s</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">d</span> <span class="o">*</span> <span class="n">d</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>


<div class="viewcode-block" id="vdiff"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.vdiff">[docs]</a><span class="k">def</span> <span class="nf">vdiff</span><span class="p">(</span><span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
    <span class="c1"># returns p1 - p2</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span> <span class="o">=</span> <span class="n">p1</span>
    <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span> <span class="o">=</span> <span class="n">p2</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x2</span><span class="p">,</span> <span class="n">y1</span> <span class="o">-</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z1</span> <span class="o">-</span> <span class="n">z2</span><span class="p">)</span></div>


<div class="viewcode-block" id="vcross"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.vcross">[docs]</a><span class="k">def</span> <span class="nf">vcross</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">):</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span> <span class="o">=</span> <span class="n">v1</span>
    <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span> <span class="o">=</span> <span class="n">v2</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">y1</span> <span class="o">*</span> <span class="n">z2</span> <span class="o">-</span> <span class="n">y2</span> <span class="o">*</span> <span class="n">z1</span><span class="p">,</span> <span class="n">z1</span> <span class="o">*</span> <span class="n">x2</span> <span class="o">-</span> <span class="n">z2</span> <span class="o">*</span> <span class="n">x1</span><span class="p">,</span> <span class="n">x1</span> <span class="o">*</span> <span class="n">y2</span> <span class="o">-</span> <span class="n">x2</span> <span class="o">*</span> <span class="n">y1</span><span class="p">)</span></div>


<div class="viewcode-block" id="dot"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.dot">[docs]</a><span class="k">def</span> <span class="nf">dot</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">):</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span> <span class="o">=</span> <span class="n">v1</span>
    <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span> <span class="o">=</span> <span class="n">v2</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x1</span> <span class="o">*</span> <span class="n">x2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">y1</span> <span class="o">*</span> <span class="n">y2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">z1</span> <span class="o">*</span> <span class="n">z2</span><span class="p">)</span></div>


<div class="viewcode-block" id="vnorm"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.vnorm">[docs]</a><span class="k">def</span> <span class="nf">vnorm</span><span class="p">(</span><span class="n">v1</span><span class="p">):</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span> <span class="o">=</span> <span class="n">v1</span>
    <span class="n">n1</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x1</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">y1</span> <span class="o">*</span> <span class="n">y1</span> <span class="o">+</span> <span class="n">z1</span> <span class="o">*</span> <span class="n">z1</span><span class="p">)</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">x1</span> <span class="o">*</span> <span class="n">n1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">*</span> <span class="n">n1</span><span class="p">,</span> <span class="n">z1</span> <span class="o">*</span> <span class="n">n1</span><span class="p">)</span></div>


<div class="viewcode-block" id="vlen"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.vlen">[docs]</a><span class="k">def</span> <span class="nf">vlen</span><span class="p">(</span><span class="n">v1</span><span class="p">):</span>
    <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span> <span class="o">=</span> <span class="n">v1</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">x1</span> <span class="o">*</span> <span class="n">x1</span> <span class="o">+</span> <span class="n">y1</span> <span class="o">*</span> <span class="n">y1</span> <span class="o">+</span> <span class="n">z1</span> <span class="o">*</span> <span class="n">z1</span><span class="p">)</span></div>


<div class="viewcode-block" id="Helper"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper">[docs]</a><span class="k">class</span> <span class="nc">Helper</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Helper abstract Object</span>
<span class="sd">    ==========================</span>
<span class="sd">    This is the main class from which all helper derived. The Helper</span>
<span class="sd">    give access to the basic function need for create and edit object</span>
<span class="sd">    in the host.</span>

<span class="sd">    Most of the function define at this loevel are overwrite by the class child.</span>
<span class="sd">    matrix and transformation came from  http://www.lfd.uci.edu/~gohlke/code/transformations.py.html</span>

<span class="sd">    &gt;&gt;&gt; import upy</span>
<span class="sd">    &gt;&gt;&gt; hClass = upy.getHelperClass()</span>
<span class="sd">    &gt;&gt;&gt; helper = helper.hClass()</span>

<span class="sd">    See examples in upy/examples</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">BONES</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="n">IK</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="n">CAM_OPTIONS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;ortho&quot;</span><span class="p">:</span> <span class="s2">&quot;ortho&quot;</span><span class="p">,</span> <span class="s2">&quot;persp&quot;</span><span class="p">:</span> <span class="s2">&quot;persp&quot;</span><span class="p">}</span>  <span class="c1"># define the type of camera</span>
    <span class="n">LIGHT_OPTIONS</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;Area&quot;</span><span class="p">:</span> <span class="s2">&quot;AREA&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Sun&quot;</span><span class="p">:</span> <span class="s2">&quot;SUN&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Spot&quot;</span><span class="p">:</span> <span class="s2">&quot;SPOT&quot;</span><span class="p">,</span>
    <span class="p">}</span>  <span class="c1"># define the type of light</span>

    <span class="n">dupliVert</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">noise_type</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;boxNoise&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;buya&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;cellNoise&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;cellVoronoi&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;cranal&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;dents&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;displacedTurbulence&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;electrico&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;fbm&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;fire&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;gas&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;hama&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;luka&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;modNoie&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;naki&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;noise&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;none&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;nutous&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;ober&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;pezo&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;poxo&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;sema&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;sparseConvolution&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;stupl&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;turbulence&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;vlNoise&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;voronoi1&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;voronoi2&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;voronoi3&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;wavyTurbulence&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;zada&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">nogui</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">instance_dupliFace</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">quad</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;+Z&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>  <span class="c1"># XY</span>
            <span class="s2">&quot;+Y&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]],</span>  <span class="c1"># XZ</span>
            <span class="s2">&quot;+X&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]],</span>  <span class="c1"># YZ</span>
            <span class="s2">&quot;-Z&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]],</span>  <span class="c1"># XY</span>
            <span class="s2">&quot;-Y&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]],</span>  <span class="c1"># XZ</span>
            <span class="s2">&quot;-X&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]],</span>  <span class="c1"># YZ</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">axis_dic</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;+X&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s2">&quot;-X&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s2">&quot;+Y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s2">&quot;-Y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s2">&quot;+Z&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
            <span class="s2">&quot;-Z&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>
        <span class="p">}</span>

    <span class="c1"># ==============================================================================</span>
    <span class="c1"># some helper for treading and asynchrone stuff</span>
    <span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="Helper.testForEscape"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.testForEscape">[docs]</a>    <span class="k">def</span> <span class="nf">testForEscape</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return True if ESC is press</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">False</span></div>

    <span class="c1"># ==============================================================================</span>
    <span class="c1"># mathutils</span>
    <span class="c1"># ==============================================================================</span>

<div class="viewcode-block" id="Helper.norm"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.norm">[docs]</a>    <span class="k">def</span> <span class="nf">norm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the norm of the vector [a,b,c]</span>

<span class="sd">        &gt;&gt;&gt; result = helper.norm(a,b,c) #a,b,c being double</span>

<span class="sd">        @type a: float</span>
<span class="sd">        @param a:  first value of the vector</span>
<span class="sd">        @type b: float</span>
<span class="sd">        @param b:  second value of the vector</span>
<span class="sd">        @type c: float</span>
<span class="sd">        @param c:  third value of the vector</span>

<span class="sd">        @rtype: float</span>
<span class="sd">        @return: the norm of the vector</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">a</span> <span class="o">*</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="n">b</span> <span class="o">+</span> <span class="n">c</span> <span class="o">*</span> <span class="n">c</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.normalize"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.normalize">[docs]</a>    <span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">A</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the normalized vector A [x,y,z]</span>

<span class="sd">        &gt;&gt;&gt; a = [1.0,3.0,5.0]</span>
<span class="sd">        &gt;&gt;&gt; a_normalized = helper.normalize(a)</span>

<span class="sd">        @type A: vector</span>
<span class="sd">        @param A:  the 3d vector</span>
<span class="sd">        @rtype: vector</span>
<span class="sd">        @return: the normalized 3d vecor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">if</span> <span class="n">norm</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">A</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span><span class="n">A</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">norm</span><span class="p">,</span> <span class="n">A</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">norm</span><span class="p">,</span> <span class="n">A</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="n">norm</span><span class="p">]</span></div>

<div class="viewcode-block" id="Helper.measure_distance"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.measure_distance">[docs]</a>    <span class="k">def</span> <span class="nf">measure_distance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">c0</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">vec</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;measure distance between 2 point specify by x,y,z</span>
<span class="sd">        c0,c1 should be Numeric.array</span>

<span class="sd">        &gt;&gt;&gt; a = [1.0,3.0,5.0]</span>
<span class="sd">        &gt;&gt;&gt; b = [5.0,1.0,2.0]</span>
<span class="sd">        &gt;&gt;&gt; distance = helper.measure_distance(a,b)</span>
<span class="sd">        &gt;&gt;&gt; distance, vector_a_to_b = helper.measure_distance(a,b)</span>

<span class="sd">        @type c0: vector</span>
<span class="sd">        @param c0:  the first 3d vector</span>
<span class="sd">        @type c1: vector</span>
<span class="sd">        @param c1:  the second 3d vector</span>
<span class="sd">        @type vec: Boolean</span>
<span class="sd">        @param vec:  if the function return the vector c1-c0</span>
<span class="sd">        @rtype: float ? vector</span>
<span class="sd">        @return: the distance, and optionly the distance vetor</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">c1</span><span class="p">)</span> <span class="o">-</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">c0</span><span class="p">)</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">d</span> <span class="o">*</span> <span class="n">d</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">vec</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">d</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">s</span><span class="p">)</span></div>

    <span class="c1"># direction, angle authorized</span>
<div class="viewcode-block" id="Helper.advance_randpoint_onsphere"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.advance_randpoint_onsphere">[docs]</a>    <span class="k">def</span> <span class="nf">advance_randpoint_onsphere</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">marge</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="n">vector</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="c1"># radius r, inclination θ, azimuth φ</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="n">azimuth</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">marge</span> <span class="o">*</span> <span class="mf">2.0</span><span class="p">)</span>
        <span class="n">inclination</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">marge</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">inclination</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">azimuth</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">inclination</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">azimuth</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">inclination</span><span class="p">)</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">vector</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">absolute_vector</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">radius</span><span class="p">])</span>
            <span class="n">matrice</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">rotVectToVect</span><span class="p">(</span><span class="n">absolute_vector</span><span class="p">,</span> <span class="n">vector</span><span class="p">)</span>
            <span class="n">pos</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ApplyMatrix</span><span class="p">(</span>
                <span class="p">[</span>
                    <span class="n">pos</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="n">matrice</span><span class="p">,</span>
            <span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">pos</span></div>

<div class="viewcode-block" id="Helper.randpoint_onsphere"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.randpoint_onsphere">[docs]</a>    <span class="k">def</span> <span class="nf">randpoint_onsphere</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">biased</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Generate a random point on the outside of a sphere.</span>

<span class="sd">        &gt;&gt;&gt; r = 2.0</span>
<span class="sd">        &gt;&gt;&gt; bias = 2.0</span>
<span class="sd">        &gt;&gt;&gt; point = helper.randpoint_onsphere(r)</span>
<span class="sd">        &gt;&gt;&gt; point2 = helper.randpoint_onsphere(r,bias)</span>

<span class="sd">        @type radius: float</span>
<span class="sd">        @param radius:  the radius of the sphere</span>
<span class="sd">        @type biased: float</span>
<span class="sd">        @param biased:  optional float vale to use instead of the random function</span>

<span class="sd">        @rtype: vector</span>
<span class="sd">        @return: a random 3d point on the sphere of the given radius</span>

<span class="sd">        -points (x,y,z) so that (x-a)^2 +(y-b)^2 + (z-c)^2 = R^2</span>

<span class="sd">        -To generate a random point on the sphere, it is necessary only</span>
<span class="sd">        to generate two random numbers, z between -R and R, phi between</span>
<span class="sd">        0 and 2 pi, each with a uniform distribution.</span>

<span class="sd">        To find the latitude (theta) of this point, note that z=R*sin(theta),</span>
<span class="sd">        so theta=sin-1(z/R); its longitude is (surprise!) phi.</span>

<span class="sd">        In rectilinear coordinates,</span>
<span class="sd">        tetha = asin-1(z/R)</span>
<span class="sd">        x=R*cos(theta)*cos(phi),</span>
<span class="sd">        y=R*cos(theta)*sin(phi),</span>
<span class="sd">        z=R*sin(theta)= (surprise!) z.</span>

<span class="sd">        -hemispher</span>
<span class="sd">        theta (0 &lt;= theta &lt; 360) and phi (0 &lt;= phi &lt;= pi/2)</span>
<span class="sd">        x = cos(sqrt(phi)) cos(theta)</span>
<span class="sd">        y = cos(sqrt(phi)) sin(theta)</span>
<span class="sd">        z = sin(sqrt(phi))</span>
<span class="sd">        A whole sphere is obtained by simply randomising the sign of z.</span>

<span class="sd">        -Azimuth axis is X axis. The elevation angle is measured as the angle</span>
<span class="sd">        between the Z-axis pointing upwards and the radius vector.</span>
<span class="sd">        From elementary spherical geometry:</span>
<span class="sd">        X coordinate=r*cos(pi/2-el)*cos(az)</span>
<span class="sd">        Y coordinate=r*cos(pi/2-el)*sin(az)</span>
<span class="sd">        Z Coordinate=r*sin(pi/2-el)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">biased</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="n">biased</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">biased</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># represent sin(phi)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">theta</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">u</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">u</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">u</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">]</span></div>

<div class="viewcode-block" id="Helper.transposeMatrix"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.transposeMatrix">[docs]</a>    <span class="k">def</span> <span class="nf">transposeMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrice</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">matrice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">matrice</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">matrice</span><span class="p">)</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">matrice</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ndarray</span><span class="p">):</span>
                <span class="n">mat</span> <span class="o">=</span> <span class="n">matrice</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
                <span class="k">return</span> <span class="n">mat</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">matrice</span>
        <span class="k">return</span> <span class="n">matrice</span></div>

<div class="viewcode-block" id="Helper.rotatePoint"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.rotatePoint">[docs]</a>    <span class="k">def</span> <span class="nf">rotatePoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt</span><span class="p">,</span> <span class="n">m</span><span class="p">,</span> <span class="n">ax</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rotate the point pt [x,y,z] around axe ax[0],ax[1],ax[2] by ax[3] radians,</span>
<span class="sd">        and translate by m [x,y,z].</span>

<span class="sd">        &gt;&gt;&gt; point = [1.0,2.0,0.0]</span>
<span class="sd">        &gt;&gt;&gt; trans = [5.0,0.0,0.0]</span>
<span class="sd">        &gt;&gt;&gt; axes = [1.0,0.0,0.0,math.pi]</span>
<span class="sd">        &gt;&gt;&gt; point = helper.rotatePoint(point,trans,axes)</span>
<span class="sd">        &gt;&gt;&gt; print point</span>
<span class="sd">        [6.0, -2.0, 2.4492935982947064e-16] #[6.0, -2.0, 0.0]</span>

<span class="sd">        @type pt: 3d vector</span>
<span class="sd">        @param pt:  the 3d point to be rotated</span>
<span class="sd">        @type m: 3d vector</span>
<span class="sd">        @param m:  translation to apply after rotation</span>
<span class="sd">        @type ax: 4d vector</span>
<span class="sd">        @param ax:  axe of rotation ax[0],ax[1],ax[2] and angle ax[3] radians</span>

<span class="sd">        @rtype: 3d vector</span>
<span class="sd">        @return: the transformed point</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">y</span> <span class="o">=</span> <span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">z</span> <span class="o">=</span> <span class="n">pt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">w</span> <span class="o">=</span> <span class="n">ax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">ux</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="n">x</span>
        <span class="n">uy</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="n">y</span>
        <span class="n">uz</span> <span class="o">=</span> <span class="n">u</span> <span class="o">*</span> <span class="n">z</span>
        <span class="n">vx</span> <span class="o">=</span> <span class="n">v</span> <span class="o">*</span> <span class="n">x</span>
        <span class="n">vy</span> <span class="o">=</span> <span class="n">v</span> <span class="o">*</span> <span class="n">y</span>
        <span class="n">vz</span> <span class="o">=</span> <span class="n">v</span> <span class="o">*</span> <span class="n">z</span>
        <span class="n">wx</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">x</span>
        <span class="n">wy</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">y</span>
        <span class="n">wz</span> <span class="o">=</span> <span class="n">w</span> <span class="o">*</span> <span class="n">z</span>
        <span class="n">sa</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">ca</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">ax</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">pt</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">u</span> <span class="o">*</span> <span class="p">(</span><span class="n">ux</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">+</span> <span class="n">wz</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="p">(</span><span class="n">v</span> <span class="o">*</span> <span class="n">v</span> <span class="o">+</span> <span class="n">w</span> <span class="o">*</span> <span class="n">w</span><span class="p">)</span> <span class="o">-</span> <span class="n">u</span> <span class="o">*</span> <span class="p">(</span><span class="n">vy</span> <span class="o">+</span> <span class="n">wz</span><span class="p">))</span> <span class="o">*</span> <span class="n">ca</span>
            <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="n">wy</span> <span class="o">+</span> <span class="n">vz</span><span class="p">)</span> <span class="o">*</span> <span class="n">sa</span>
        <span class="p">)</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">pt</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">v</span> <span class="o">*</span> <span class="p">(</span><span class="n">ux</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">+</span> <span class="n">wz</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">y</span> <span class="o">*</span> <span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="n">u</span> <span class="o">+</span> <span class="n">w</span> <span class="o">*</span> <span class="n">w</span><span class="p">)</span> <span class="o">-</span> <span class="n">v</span> <span class="o">*</span> <span class="p">(</span><span class="n">ux</span> <span class="o">+</span> <span class="n">wz</span><span class="p">))</span> <span class="o">*</span> <span class="n">ca</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">wx</span> <span class="o">-</span> <span class="n">uz</span><span class="p">)</span> <span class="o">*</span> <span class="n">sa</span>
        <span class="p">)</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">pt</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">w</span> <span class="o">*</span> <span class="p">(</span><span class="n">ux</span> <span class="o">+</span> <span class="n">vy</span> <span class="o">+</span> <span class="n">wz</span><span class="p">)</span>
            <span class="o">+</span> <span class="p">(</span><span class="n">z</span> <span class="o">*</span> <span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="n">u</span> <span class="o">+</span> <span class="n">v</span> <span class="o">*</span> <span class="n">v</span><span class="p">)</span> <span class="o">-</span> <span class="n">w</span> <span class="o">*</span> <span class="p">(</span><span class="n">ux</span> <span class="o">+</span> <span class="n">vy</span><span class="p">))</span> <span class="o">*</span> <span class="n">ca</span>
            <span class="o">+</span> <span class="p">(</span><span class="o">-</span><span class="n">vx</span> <span class="o">+</span> <span class="n">uy</span><span class="p">)</span> <span class="o">*</span> <span class="n">sa</span>
        <span class="p">)</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">pt</span></div>

<div class="viewcode-block" id="Helper.eulerToMatrix"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.eulerToMatrix">[docs]</a>    <span class="k">def</span> <span class="nf">eulerToMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">euler</span><span class="p">):</span>  <span class="c1"># double heading, double attitude, double bank</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Code from &#39;http://www.euclideanspace.com/maths/geometry/rotations/conversions/&#39;.</span>

<span class="sd">        This conversion uses NASA standard aeroplane conventions as described on page:</span>
<span class="sd">        &#39;http://www.euclideanspace.com/maths/geometry/rotations/euler/index.htm&#39;</span>

<span class="sd">        Coordinate System: right hand</span>

<span class="sd">        Positive angle: right hand</span>

<span class="sd">        Order of euler angles: heading first, then attitude, then bank</span>

<span class="sd">        matrix row column ordering:</span>

<span class="sd">        [m00 m01 m02]</span>

<span class="sd">        [m10 m11 m12]</span>

<span class="sd">        [m20 m21 m22]</span>

<span class="sd">        &gt;&gt;&gt; euler = [0.8,3.14,2.0]#radians</span>
<span class="sd">        &gt;&gt;&gt; emat = helper.eulerToMatrix(euler)</span>
<span class="sd">        &gt;&gt;&gt; print emat</span>
<span class="sd">        [[-0.69670582573323303, 0.65275180908484898, -0.29751650059422086, 0.0],</span>
<span class="sd">         [0.0015926529164868282, 0.41614630875957009, 0.90929627358879683, 0.0],</span>
<span class="sd">         [0.71735518109654839, 0.6330381706044601, -0.29097116474265428, 0.0],</span>
<span class="sd">         [0.0, 0.0, 0.0, 1.0]]</span>

<span class="sd">        @type euler:   3d array</span>
<span class="sd">        @param euler:  the euler angle to convert in matrice</span>

<span class="sd">        @rtype: 4x4array</span>
<span class="sd">        @return: the matrix computed from the euler angle</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Assuming the angles are in radians.</span>
        <span class="n">heading</span> <span class="o">=</span> <span class="n">euler</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">attitude</span> <span class="o">=</span> <span class="n">euler</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">bank</span> <span class="o">=</span> <span class="n">euler</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
        <span class="n">m</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
        <span class="p">]</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">heading</span><span class="p">)</span>
        <span class="n">sh</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">heading</span><span class="p">)</span>
        <span class="n">ca</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">attitude</span><span class="p">)</span>
        <span class="n">sa</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">attitude</span><span class="p">)</span>
        <span class="n">cb</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">bank</span><span class="p">)</span>
        <span class="n">sb</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">bank</span><span class="p">)</span>
        <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">ch</span> <span class="o">*</span> <span class="n">ca</span>
        <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">sh</span> <span class="o">*</span> <span class="n">sb</span> <span class="o">-</span> <span class="n">ch</span> <span class="o">*</span> <span class="n">sa</span> <span class="o">*</span> <span class="n">cb</span>
        <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">ch</span> <span class="o">*</span> <span class="n">sa</span> <span class="o">*</span> <span class="n">sb</span> <span class="o">+</span> <span class="n">sh</span> <span class="o">*</span> <span class="n">cb</span>
        <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">sa</span>
        <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">ca</span> <span class="o">*</span> <span class="n">cb</span>
        <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">ca</span> <span class="o">*</span> <span class="n">sb</span>
        <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">sh</span> <span class="o">*</span> <span class="n">ca</span>
        <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">sh</span> <span class="o">*</span> <span class="n">sa</span> <span class="o">*</span> <span class="n">cb</span> <span class="o">+</span> <span class="n">ch</span> <span class="o">*</span> <span class="n">sb</span>
        <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="o">-</span><span class="n">sh</span> <span class="o">*</span> <span class="n">sa</span> <span class="o">*</span> <span class="n">sb</span> <span class="o">+</span> <span class="n">ch</span> <span class="o">*</span> <span class="n">cb</span>
        <span class="k">return</span> <span class="n">m</span></div>

<div class="viewcode-block" id="Helper.getTubeProperties"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getTubeProperties">[docs]</a>    <span class="k">def</span> <span class="nf">getTubeProperties</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        From two point return the length, and the orientation from one to another.</span>
<span class="sd">        This function is used to build a cylinder from two points (see oneCylinder function)</span>

<span class="sd">        &gt;&gt;&gt; coord1 = [1.0,0.0,0.0]</span>
<span class="sd">        &gt;&gt;&gt; coord2 = [2.0,0.0,0.0]</span>
<span class="sd">        &gt;&gt;&gt; distance,rsz,rz,coord = helper.getTubeProperties(coord1,coord2)</span>
<span class="sd">        &gt;&gt;&gt; helper.setTransformation(obj,trans=coord,scale=[1., 1., distance],</span>
<span class="sd">                               rot=[0.,rz,rsz])</span>

<span class="sd">        @type  coord1: vector</span>
<span class="sd">        @param coord1: first point</span>
<span class="sd">        @type  coord2: vector</span>
<span class="sd">        @param coord2: second point</span>

<span class="sd">        @rtype:   tupple</span>
<span class="sd">        @return:  length, orientation (rotation XY,Z), and intermediate point OR</span>
<span class="sd">         length and matrix of transformation (see getTubePropertiesMatrix that use numpy)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">z1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord1</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">x2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">z2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord2</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">laenge</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span>
            <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y2</span><span class="p">)</span> <span class="o">+</span> <span class="p">(</span><span class="n">z1</span> <span class="o">-</span> <span class="n">z2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">z1</span> <span class="o">-</span> <span class="n">z2</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">wsz</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">atan2</span><span class="p">((</span><span class="n">y1</span> <span class="o">-</span> <span class="n">y2</span><span class="p">),</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x2</span><span class="p">))</span>
        <span class="n">wz</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">acos</span><span class="p">((</span><span class="n">z1</span> <span class="o">-</span> <span class="n">z2</span><span class="p">)</span> <span class="o">/</span> <span class="n">laenge</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">laenge</span><span class="p">,</span> <span class="n">wsz</span><span class="p">,</span> <span class="n">wz</span><span class="p">,</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">y1</span> <span class="o">+</span> <span class="n">y2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="n">z1</span> <span class="o">+</span> <span class="n">z2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">]</span></div>

<div class="viewcode-block" id="Helper.isSphere"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.isSphere">[docs]</a>    <span class="k">def</span> <span class="nf">isSphere</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
        <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMeshVertices</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">dmd</span> <span class="o">=</span> <span class="mi">10</span>
        <span class="n">r</span> <span class="o">=</span> <span class="mf">10.0</span>
        <span class="n">alld</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="c1"># dmd = numpy.average(alld - numpy.average(alld))</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">alld</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>
        <span class="n">dmd</span> <span class="o">=</span> <span class="n">r</span> <span class="o">-</span> <span class="n">numpy</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">alld</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">dmd</span> <span class="o">&lt;</span> <span class="mf">0.1</span><span class="p">:</span>
            <span class="n">obj</span><span class="p">[</span><span class="s2">&quot;radius&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">r</span>
            <span class="k">return</span> <span class="kc">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">False</span></div>

<div class="viewcode-block" id="Helper.update"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.update">[docs]</a>    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the host viewport, ui or gl draw</span>
<span class="sd">        This function can&#39;t be call in a thread.</span>

<span class="sd">        * overwrited by children class for each host</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.fit_view3D"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.fit_view3D">[docs]</a>    <span class="k">def</span> <span class="nf">fit_view3D</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function that should recenter the viewport to the object in the scene.</span>

<span class="sd">        * overwrited by children class for each host</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.checkName"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.checkName">[docs]</a>    <span class="k">def</span> <span class="nf">checkName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Check the provide name to avoid invalid caracter for the</span>
<span class="sd">        host. ie maya didnt support object name starting with number, and automatically rename the object.</span>
<span class="sd">        In order to retrieve the object use this functon. If a invalid</span>
<span class="sd">        caracter is found, the caracter is removed.</span>
<span class="sd">        This function can be change in the features, as it currently only look for number.</span>


<span class="sd">        &gt;&gt;&gt; name = &quot;1sphere&quot;</span>
<span class="sd">        &gt;&gt;&gt; sphere_obj,sphere_mesh = helper.Sphere(name)</span>
<span class="sd">        &gt;&gt;&gt; print (sphere_obj,sphere_mesh)#in maya</span>
<span class="sd">        (u&#39;sphere&#39;, u&#39;makeNurbSphere1&#39;)</span>
<span class="sd">        &gt;&gt;&gt; corrected_name  = helper.checkName(name)</span>
<span class="sd">        &gt;&gt;&gt; print (corrected_name)</span>
<span class="sd">        sphere</span>
<span class="sd">        &gt;&gt;&gt; sphere = helper.getObject(name)</span>
<span class="sd">        &gt;&gt;&gt; print (sphere)</span>
<span class="sd">        sphere</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the molecule.</span>
<span class="sd">        @rtype:   string</span>
<span class="sd">        @return:  corrected name of the molecule.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">invalid</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">):</span>
            <span class="n">invalid</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">name</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">invalid</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">return</span> <span class="n">name</span></div>

<div class="viewcode-block" id="Helper.getObject"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getObject">[docs]</a>    <span class="k">def</span> <span class="nf">getObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve an object from his name.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; oname = &quot;mysphere&quot;</span>
<span class="sd">        &gt;&gt;&gt; object= helper.getObject(oname)</span>
<span class="sd">        &gt;&gt;&gt; print oname,object#the result depnds on the host</span>
<span class="sd">        mysphere &lt;c4d.BaseObject object at 0x1e4fc4b0&gt; # Cinema4D</span>
<span class="sd">        mysphere    # Maya</span>


<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: request name of an host object</span>

<span class="sd">        @rtype:   hostObject</span>
<span class="sd">        @return:  the object with the requested name or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.getObjectName"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getObjectName">[docs]</a>    <span class="k">def</span> <span class="nf">getObjectName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">o</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the name of an host object.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; obj = helper.Sphere(&quot;mySphere&quot;)</span>
<span class="sd">        &gt;&gt;&gt; name = helper.getObjectName(obj)</span>
<span class="sd">        &gt;&gt;&gt; print (name)</span>
<span class="sd">        mySphere</span>

<span class="sd">        @type  o: hostObject</span>
<span class="sd">        @param o: an host object</span>
<span class="sd">        @rtype:   string</span>
<span class="sd">        @return:  the name of the host object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getCurrentScene"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getCurrentScene">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getCurrentScene</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current/active working document or scene.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; sc = helper.getCurrentScene()</span>
<span class="sd">        &gt;&gt;&gt; print (sc)</span>
<span class="sd">        None #in maya there is no scene concept</span>
<span class="sd">        &lt;bpy_strct, Scene(&quot;Scene&quot;)  #blender 2.6</span>
<span class="sd">        [Scene &quot;Scene&quot;]             #blender 2.49b</span>
<span class="sd">        &lt;c4d.documents.BaseDocument object at 0x246c01a0&gt;  #Cinema4D</span>

<span class="sd">        @rtype:   scene</span>
<span class="sd">        @return:  the active scene</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getCurrentSceneName"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getCurrentSceneName">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">getCurrentSceneName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current/active working document or scene name.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; scname = helper.getCurrentSceneName()</span>
<span class="sd">        &gt;&gt;&gt; print (scname)</span>
<span class="sd">        None        #maya</span>
<span class="sd">        Scene       #blender 2.6</span>
<span class="sd">        Scene       #blender 2.49b</span>
<span class="sd">        Untitled    #Cinema4D</span>

<span class="sd">        @rtype:   strng</span>
<span class="sd">        @return:  the active scene name</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getCurrentSelection"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getCurrentSelection">[docs]</a>    <span class="k">def</span> <span class="nf">getCurrentSelection</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current/active selected object in the document or scene.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; liste_objects = helper.getCurrentSelection()</span>
<span class="sd">        &gt;&gt;&gt; print (liste_objects)</span>
<span class="sd">        [&lt;c4d.BaseObject object at 0x1e4fd3a0&gt;, &lt;c4d.BaseObject object at 0x1e4fd3d0&gt;] #cinema4D</span>


<span class="sd">        @rtype:   liste</span>
<span class="sd">        @return:  the list of selected object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setCurrentSelection"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setCurrentSelection">[docs]</a>    <span class="k">def</span> <span class="nf">setCurrentSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current/active selected object in the document or scene.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; liste_objects = [helper.getObject(&quot;obj1&quot;),helper.getObject(&quot;obj2&quot;)]</span>
<span class="sd">        &gt;&gt;&gt; helper.setCurrentSelection(liste_objects)</span>

<span class="sd">        @type  obj: hostObject</span>
<span class="sd">        @param obj: the object to be selected</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getPosUntilRoot"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getPosUntilRoot">[docs]</a>    <span class="k">def</span> <span class="nf">getPosUntilRoot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Go through the hierarchy of the object until reaching the top level,</span>
<span class="sd">        increment the position to get the transformation due to parents.</span>
<span class="sd">        DEPRECATED</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object</span>


<span class="sd">        @rtype:   list</span>
<span class="sd">        @return:  the cumulative translation along the parenting hierarchy</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">stop</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="c1"># get the first parent</span>
        <span class="n">pos</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">while</span> <span class="ow">not</span> <span class="n">stop</span><span class="p">:</span>
            <span class="c1"># get the parent position, and add it to pos</span>
            <span class="c1"># get the parent of the previous parent</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">stop</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">return</span> <span class="n">pos</span></div>

<div class="viewcode-block" id="Helper.addObjectToScene"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addObjectToScene">[docs]</a>    <span class="k">def</span> <span class="nf">addObjectToScene</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">centerRoot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rePos</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Insert/add an object to the current document under the specified parent, and</span>
<span class="sd">        at the specified location. This function is used by all the basic object creation function.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  doc: hostScene</span>
<span class="sd">        @param doc: the scene where to insert the object</span>
<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object to insert</span>
<span class="sd">        @type  parent: hostObject</span>
<span class="sd">        @param parent: the parent of the object to insert under</span>
<span class="sd">        @type  centerRoot: boolean</span>
<span class="sd">        @param centerRoot: if the object have to be recentered according the top-level</span>
<span class="sd">        @type  rePos: list</span>
<span class="sd">        @param rePos: the location of the object in the scene</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get the object name</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="c1"># if the object is not already in the scene</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObject</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">parent</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span><span class="p">:</span>
                    <span class="n">parent</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObject</span><span class="p">(</span><span class="n">parent</span><span class="p">)</span>
                <span class="c1"># if parent exist, insert the object under it</span>
                <span class="k">pass</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># insert the object</span>
                <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.AddObject"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.AddObject">[docs]</a>    <span class="k">def</span> <span class="nf">AddObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">centerRoot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">rePos</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Insert/add an object to the current document under the specified parent, and</span>
<span class="sd">        at the specified location. This function is an alias for addObjectToScene to</span>
<span class="sd">        permit to some script to work either in dejavu and the host.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object to insert</span>
<span class="sd">        @type  parent: hostObject</span>
<span class="sd">        @param parent: the parent of the object to insert under</span>
<span class="sd">        @type  centerRoot: boolean</span>
<span class="sd">        @param centerRoot: if the object have to be recentered according the top-level</span>
<span class="sd">        @type  rePos: list</span>
<span class="sd">        @param rePos: the location of the object in the scene</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">doc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getCurrentScene</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addObjectToScene</span><span class="p">(</span>
            <span class="n">doc</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">,</span> <span class="n">centerRoot</span><span class="o">=</span><span class="n">centerRoot</span><span class="p">,</span> <span class="n">rePos</span><span class="o">=</span><span class="n">rePos</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Helper.ObjectsSelection"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.ObjectsSelection">[docs]</a>    <span class="k">def</span> <span class="nf">ObjectsSelection</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listeObjects</span><span class="p">,</span> <span class="n">typeSel</span><span class="o">=</span><span class="s2">&quot;new&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Modify the current object selection. Redundant with setCurrentSelection.</span>

<span class="sd">        This function make the distinction between adding (typeSel=&quot;add&quot;) object to the selection and creating</span>
<span class="sd">        a new selection (typeSel=&quot;new&quot;)</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  listeObjects: list</span>
<span class="sd">        @param listeObjects: list of object to joins</span>
<span class="sd">        @type  typeSel: string</span>
<span class="sd">        @param listeObjects: type of modification: new,add,...</span>

<span class="sd">        &quot;&quot;&quot;</span></div>
        <span class="c1"># Put here the code to add/set an object to the current selection</span>

<div class="viewcode-block" id="Helper.JoinsObjects"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.JoinsObjects">[docs]</a>    <span class="k">def</span> <span class="nf">JoinsObjects</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listeObjects</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Merge the given liste of object in one unique geometry.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  listeObjects: list</span>
<span class="sd">        @param listeObjects: list of object to joins</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="Helper.addCameraToScene"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addCameraToScene">[docs]</a>    <span class="k">def</span> <span class="nf">addCameraToScene</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">focal</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">scene</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a camera object to the scene</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; sc = helper.getCurrentScene()</span>
<span class="sd">        &gt;&gt;&gt; center=[0.,-12.,40.]</span>
<span class="sd">        &gt;&gt;&gt; cam = helper.addCameraToScene(&quot;cam1&quot;,&quot;persp&quot;,30.,center,sc)</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the camera</span>
<span class="sd">        @type  Type: cameraType</span>
<span class="sd">        @param Type: perspective, orthogonale etc...</span>
<span class="sd">        @type  focal: float</span>
<span class="sd">        @param focal: the focal of the camera</span>
<span class="sd">        @type  center: list</span>
<span class="sd">        @param center: the position of the camera</span>
<span class="sd">        @type  scene: host scene</span>
<span class="sd">        @param scene: the scene</span>
<span class="sd">        #we  add a **kw for futur arguments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.addLampToScene"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addLampToScene">[docs]</a>    <span class="k">def</span> <span class="nf">addLampToScene</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">Type</span><span class="o">=</span><span class="s2">&quot;Area&quot;</span><span class="p">,</span>
        <span class="n">rgb</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
        <span class="n">dist</span><span class="o">=</span><span class="mf">25.0</span><span class="p">,</span>
        <span class="n">energy</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">soft</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">shadow</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="n">scene</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a light to the scene</span>

<span class="sd">        * overwrited by children class for each host</span>


<span class="sd">        &gt;&gt;&gt; sc = helper.getCurrentScene()</span>
<span class="sd">        &gt;&gt;&gt; center=[0.,-12.,40.]</span>
<span class="sd">        &gt;&gt;&gt; color = [1.,1.,1.]</span>
<span class="sd">        &gt;&gt;&gt; light = helper.addLampToScene(&quot;light1&quot;,&quot;Sun&quot;,color,20.,1.0,1.0,True,center,sc)</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the instance</span>
<span class="sd">        @type  Type: light hostType/int etc..</span>
<span class="sd">        @param Type: the light type : spot,sun,omni,etc..</span>
<span class="sd">        @type  rgb: list of int 0-255</span>
<span class="sd">        @param rgb: color of the light in rgb</span>
<span class="sd">        @type  dist: float</span>
<span class="sd">        @param dist: light distance of attenuation</span>
<span class="sd">        @type  energy: float</span>
<span class="sd">        @param energy: intensity of the light</span>
<span class="sd">        @type  soft: bool</span>
<span class="sd">        @param soft: soft light</span>
<span class="sd">        @type  shadow: boolean</span>
<span class="sd">        @param shadow: does the light produce shadow</span>
<span class="sd">        @type  scene: host scene</span>
<span class="sd">        @param scene: the scene</span>
<span class="sd">        #we  add a **kw for futur arguments</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lamp</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1"># c4d.BaseObject(LIGHT)</span>
        <span class="c1"># lamp name (name)</span>
        <span class="c1"># lamp position (center)</span>
        <span class="c1"># lamp color (float(rgb[0]), float(rgb[1]), float(rgb[2]))#color</span>
        <span class="c1"># lamp energy  float(energy) #intensity</span>
        <span class="c1"># lamp type dicType[Type] #type</span>
        <span class="k">if</span> <span class="n">shadow</span><span class="p">:</span>
            <span class="c1"># lampe shadow</span>
            <span class="k">pass</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addObjectToScene</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">lamp</span><span class="p">,</span> <span class="n">centerRoot</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.newEmpty"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.newEmpty">[docs]</a>    <span class="k">def</span> <span class="nf">newEmpty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parentCenter</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new Null/Empty Object</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; empty = helper.newEmpty(&quot;null1&quot;,location=[10.0,0.0,0.0])</span>
<span class="sd">        &gt;&gt;&gt; empty_child = helper.newEmpty(&quot;null2&quot;,location=[15.0,0.0,0.0],parent = empty)</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the empty</span>
<span class="sd">        @type  location: list</span>
<span class="sd">        @param location: position of the null object</span>
<span class="sd">        @type  parentCenter: list</span>
<span class="sd">        @param parentCenter: position of the parent object DEPRECATED</span>

<span class="sd">        @type kw: dictionary</span>
<span class="sd">        @param kw: you can add your own keyword, but it should be interpreted by all host</span>
<span class="sd">            -&quot;parent&quot;</span>
<span class="sd">        @rtype:   hostObject</span>
<span class="sd">        @return:  the null object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">empty</span> <span class="o">=</span> <span class="kc">None</span>  <span class="c1">#</span>
        <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">parentCenter</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">location</span> <span class="o">=</span> <span class="n">location</span> <span class="o">-</span> <span class="n">parentCenter</span>
            <span class="c1"># set the position of the object to location</span>
        <span class="k">return</span> <span class="n">empty</span></div>

<div class="viewcode-block" id="Helper.newInstance"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.newInstance">[docs]</a>    <span class="k">def</span> <span class="nf">newInstance</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hostmatrice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">matrice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a new Instance from another Object</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; sph = helper.Sphere(&quot;sph1&quot;)</span>
<span class="sd">        &gt;&gt;&gt; instance_sph = helper.newInstance(&quot;isph1&quot;,sph,location = [10.0,0.0,0.0])</span>


<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the instance</span>
<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object to inherit from</span>
<span class="sd">        @type  location: list/Vector</span>
<span class="sd">        @param location: position of the null object</span>
<span class="sd">        @type  hostmatrice: list/Matrix</span>
<span class="sd">        @param hostmatrice: transformation matrix in host format</span>
<span class="sd">        @type  matrice: list/Matrix</span>
<span class="sd">        @param matrice: transformation matrix in epmv/numpy format</span>
<span class="sd">        @type kw: dictionary</span>
<span class="sd">        @param kw: you can add your own keyword, but it should be interpreted by all host</span>
<span class="sd">            -&quot;parent&quot;</span>
<span class="sd">            -&quot;material&quot;</span>
<span class="sd">        @rtype:   hostObject</span>
<span class="sd">        @return:  the instance object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># instance = None#</span>
        <span class="c1"># instance parent = object</span>
        <span class="c1"># instance name = name</span>
        <span class="k">if</span> <span class="n">location</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># set the position of instance with location</span>
            <span class="k">pass</span>
        <span class="c1"># set the instance matrice</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectMatrix</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">matrice</span><span class="o">=</span><span class="n">matrice</span><span class="p">,</span> <span class="n">hostmatrice</span><span class="o">=</span><span class="n">hostmatrice</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.getMasterInstance"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getMasterInstance">[docs]</a>    <span class="k">def</span> <span class="nf">getMasterInstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the object use for the instanciation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">instance</span></div>

<div class="viewcode-block" id="Helper.updateMasterInstance"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.updateMasterInstance">[docs]</a>    <span class="k">def</span> <span class="nf">updateMasterInstance</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">instance</span><span class="p">,</span> <span class="n">objects</span><span class="p">,</span> <span class="n">add</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">hide</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the reference of the passed instance by adding/removing-hiding objects</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; sph = helper.Sphere(&quot;sph1&quot;)</span>
<span class="sd">        &gt;&gt;&gt; instance_sph = helper.newInstance(&quot;isph1&quot;,sph,location = [10.0,0.0,0.0])</span>


<span class="sd">        @type  instance: string/hostObj</span>
<span class="sd">        @param instance: name of the instance</span>
<span class="sd">        @type  objects: list hostObject/string</span>
<span class="sd">        @param objects: the list of object to remove/add to the instance reference</span>
<span class="sd">        @type  add: bool</span>
<span class="sd">        @param add: if True add the objec else remove</span>
<span class="sd">        @type  hide: bool</span>
<span class="sd">        @param hide: hide instead of remove</span>
<span class="sd">        @type kw: dictionary</span>
<span class="sd">        @param kw: you can add your own keyword, but it should be interpreted by all host</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.toggleDisplay"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.toggleDisplay">[docs]</a>    <span class="k">def</span> <span class="nf">toggleDisplay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">display</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggle on/off the display/visibility/rendermode of an hostObject in the host viewport.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; helper.toggleDisplay(&quot;polygone1&quot;,True)</span>
<span class="sd">        &gt;&gt;&gt; obj = helper.getObject(&quot;polygone1&quot;)</span>
<span class="sd">        &gt;&gt;&gt; helper.toggleDisplay(obj,False)</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object</span>
<span class="sd">        @type  display: boolean</span>
<span class="sd">        @param display: if the object is displayed</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="Helper.toggleXray"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.toggleXray">[docs]</a>    <span class="k">def</span> <span class="nf">toggleXray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">xray</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Toggle on/off the Xray visibility of an hostObject in the host viewport. Currently not supported in Maya</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; helper.toggleXray(&quot;polygone1&quot;,True)</span>
<span class="sd">        &gt;&gt;&gt; obj = helper.getObject(&quot;polygone1&quot;)</span>
<span class="sd">        &gt;&gt;&gt; helper.toggleXray(obj,False)</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object</span>
<span class="sd">        @type  xray: boolean</span>
<span class="sd">        @param xray: if the object is Xray displayed</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;not supported yet in &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.getVisibility"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getVisibility">[docs]</a>    <span class="k">def</span> <span class="nf">getVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">editor</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">render</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">active</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        return the editor/renedring/active visibility state of the given object</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: hostObject</span>
<span class="sd">        @param obj: the object</span>
<span class="sd">        @type  editor: boolean</span>
<span class="sd">        @param editor: request editor visibility</span>
<span class="sd">        @type  render: boolean</span>
<span class="sd">        @param render: request rendering visibility</span>
<span class="sd">        @type  active: boolean</span>
<span class="sd">        @param active: request active states ie C4D</span>

<span class="sd">        @rtype:   bool/array of bool</span>
<span class="sd">        @return:  the current visibility state of the object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setViewport"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setViewport">[docs]</a>    <span class="k">def</span> <span class="nf">setViewport</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        set the property of the viewport</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: the list of parameter and their value to change</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;setViewport helper class&quot;</span><span class="p">)</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.toggleEditMode"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.toggleEditMode">[docs]</a>    <span class="k">def</span> <span class="nf">toggleEditMode</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Turn off edit mode (if any)</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.restoreEditMode"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.restoreEditMode">[docs]</a>    <span class="k">def</span> <span class="nf">restoreEditMode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">editmode</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Restor any edit mode (if any)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setObjectMatrix"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setObjectMatrix">[docs]</a>    <span class="k">def</span> <span class="nf">setObjectMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">matrice</span><span class="p">,</span> <span class="n">hostmatrice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">absolue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set a matrix to an hostObject</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object who receive the transformation</span>
<span class="sd">        @type  hostmatrice: list/Matrix</span>
<span class="sd">        @param hostmatrice: transformation matrix in host format</span>
<span class="sd">        @type  matrice: list/Matrix</span>
<span class="sd">        @param matrice: transformation matrix in epmv/numpy format</span>
<span class="sd">        @type  absolue: Boolean</span>
<span class="sd">        @param absolue: absolute or local transformation</span>
<span class="sd">        @type kw: dictionary</span>
<span class="sd">        @param kw: you can add your own keyword, but it should be interpreted by all host</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">hostmatrice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># set the instance matrice</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="n">matrice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># convert the matrice in host format</span>
            <span class="c1"># set the instance matrice</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.concatObjectMatrix"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.concatObjectMatrix">[docs]</a>    <span class="k">def</span> <span class="nf">concatObjectMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">matrice</span><span class="p">,</span> <span class="n">hostmatrice</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply a matrix to an hostObject</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object who receive the transformation</span>
<span class="sd">        @type  hostmatrice: list/Matrix</span>
<span class="sd">        @param hostmatrice: transformation matrix in host format</span>
<span class="sd">        @type  matrice: list/Matrix</span>
<span class="sd">        @param matrice: transformation matrix in epmv/numpy format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get current transformation</span>
        <span class="k">if</span> <span class="n">hostmatrice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># compute the new matrix: matrice*current</span>
            <span class="c1"># set the new matrice</span>
            <span class="k">pass</span>
        <span class="k">if</span> <span class="n">matrice</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># convert the matrice in host format</span>
            <span class="c1"># compute the new matrix: matrice*current</span>
            <span class="c1"># set the new matrice</span>
            <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.translateObj"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.translateObj">[docs]</a>    <span class="k">def</span> <span class="nf">translateObj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="n">use_parent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">absolue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Global Translation : Move the object to the vector position</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object</span>
<span class="sd">        @type  position: liste/array</span>
<span class="sd">        @param position: the new object position px,py,pz</span>
<span class="sd">        @type  use_parent: boolean</span>
<span class="sd">        @param use_parent: if the parent position is used</span>
<span class="sd">        @type  absolue: Boolean</span>
<span class="sd">        @param absolue: absolute or local transformation</span>
<span class="sd">        @type kw: dictionary</span>
<span class="sd">        @param kw: you can add your own keyword, but it should be interpreted by all host</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.scaleObj"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.scaleObj">[docs]</a>    <span class="k">def</span> <span class="nf">scaleObj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">absolue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Global Scale : scale the object by the vector scale</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object</span>
<span class="sd">        @type  absolue: Boolean</span>
<span class="sd">        @param absolue: absolute or local transformation</span>
<span class="sd">        @type kw: dictionary</span>
<span class="sd">        @param kw: you can add your own keyword, but it should be interpreted by all host</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.rotateObj"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.rotateObj">[docs]</a>    <span class="k">def</span> <span class="nf">rotateObj</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">rotation</span><span class="p">,</span> <span class="n">absolue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Global Rotation : Rotate the object</span>
<span class="sd">        This method take a 3d array [rotation_X,rotatio_Y,rotation_Z]</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object</span>
<span class="sd">        @type  rotation: liste/array - matrice</span>
<span class="sd">        @param rotation: the new object rotation</span>
<span class="sd">        @type  absolue: Boolean</span>
<span class="sd">        @param absolue: absolute or local transformation</span>
<span class="sd">        @type kw: dictionary</span>
<span class="sd">        @param kw: you can add your own keyword, but it should be interpreted by all host</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setTranslation"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setTranslation">[docs]</a>    <span class="k">def</span> <span class="nf">setTranslation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">absolue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current position (translation)  of the  given object in absolute or local world</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: hostObject</span>
<span class="sd">        @param name: the object name</span>
<span class="sd">        @type  pos: list&lt;float&gt;</span>
<span class="sd">        @param pos: the new position</span>
<span class="sd">        @type  absolue: Boolean</span>
<span class="sd">        @param absolue: absolute or local transformation</span>
<span class="sd">        @type kw: dictionary</span>
<span class="sd">        @param kw: you can add your own keyword, but it should be interpreted by all host</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getTranslation"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getTranslation">[docs]</a>    <span class="k">def</span> <span class="nf">getTranslation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">absolue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current position (translation)  of the  given object in absolute or local world</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: hostObject</span>
<span class="sd">        @param name: the object name</span>
<span class="sd">        @type  absolue: Boolean</span>
<span class="sd">        @param absolue: absolute or local transformation</span>
<span class="sd">        @type kw: dictionary</span>
<span class="sd">        @param kw: you can add your own keyword, but it should be interpreted by all host</span>


<span class="sd">        @rtype:   3d vector/list</span>
<span class="sd">        @return:  the position</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Helper.getSize"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getSize">[docs]</a>    <span class="k">def</span> <span class="nf">getSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current size in x, y and z of the  given object if applcable</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: hostObject</span>
<span class="sd">        @param name: the object name</span>

<span class="sd">        @rtype:   3d vector/list</span>
<span class="sd">        @return:  the size in x y and z</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Helper.getScale"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getScale">[docs]</a>    <span class="k">def</span> <span class="nf">getScale</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">absolue</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current scale of the  given object in absolute or local world</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: hostObject</span>
<span class="sd">        @param name: the object name</span>
<span class="sd">        @type  absolue: Boolean</span>
<span class="sd">        @param absolue: absolute or local transformation</span>

<span class="sd">        @rtype:   3d vector/list</span>
<span class="sd">        @return:  the scale</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Helper.resetTransformation"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.resetTransformation">[docs]</a>    <span class="k">def</span> <span class="nf">resetTransformation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        ReSet the transformation of a given Object to identity</span>

<span class="sd">        * can be overwriten by children class for each host</span>

<span class="sd">        @type  object: string or Object</span>
<span class="sd">        @param object: the object who receive the identity transformation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectMatrix</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.setTransformation"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setTransformation">[docs]</a>    <span class="k">def</span> <span class="nf">setTransformation</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">mat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">trans</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="s2">&quot;str&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the transformatio of a given Object</span>

<span class="sd">        * can be overwriten by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: the object who receive the transformation</span>
<span class="sd">        @type  mat: list/Matrix</span>
<span class="sd">        @param mat: transformation matrix</span>
<span class="sd">        @type  rot: list</span>
<span class="sd">        @param rot: rotation along [X,Y,Z]</span>
<span class="sd">        @type  scale: list</span>
<span class="sd">        @param scale: scale along [X,Y,Z]</span>
<span class="sd">        @type  trans: list</span>
<span class="sd">        @param trans: translation along [X,Y,Z]</span>
<span class="sd">        @type  order: string</span>
<span class="sd">        @param order: order of transformation</span>
<span class="sd">        @type  kw: Dictionary</span>
<span class="sd">        @param kw: additional arguemts</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObject</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">absolue</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="s2">&quot;abs&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">absolue</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;abs&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">mat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">setObjectMatrix</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="n">absolue</span><span class="o">=</span><span class="n">absolue</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rot</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">rotateObj</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">rot</span><span class="p">,</span> <span class="n">absolue</span><span class="o">=</span><span class="n">absolue</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">scaleObj</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">scale</span><span class="p">,</span> <span class="n">absolue</span><span class="o">=</span><span class="n">absolue</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trans</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">translateObj</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">trans</span><span class="p">,</span> <span class="n">absolue</span><span class="o">=</span><span class="n">absolue</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.updateTubeObjs"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.updateTubeObjs">[docs]</a>    <span class="k">def</span> <span class="nf">updateTubeObjs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">listeObj</span><span class="p">,</span> <span class="n">listePts</span><span class="p">,</span> <span class="n">listeInd</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will update a liste of Tupe according the given liste of new points.</span>
<span class="sd">        One Tube is define by two 3d points.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">listeInd</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">updateTubeObj</span><span class="p">(</span><span class="n">listeObj</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">listePts</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">listePts</span><span class="p">[</span><span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">listeObj</span><span class="p">))),</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">listePts</span><span class="p">))))</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">updateTubeObj</span><span class="p">(</span>
                    <span class="n">listeObj</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">listePts</span><span class="p">[</span><span class="n">listeInd</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]],</span> <span class="n">listePts</span><span class="p">[</span><span class="n">listeInd</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]]</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">listeObj</span><span class="p">))</span>
            <span class="p">]</span></div>

<div class="viewcode-block" id="Helper.convertColor"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.convertColor">[docs]</a>    <span class="k">def</span> <span class="nf">convertColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">col</span><span class="p">,</span> <span class="n">toint</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function will convert a color array [r,g,b] from range 1-255</span>
<span class="sd">        to range 0.-1 (vice/versa)</span>

<span class="sd">        @type  col: array</span>
<span class="sd">        @param col: the color [r,g,b]</span>
<span class="sd">        @type  toint: boolean</span>
<span class="sd">        @param toint: way of the convertion, if true convert to 1-255, if false</span>
<span class="sd">        convert to range 0-1</span>

<span class="sd">        @rtype:   array</span>
<span class="sd">        @return:  the converted color [0-1.,0-1.,0-1.] or [1-255,1-255,1-255]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># its seems that pymol color for instance are in range 0. 1.00001 ?</span>
        <span class="k">if</span> <span class="n">toint</span> <span class="ow">and</span> <span class="nb">max</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">1.00001</span><span class="p">:</span>
            <span class="n">col</span> <span class="o">=</span> <span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">x</span> <span class="o">*</span> <span class="mi">255</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">col</span><span class="p">]</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">toint</span> <span class="ow">and</span> <span class="nb">max</span><span class="p">(</span><span class="n">col</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mf">1.00001</span><span class="p">:</span>
            <span class="n">col</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="o">/</span> <span class="mf">255.0</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">col</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">col</span></div>

<div class="viewcode-block" id="Helper.addMaterialFromDic"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addMaterialFromDic">[docs]</a>    <span class="k">def</span> <span class="nf">addMaterialFromDic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">dic</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add material to the current scene given a dictionary {&quot;name&quot;:[r,b,g]}</span>


<span class="sd">        &gt;&gt;&gt; matDic={&quot;mat1&quot;:[0,0,0],&quot;mat2&quot;:[1,1,1]}</span>
<span class="sd">        &gt;&gt;&gt; helper.addMaterialFromDic(matDic)</span>

<span class="sd">        @type  dic: Dictionary</span>
<span class="sd">        @param dic: the name:color dictionary for creating materials</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># dic: Name:Color</span>
        <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">addMaterial</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">dic</span><span class="p">[</span><span class="n">x</span><span class="p">])</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="n">dic</span><span class="o">.</span><span class="n">keys</span><span class="p">())]</span></div>

<div class="viewcode-block" id="Helper.createColorsMat"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.createColorsMat">[docs]</a>    <span class="k">def</span> <span class="nf">createColorsMat</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a Material for all defined colors in upy.colors</span>

<span class="sd">        @rtype:   list</span>
<span class="sd">        @return:  the list of the new colors material</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">Mat</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">cnames</span><span class="p">:</span>
            <span class="n">Mat</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">addMaterial</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;colors.&quot;</span> <span class="o">+</span> <span class="n">col</span><span class="p">)))</span>
        <span class="k">return</span> <span class="n">Mat</span></div>

<div class="viewcode-block" id="Helper.retrieveColorMat"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.retrieveColorMat">[docs]</a>    <span class="k">def</span> <span class="nf">retrieveColorMat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Retrieve a material in the current document from his color (r,g,b), if his</span>
<span class="sd">        color is defined in upy.colors</span>

<span class="sd">        @type  color: array</span>
<span class="sd">        @param color: the material color (r,g,b)</span>

<span class="sd">        @rtype:   hostMaterial</span>
<span class="sd">        @return:  the material of color color</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">color</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMaterial</span><span class="p">(</span><span class="n">color</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mat</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">list</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">tuple</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">mat</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">list</span> <span class="ow">and</span> <span class="nb">type</span><span class="p">(</span><span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">!=</span> <span class="nb">tuple</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="o">==</span> <span class="nb">str</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="o">==</span> <span class="n">unicode</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">cnames</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">mat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">addMaterial</span><span class="p">(</span><span class="n">color</span><span class="p">,</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;colors.&quot;</span> <span class="o">+</span> <span class="n">color</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">mat</span>
        <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">colors</span><span class="o">.</span><span class="n">cnames</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="o">==</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;colors.&quot;</span> <span class="o">+</span> <span class="n">col</span><span class="p">):</span>
                <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMaterial</span><span class="p">(</span><span class="n">col</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">mat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">addMaterial</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="nb">eval</span><span class="p">(</span><span class="s2">&quot;colors.&quot;</span> <span class="o">+</span> <span class="n">col</span><span class="p">))</span>
        <span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;customMat&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">addMaterial</span><span class="p">(</span><span class="n">name</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">),</span> <span class="n">color</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.addMaterial"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addMaterial">[docs]</a>    <span class="k">def</span> <span class="nf">addMaterial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a material in the current document</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: the material name</span>
<span class="sd">        @type  color: array</span>
<span class="sd">        @param color: the material color (r,g,b)</span>

<span class="sd">        @rtype:   hostMaterial</span>
<span class="sd">        @return:  the new material</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.createMaterial"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.createMaterial">[docs]</a>    <span class="k">def</span> <span class="nf">createMaterial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;Phong&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="c1"># type can be lamber phong etc... need a dictionry</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">addMaterial</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">type</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.assignMaterial"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.assignMaterial">[docs]</a>    <span class="k">def</span> <span class="nf">assignMaterial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">matname</span><span class="p">,</span> <span class="n">texture</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Assign the provided material to the object</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: hostApp object</span>
<span class="sd">        @param object: the object</span>
<span class="sd">        @type  matname: string</span>
<span class="sd">        @param matname: the material name</span>
<span class="sd">        @type  texture: Boolean</span>
<span class="sd">        @param texture: is the material use a textue</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: additional keywords options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># verify if the mat exist, if the string.</span>
        <span class="c1"># apply it to the object</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.assignNewMaterial"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.assignNewMaterial">[docs]</a>    <span class="k">def</span> <span class="nf">assignNewMaterial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matname</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createMaterial</span><span class="p">(</span><span class="n">matname</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="nb">type</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">assignMaterial</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">mat</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.colorMaterial"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.colorMaterial">[docs]</a>    <span class="k">def</span> <span class="nf">colorMaterial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="n">col</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Color a given material using the given color (r,g,b).</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  mat: hostMaterial</span>
<span class="sd">        @param mat: the material to change</span>
<span class="sd">        @type  col: array</span>
<span class="sd">        @param col: the color (r,g,b)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># put your code here</span>
        <span class="c1"># get the materiel if mat is a string for instance</span>
        <span class="c1"># or verify if the material exist in the current document</span>
        <span class="c1"># then change his color channel using &#39;col&#39;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getMaterial"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getMaterial">[docs]</a>    <span class="k">def</span> <span class="nf">getMaterial</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the maerial of the given name.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: the name of the desired material</span>

<span class="sd">        @rtype:   hostMaterial</span>
<span class="sd">        @return:  the new material</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getAllMaterials"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getAllMaterials">[docs]</a>    <span class="k">def</span> <span class="nf">getAllMaterials</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get all the maerials of the current scene.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @rtype:   list</span>
<span class="sd">        @return:  the list of all materials available</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="Helper.changeMaterialProperty"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.changeMaterialProperty">[docs]</a>    <span class="k">def</span> <span class="nf">changeMaterialProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">material</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change a material properties.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  material: string/Material</span>
<span class="sd">        @param material: the material to modify</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: propertie to modify with new value</span>
<span class="sd">            - color</span>
<span class="sd">            - specular</span>
<span class="sd">            - ...</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMaterial</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span></div>

<div class="viewcode-block" id="Helper.getMaterialProperty"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getMaterialProperty">[docs]</a>    <span class="k">def</span> <span class="nf">getMaterialProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">material</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get a material properties.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  material: string/Material</span>
<span class="sd">        @param material: the material to modify</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: propertie to modify with new value</span>
<span class="sd">            - color</span>
<span class="sd">            - specular</span>
<span class="sd">            - ...</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMaterial</span><span class="p">(</span><span class="n">material</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">mat</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span></div>

<div class="viewcode-block" id="Helper.colorObject"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.colorObject">[docs]</a>    <span class="k">def</span> <span class="nf">colorObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply the given color to the given object,</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: string or hostObject</span>
<span class="sd">        @param obj: the object to be colored</span>
<span class="sd">        @type  color: list</span>
<span class="sd">        @param color: the color to apply [r,g,b]</span>
<span class="sd">        @type  options: Dictionary</span>
<span class="sd">        @param options: additional keyword options :</span>
<span class="sd">            useMaterial : crete a materal with the given color and assign it to the object</span>
<span class="sd">            useObjectColors : change the color propertie of the object (Viewport)</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="Helper.changeColor"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.changeColor">[docs]</a>    <span class="k">def</span> <span class="nf">changeColor</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">obj</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">,</span>
        <span class="n">perVertex</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">proxyObject</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">pb</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">facesSelection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">faceMaterial</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply the given set of color to the given object,</span>
<span class="sd">        if the object is a mesh this function handle the color per vertex.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: string or hostObject</span>
<span class="sd">        @param obj: the object to be colored</span>
<span class="sd">        @type  colors: list</span>
<span class="sd">        @param colors: the list of colors to apply [[r,g,b],[r,g,b],...]</span>
<span class="sd">        @type  perVertex: Boolean</span>
<span class="sd">        @param perVertex: is it color per Vertex</span>
<span class="sd">        @type  proxyObject: Boolean</span>
<span class="sd">        @param proxyObject: special keyword for Cinema4D which doesnt support vertex color</span>
<span class="sd">        @type  doc: Scene</span>
<span class="sd">        @param doc: the current working documents</span>
<span class="sd">        @type  pb: Boolean</span>
<span class="sd">        @param pb: use the progress bar</span>
<span class="sd">        @type  facesSelection: liste</span>
<span class="sd">        @param facesSelection: only assign color to the given face selecion</span>
<span class="sd">        @type  faceMaterial: Boolean</span>
<span class="sd">        @param faceMaterial: assign color per Face</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.changeObjColorMat"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.changeObjColorMat">[docs]</a>    <span class="k">def</span> <span class="nf">changeObjColorMat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the diffuse color of the object material.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: string or hostObject</span>
<span class="sd">        @param obj: the object forwhich we want to change e material color</span>
<span class="sd">        @type  color: list</span>
<span class="sd">        @param color: the new color to apply [r,g,b]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getMesh"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getMesh">[docs]</a>    <span class="k">def</span> <span class="nf">getMesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the mesh of given name</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: the name of the deired mesh</span>

<span class="sd">        @rtype:   hostMesh</span>
<span class="sd">        @return:  the mesh</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">name</span></div>

<div class="viewcode-block" id="Helper.getLayers"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getLayers">[docs]</a>    <span class="k">def</span> <span class="nf">getLayers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scn</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a list of active layers of a scene or an object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[]</span></div>

<div class="viewcode-block" id="Helper.setLayers"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setLayers">[docs]</a>    <span class="k">def</span> <span class="nf">setLayers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">scn</span><span class="p">,</span> <span class="n">layers</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the layers of a scene or an object, expects a list of integers</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="Helper.checkIsMesh"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.checkIsMesh">[docs]</a>    <span class="k">def</span> <span class="nf">checkIsMesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verify that name correspond to a valid mesh.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: the name of the deired mesh</span>

<span class="sd">        @rtype:   hostMesh</span>
<span class="sd">        @return:  the mesh</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">name</span></div>

<div class="viewcode-block" id="Helper.getName"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getName">[docs]</a>    <span class="k">def</span> <span class="nf">getName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the name of an host object. Redundant with getObjecName</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; obj = helper.Sphere(&quot;mySphere&quot;)</span>
<span class="sd">        &gt;&gt;&gt; name = helper.getObjectName(obj)</span>
<span class="sd">        &gt;&gt;&gt; print (name)</span>
<span class="sd">        mySphere</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: an host object</span>
<span class="sd">        @rtype:   string</span>
<span class="sd">        @return:  the name of the host object</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="Helper.setName"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setName">[docs]</a>    <span class="k">def</span> <span class="nf">setName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the name of an host object. Redundant with getObjecName</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &gt;&gt;&gt; obj = helper.Sphere(&quot;mySphere&quot;)</span>
<span class="sd">        &gt;&gt;&gt; name = &quot;mySpinningsphere&quot;</span>
<span class="sd">        &gt;&gt;&gt; helper.setName(obj,name)</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: an host object</span>
<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: the new name</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="Helper.reParent"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.reParent">[docs]</a>    <span class="k">def</span> <span class="nf">reParent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">objs</span><span class="p">,</span> <span class="n">parent</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Change the object parent using the specified parent objects</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  objs: hostObject</span>
<span class="sd">        @param objs: the object or liste of objects to be reparented</span>
<span class="sd">        @type  parent: hostObject</span>
<span class="sd">        @param parent: the new parent object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.deleteChildrens"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.deleteChildrens">[docs]</a>    <span class="k">def</span> <span class="nf">deleteChildrens</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete recursively all the children of the given object.</span>

<span class="sd">        @type  obj: hostObject</span>
<span class="sd">        @param obj: the object for which we want to delete the childs</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># recursively delete obj and childrenobject</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getObject</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="n">childs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChilds</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="c1">#        print childs</span>
        <span class="k">if</span> <span class="n">childs</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">type</span><span class="p">(</span><span class="n">childs</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">list</span> <span class="ow">or</span> <span class="nb">type</span><span class="p">(</span><span class="n">childs</span><span class="p">)</span> <span class="ow">is</span> <span class="nb">tuple</span><span class="p">:</span>
                <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">deleteChildrens</span><span class="p">(</span><span class="n">ch</span><span class="p">)</span> <span class="k">for</span> <span class="n">ch</span> <span class="ow">in</span> <span class="n">childs</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">deleteChildrens</span><span class="p">(</span><span class="n">childs</span><span class="p">)</span>
        <span class="c1">#        else :</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">deleteObject</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.constraintLookAt"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.constraintLookAt">[docs]</a>    <span class="k">def</span> <span class="nf">constraintLookAt</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Cosntraint an hostobject to look at the camera.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: Hostobject</span>
<span class="sd">        @param object: object to constraint</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="c1"># ===============================================================================</span>
    <span class="c1">#     Basic object</span>
    <span class="c1"># ===============================================================================</span>
<div class="viewcode-block" id="Helper.Text"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Text">[docs]</a>    <span class="k">def</span> <span class="nf">Text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">string</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="mf">5.0</span><span class="p">,</span>
        <span class="n">pos</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">font</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">lookAt</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a hostobject of type Text.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the circle</span>
<span class="sd">        @type  string: string</span>
<span class="sd">        @param string: text to display</span>
<span class="sd">        @type  parent: Hostobject</span>
<span class="sd">        @param parent: parent of the text</span>
<span class="sd">        @type  size: Float</span>
<span class="sd">        @param size: height of the text</span>
<span class="sd">        @type  pos: Vector</span>
<span class="sd">        @param pos: position of the text</span>
<span class="sd">        @type  font: ?</span>
<span class="sd">        @param font: the font to use</span>
<span class="sd">        @type  lookAt: boolean</span>
<span class="sd">        @param lookAt: either the text  is constraint to look at the camera/view</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: additional keywords options</span>

<span class="sd">        @rtype:   hostObject</span>
<span class="sd">        @return:  the created text object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">text</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;not supported&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">text</span><span class="p">,</span> <span class="n">text</span><span class="p">]</span></div>

<div class="viewcode-block" id="Helper.Circle"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Circle">[docs]</a>    <span class="k">def</span> <span class="nf">Circle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">rad</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a hostobject of type 2d circle.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the circle</span>
<span class="sd">        @type  rad: float</span>
<span class="sd">        @param rad: the radius of the cylinder (default = 1.)</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: additional keywords options</span>

<span class="sd">        @rtype:   hostObject</span>
<span class="sd">        @return:  the created circle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># put the apropriate code here</span>
        <span class="n">circle</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># set name and rad for the circle</span>
        <span class="k">return</span> <span class="n">circle</span></div>

<div class="viewcode-block" id="Helper.rerieveAxis"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.rerieveAxis">[docs]</a>    <span class="k">def</span> <span class="nf">rerieveAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">axis</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the axis from the given array (X,Y or Z +/-).</span>

<span class="sd">        @type  axis: list</span>
<span class="sd">        @param axis: the aray [x,y,z]</span>

<span class="sd">        @rtype:   string</span>
<span class="sd">        @return:  the axis of the array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dic</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;+X&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s2">&quot;-X&quot;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s2">&quot;+Y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s2">&quot;-Y&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="s2">&quot;+Z&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
            <span class="s2">&quot;-Z&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.0</span><span class="p">],</span>
        <span class="p">}</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">axis</span><span class="p">[</span><span class="mi">0</span><span class="p">])),</span> <span class="nb">float</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">axis</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span> <span class="nb">float</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">axis</span><span class="p">[</span><span class="mi">2</span><span class="p">]))]</span>
        <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">list</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span> <span class="o">==</span> <span class="n">dic</span><span class="p">[</span><span class="n">k</span><span class="p">]:</span>
                <span class="k">return</span> <span class="n">k</span></div>

<div class="viewcode-block" id="Helper.CylinderHeadTails"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.CylinderHeadTails">[docs]</a>    <span class="k">def</span> <span class="nf">CylinderHeadTails</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">cylinder</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="n">res</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getPropertyObject</span><span class="p">(</span>
            <span class="n">cylinder</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pos&quot;</span><span class="p">,</span> <span class="s2">&quot;rotation&quot;</span><span class="p">,</span> <span class="s2">&quot;length&quot;</span><span class="p">,</span> <span class="s2">&quot;axis&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">res</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>
        <span class="n">pos</span><span class="p">,</span> <span class="n">rot</span><span class="p">,</span> <span class="n">l</span><span class="p">,</span> <span class="n">axis</span> <span class="o">=</span> <span class="n">res</span>
        <span class="n">h</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span> <span class="o">*</span> <span class="n">l</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">axis</span><span class="p">)</span> <span class="o">*</span> <span class="n">l</span> <span class="o">/</span> <span class="mf">2.0</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">matrix</span><span class="p">(</span><span class="n">rot</span><span class="p">)</span>
        <span class="n">h</span><span class="p">,</span> <span class="n">t</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ApplyMatrix</span><span class="p">([</span><span class="n">h</span><span class="p">,</span> <span class="n">t</span><span class="p">],</span> <span class="n">m</span><span class="o">.</span><span class="n">I</span><span class="p">)</span>
        <span class="n">head</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="o">+</span> <span class="n">h</span>
        <span class="n">tail</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pos</span><span class="p">)</span> <span class="o">-</span> <span class="n">t</span>
        <span class="c1"># self.ToMat(rot))#invert/transpose he matrix?</span>
        <span class="k">return</span> <span class="n">head</span><span class="p">,</span> <span class="n">tail</span></div>

<div class="viewcode-block" id="Helper.Cylinder"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Cylinder">[docs]</a>    <span class="k">def</span> <span class="nf">Cylinder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">res</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a hostobject of type cylinder.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the cylinder</span>
<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: the radius of the cylinder</span>
<span class="sd">        @type  length: float</span>
<span class="sd">        @param length: the length of the cylinder</span>
<span class="sd">        @type  res: float</span>
<span class="sd">        @param res: the resolution/quality of the cylinder</span>
<span class="sd">        @type  pos: array</span>
<span class="sd">        @param pos: the position of the cylinder</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: additional keywords options</span>

<span class="sd">        @rtype:   hostObject,hostMesh</span>
<span class="sd">        @return:  the created cylinder object and mesh</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.Sphere"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Sphere">[docs]</a>    <span class="k">def</span> <span class="nf">Sphere</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">res</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a hostobject of type sphere.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the sphere</span>
<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: the radius of the sphere</span>
<span class="sd">        @type  res: float</span>
<span class="sd">        @param res: the resolution/quality of the sphere</span>
<span class="sd">        @type  pos: array</span>
<span class="sd">        @param pos: the position of the cylinder</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: additional keywords options</span>

<span class="sd">        @rtype:   hostObject,hostMesh</span>
<span class="sd">        @return:  the created sphere object and mesh</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.getBoxSize"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getBoxSize">[docs]</a>    <span class="k">def</span> <span class="nf">getBoxSize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the current size in x, y and z of the  given Box if applcable</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: hostObject</span>
<span class="sd">        @param name: the Box name</span>

<span class="sd">        @rtype:   3d vector/list</span>
<span class="sd">        @return:  the size in x y and z</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Helper.box"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.box">[docs]</a>    <span class="k">def</span> <span class="nf">box</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
        <span class="n">cornerPoints</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a hostobject of type cube.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the box</span>
<span class="sd">        @type  center: array</span>
<span class="sd">        @param center: the center of the box</span>
<span class="sd">        @type  size: array</span>
<span class="sd">        @param size: the size in x y z direction</span>
<span class="sd">        @type  cornerPoints: array list</span>
<span class="sd">        @param cornerPoints: the upper-left and bottom right corner point coordinates</span>
<span class="sd">        @type  visible: booelan</span>
<span class="sd">        @param visible: visibility of the cube after creation (deprecated)</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: additional keywords options</span>

<span class="sd">        @rtype:   hostObject,hostMesh</span>
<span class="sd">        @return:  the created box object and mesh</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># put your code</span>
        <span class="n">box</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># set the name &#39;name&#39;</span>
        <span class="c1"># if corner is provided compute the cube dimension in x,y,z, and the center</span>
        <span class="k">if</span> <span class="n">cornerPoints</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">size</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cornerPoints</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">cornerPoints</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
        <span class="c1"># position the cube to center</span>
        <span class="c1"># set the dimension to size</span>
        <span class="c1"># return the box</span>
        <span class="k">return</span> <span class="n">box</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.updateBox"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.updateBox">[docs]</a>    <span class="k">def</span> <span class="nf">updateBox</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">box</span><span class="p">,</span>
        <span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
        <span class="n">cornerPoints</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">mat</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the given box.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  box: string</span>
<span class="sd">        @param box: name of the box</span>
<span class="sd">        @type  center: array</span>
<span class="sd">        @param center: the new center of the box</span>
<span class="sd">        @type  size: array</span>
<span class="sd">        @param size: the new size in x y z direction</span>
<span class="sd">        @type  cornerPoints: array list</span>
<span class="sd">        @param cornerPoints: the new upper-left and bottom right corner point coordinates</span>
<span class="sd">        @type  visible: booelan</span>
<span class="sd">        @param visible: visibility of the cube after creation (deprecated)</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: additional keywords options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># put your code</span>
        <span class="c1"># set the name &#39;name&#39;</span>
        <span class="c1"># if corner is provided compute the cube dimension in x,y,z, and the center</span>
        <span class="k">if</span> <span class="n">cornerPoints</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">size</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cornerPoints</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">cornerPoints</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span></div>
        <span class="c1"># position the cube to center</span>
        <span class="c1"># set the dimension to size</span>

<div class="viewcode-block" id="Helper.getCornerPointCube"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getCornerPointCube">[docs]</a>    <span class="k">def</span> <span class="nf">getCornerPointCube</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the corner Point of the Given Cube/Box</span>

<span class="sd">        @type  obj: string</span>
<span class="sd">        @param obj: name of the box</span>

<span class="sd">        @rtype:   array 2x3</span>
<span class="sd">        @return:  the upper-left and bottom right corner point coordinates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">size</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ToVec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getBoxSize</span><span class="p">(</span><span class="n">obj</span><span class="p">),</span> <span class="n">pos</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="c1">#        try :</span>
        <span class="c1">#            size = self.ToVec(obj[1100])#this will broke other host!</span>
        <span class="c1">#        except :</span>
        <span class="c1">#            size = self.ToVec(self.getScale(obj))</span>
        <span class="n">center</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ToVec</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getTranslation</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span>
        <span class="c1">#        print center</span>
        <span class="n">cornerPoints</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># lowCorner</span>
        <span class="n">lc</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span>
            <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span>
            <span class="n">center</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">size</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="c1"># upperCorner</span>
        <span class="n">uc</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">center</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">size</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span>
            <span class="n">center</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">size</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span>
            <span class="n">center</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">size</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span>
        <span class="p">]</span>
        <span class="n">cornerPoints</span> <span class="o">=</span> <span class="p">[[</span><span class="n">lc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">lc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">lc</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="p">[</span><span class="n">uc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">uc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">uc</span><span class="p">[</span><span class="mi">2</span><span class="p">]]]</span>
        <span class="k">return</span> <span class="n">cornerPoints</span></div>

<div class="viewcode-block" id="Helper.spline"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.spline">[docs]</a>    <span class="k">def</span> <span class="nf">spline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">close</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">scene</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This will return a hostApp spline/curve object according the given list</span>
<span class="sd">        of point.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name for the object</span>
<span class="sd">        @type  points: liste/array vector</span>
<span class="sd">        @param points: list of position coordinate of the curve point</span>
<span class="sd">        @type  close: bool/int</span>
<span class="sd">        @param close: is the curve is closed</span>
<span class="sd">        @type  type: int/string</span>
<span class="sd">        @param type: ususally describe type of curve, ie : bezier, linear, cubic, etc...</span>
<span class="sd">        @type  scene: hostApp scene</span>
<span class="sd">        @param scene: the current scene</span>
<span class="sd">        @type  parent: hostObject</span>
<span class="sd">        @param parent: the parent for the curve</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: additional keywords options</span>

<span class="sd">        @rtype:   hostObject,hostMesh</span>
<span class="sd">        @return:  the created spline object and data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create the spline</span>
        <span class="n">spline</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># define type, close, name</span>
        <span class="c1"># set the points</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">p</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">):</span>
            <span class="c1"># set every i point</span>
            <span class="k">pass</span>
        <span class="c1"># add the object to the scene</span>
        <span class="k">if</span> <span class="n">scene</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addObjectToScene</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">spline</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">spline</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.plane"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.plane">[docs]</a>    <span class="k">def</span> <span class="nf">plane</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="n">size</span><span class="o">=</span><span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
        <span class="n">cornerPoints</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a hostobject of type cube.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the plane</span>
<span class="sd">        @type  center: array</span>
<span class="sd">        @param center: the center of the plane</span>
<span class="sd">        @type  size: array</span>
<span class="sd">        @param size: the size in x y z direction</span>
<span class="sd">        @type  cornerPoints: array list</span>
<span class="sd">        @param cornerPoints: the upper-left and bottom right corner point coordinates</span>
<span class="sd">        @type  visible: booelan</span>
<span class="sd">        @param visible: visibility of the plane after creation (deprecated)</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: list of additional arguments : &quot;material&quot;, subdivision&quot;, axis&quot;</span>

<span class="sd">        @rtype:   hostObject,hostMesh</span>
<span class="sd">        @return:  the created plane object and data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># put your code</span>
        <span class="n">plane</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="c1"># set the name &#39;name&#39;</span>
        <span class="c1"># if corner is provided compute the cube dimension in x,y,z, and the center</span>
        <span class="k">if</span> <span class="n">cornerPoints</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">size</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">cornerPoints</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">cornerPoints</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
        <span class="c1"># position the cube to center</span>
        <span class="c1"># set the dimension to size</span>
        <span class="c1"># return the box</span>
        <span class="k">return</span> <span class="n">plane</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.update_spline"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.update_spline">[docs]</a>    <span class="k">def</span> <span class="nf">update_spline</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This will update the spline points coordinates</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name for the spline to update</span>
<span class="sd">        @type  coords: liste/array vector</span>
<span class="sd">        @param coords: list of new position coordinate to apply to the curve point</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="c1"># ===============================================================================</span>
    <span class="c1">#     Platonic</span>
    <span class="c1"># ===============================================================================</span>
    <span class="c1"># this already exist in c4d,overwrite in host if support it</span>
    <span class="c1"># also exist in glut</span>
<div class="viewcode-block" id="Helper.Platonic"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Platonic">[docs]</a>    <span class="k">def</span> <span class="nf">Platonic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">Type</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate one of the 5 platonic solid. The name of each figure is derived from its number of faces: respectively &quot;tetra&quot; 4, &quot;hexa&quot; 6, &quot;ocata&quot; 8, &quot;dodeca&quot; 12, and 20.</span>
<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the platonic</span>
<span class="sd">        @type  Type: string or int</span>
<span class="sd">        @param Type: type of the platonic, can be tetra&quot; 4, &quot;hexa&quot; 6, &quot;ocata&quot; 8, &quot;dodeca&quot; 12, and &quot;ico&quot; 20.</span>
<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: additional arguement such as meterial,parent</span>

<span class="sd">        @rtype:   hostObject</span>
<span class="sd">        @return:  the created platonic</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">dicT</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;tetra&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tetrahedron</span><span class="p">,</span>
            <span class="s2">&quot;hexa&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hexahedron</span><span class="p">,</span>
            <span class="s2">&quot;octa&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">octahedron</span><span class="p">,</span>
            <span class="s2">&quot;dodeca&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dodecahedron</span><span class="p">,</span>
            <span class="s2">&quot;icosa&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icosahedron</span><span class="p">,</span>
        <span class="p">}</span>  <span class="c1"># BuckyBall ?</span>
        <span class="n">dicTF</span> <span class="o">=</span> <span class="p">{</span>
            <span class="mi">4</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">tetrahedron</span><span class="p">,</span>
            <span class="mi">6</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">hexahedron</span><span class="p">,</span>
            <span class="mi">8</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">octahedron</span><span class="p">,</span>
            <span class="mi">12</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">dodecahedron</span><span class="p">,</span>
            <span class="mi">20</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">icosahedron</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">parent</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="s2">&quot;parent&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">parent</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;parent&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">Type</span> <span class="ow">in</span> <span class="n">dicT</span><span class="p">:</span>
            <span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">dicT</span><span class="p">[</span><span class="n">Type</span><span class="p">](</span><span class="n">radius</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">createsNmesh</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">Type</span> <span class="ow">in</span> <span class="n">dicTF</span><span class="p">:</span>
            <span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">dicTF</span><span class="p">[</span><span class="n">Type</span><span class="p">](</span><span class="n">radius</span><span class="p">)</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">createsNmesh</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">parent</span><span class="o">=</span><span class="n">parent</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.tetrahedron"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.tetrahedron">[docs]</a>    <span class="k">def</span> <span class="nf">tetrahedron</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the mesh data of a tetrahedron of a given radius</span>

<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>

<span class="sd">        @rtype:   array</span>
<span class="sd">        @return:  vertex,face, face normal of the tetrahedron</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">faceIndices</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># bot</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">faceNormals</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">),</span>
            <span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">),</span>
            <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">),</span>
            <span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">_corners</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="o">-</span><span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">radius</span><span class="p">),</span>
        <span class="p">)</span>  <span class="c1"># (0.0, 0.0, radius))</span>
        <span class="k">return</span> <span class="n">_corners</span><span class="p">,</span> <span class="n">faceIndices</span><span class="p">,</span> <span class="n">faceNormals</span></div>

<div class="viewcode-block" id="Helper.Tetrahedron"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Tetrahedron">[docs]</a>    <span class="k">def</span> <span class="nf">Tetrahedron</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the mesh data and the mesh object of a Tetrahedron of a given radius</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name for the spline to update</span>
<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>

<span class="sd">        @rtype:   Object, Mesh</span>
<span class="sd">        @return:  Tetrahedron Object and Mesh</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">tetrahedron</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
        <span class="n">ob</span><span class="p">,</span> <span class="n">obme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createsNmesh</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ob</span><span class="p">,</span> <span class="n">obme</span></div>

<div class="viewcode-block" id="Helper.hexahedron"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.hexahedron">[docs]</a>    <span class="k">def</span> <span class="nf">hexahedron</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the mesh data of a hexahedron of a given radius</span>

<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>

<span class="sd">        @rtype:   array</span>
<span class="sd">        @return:  vertex,face, face normal of the hexahedron</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">faceIndices</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>  <span class="c1"># bot</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>  <span class="c1"># top</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>  <span class="c1"># front</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>  <span class="c1"># right</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>  <span class="c1"># rear</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span>  <span class="c1"># left</span>
        <span class="p">)</span>
        <span class="n">faceNormals</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="n">depth</span> <span class="o">=</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mf">45.0</span><span class="p">))</span>
        <span class="n">_corners</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="o">-</span><span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">),</span>
            <span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">radius</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="o">-</span><span class="n">depth</span><span class="p">),</span>
            <span class="p">(</span><span class="o">-</span><span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">depth</span><span class="p">),</span>
            <span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">depth</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">radius</span><span class="p">,</span> <span class="n">depth</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="n">depth</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">_corners</span><span class="p">,</span> <span class="n">faceIndices</span><span class="p">,</span> <span class="n">faceNormals</span></div>

<div class="viewcode-block" id="Helper.Hexahedron"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Hexahedron">[docs]</a>    <span class="k">def</span> <span class="nf">Hexahedron</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the mesh data and the mesh object of a Hexahedron of a given radius</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name for the spline to update</span>
<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>

<span class="sd">        @rtype:   Object, Mesh</span>
<span class="sd">        @return:  Hexahedron Object and Mesh</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">hexahedron</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
        <span class="n">ob</span><span class="p">,</span> <span class="n">obme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createsNmesh</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ob</span><span class="p">,</span> <span class="n">obme</span></div>

<div class="viewcode-block" id="Helper.octahedron"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.octahedron">[docs]</a>    <span class="k">def</span> <span class="nf">octahedron</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the mesh data of a octahedron of a given radius</span>

<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>

<span class="sd">        @rtype:   array</span>
<span class="sd">        @return:  vertex,face, face normal of the octahedron</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">faceIndices</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">sqrt</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
        <span class="n">faceNormals</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span>
            <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">),</span>
            <span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">),</span>
            <span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span>
            <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span>
            <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">),</span>
            <span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">),</span>
            <span class="p">(</span><span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="o">-</span><span class="n">a</span><span class="p">,</span> <span class="n">a</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">_corners</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="o">-</span><span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="p">(</span><span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">radius</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">radius</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">radius</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">return</span> <span class="n">_corners</span><span class="p">,</span> <span class="n">faceIndices</span><span class="p">,</span> <span class="n">faceNormals</span></div>

<div class="viewcode-block" id="Helper.Octahedron"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Octahedron">[docs]</a>    <span class="k">def</span> <span class="nf">Octahedron</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the mesh data and the mesh object of a Octahedron of a given radius</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name for the spline to update</span>
<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>

<span class="sd">        @rtype:   Object, Mesh</span>
<span class="sd">        @return:  Octahedron Object and Mesh</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">octahedron</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
        <span class="n">ob</span><span class="p">,</span> <span class="n">obme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createsNmesh</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ob</span><span class="p">,</span> <span class="n">obme</span></div>

<div class="viewcode-block" id="Helper.dodecahedron"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.dodecahedron">[docs]</a>    <span class="k">def</span> <span class="nf">dodecahedron</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the mesh data of a dodecahedron of a given radius</span>

<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>

<span class="sd">        @rtype:   array</span>
<span class="sd">        @return:  vertex,face, face normal of the dodecahedron</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># from http://www.cs.umbc.edu/~squire/reference/polyhedra.shtml#dodecahedron</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># ; /* 20 vertices with x, y, z coordinate */</span>
        <span class="n">Pi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
        <span class="n">phiaa</span> <span class="o">=</span> <span class="mf">52.62263590</span>
        <span class="c1"># /* the two phi angles needed for generation */</span>
        <span class="n">phibb</span> <span class="o">=</span> <span class="mf">10.81231754</span>
        <span class="n">r</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="c1"># /* any radius in which the polyhedron is inscribed */</span>
        <span class="n">phia</span> <span class="o">=</span> <span class="n">Pi</span> <span class="o">*</span> <span class="n">phiaa</span> <span class="o">/</span> <span class="mf">180.0</span>
        <span class="c1"># /* 4 sets of five points each */</span>
        <span class="n">phib</span> <span class="o">=</span> <span class="n">Pi</span> <span class="o">*</span> <span class="n">phibb</span> <span class="o">/</span> <span class="mf">180.0</span>
        <span class="n">phic</span> <span class="o">=</span> <span class="n">Pi</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">phibb</span><span class="p">)</span> <span class="o">/</span> <span class="mf">180.0</span>
        <span class="n">phid</span> <span class="o">=</span> <span class="n">Pi</span> <span class="o">*</span> <span class="p">(</span><span class="o">-</span><span class="n">phiaa</span><span class="p">)</span> <span class="o">/</span> <span class="mf">180.0</span>
        <span class="n">the72</span> <span class="o">=</span> <span class="n">Pi</span> <span class="o">*</span> <span class="mf">72.0</span> <span class="o">/</span> <span class="mi">180</span>
        <span class="n">theb</span> <span class="o">=</span> <span class="n">the72</span> <span class="o">/</span> <span class="mf">2.0</span>  <span class="c1"># ; /* pairs of layers offset 36 degrees */</span>
        <span class="n">the</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">phia</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">phia</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">phia</span><span class="p">)</span>
            <span class="n">vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span>
            <span class="n">the</span> <span class="o">=</span> <span class="n">the</span> <span class="o">+</span> <span class="n">the72</span>

        <span class="n">the</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">10</span><span class="p">):</span>  <span class="c1"># (i=5; i&lt;10; i++)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">phib</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">phib</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">phib</span><span class="p">)</span>
            <span class="n">vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span>
            <span class="n">the</span> <span class="o">=</span> <span class="n">the</span> <span class="o">+</span> <span class="n">the72</span>

        <span class="n">the</span> <span class="o">=</span> <span class="n">theb</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">15</span><span class="p">):</span>  <span class="c1"># for(i=10; i&lt;15; i++)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">phic</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">phic</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">phic</span><span class="p">)</span>
            <span class="n">vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span>
            <span class="n">the</span> <span class="o">=</span> <span class="n">the</span> <span class="o">+</span> <span class="n">the72</span>

        <span class="n">the</span> <span class="o">=</span> <span class="n">theb</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">20</span><span class="p">):</span>  <span class="c1"># for(i=15; i&lt;20; i++)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">phid</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">phid</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">phid</span><span class="p">)</span>
            <span class="n">vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span>
            <span class="n">the</span> <span class="o">=</span> <span class="n">the</span> <span class="o">+</span> <span class="n">the72</span>

        <span class="c1"># /* map vertices to 12 faces */</span>
        <span class="c1"># these are the ngons</span>
        <span class="n">ngonsfaces</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">9</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">13</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">19</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span>
            <span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">18</span><span class="p">,</span> <span class="mi">19</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="c1"># triangualte</span>
        <span class="n">faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="c1"># wrong sense for some face</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">ngonsfaces</span><span class="p">):</span>
            <span class="c1"># create three faces from one ngonsface</span>
            <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">ngonsfaces</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]:</span>  <span class="c1"># last one</span>
                <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">]])</span>
                <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">4</span><span class="p">]])</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
                <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
                <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">f</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">]])</span>
        <span class="k">return</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.Dodecahedron"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Dodecahedron">[docs]</a>    <span class="k">def</span> <span class="nf">Dodecahedron</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the mesh data and the mesh object of a Dodecahedron of a given radius</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name for the spline to update</span>
<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>

<span class="sd">        @rtype:   Object, Mesh</span>
<span class="sd">        @return:  Dodecahedron Object and Mesh</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">dodecahedron</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
        <span class="n">ob</span><span class="p">,</span> <span class="n">obme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createsNmesh</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ob</span><span class="p">,</span> <span class="n">obme</span></div>

<div class="viewcode-block" id="Helper.icosahedron"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.icosahedron">[docs]</a>    <span class="k">def</span> <span class="nf">icosahedron</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the mesh data of a icosahedron of a given radius</span>

<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>

<span class="sd">        @rtype:   array</span>
<span class="sd">        @return:  vertex,face, face normal of the icosahedron</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># from http://www.cs.umbc.edu/~squire/reference/polyhedra.shtml#dodecahedron</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># ; /* 20 vertices with x, y, z coordinate */</span>
        <span class="n">Pi</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
        <span class="n">phiaa</span> <span class="o">=</span> <span class="mf">26.56505</span>
        <span class="c1"># /* the two phi angles needed for generation */</span>

        <span class="n">r</span> <span class="o">=</span> <span class="n">radius</span>
        <span class="c1"># /* any radius in which the polyhedron is inscribed */</span>
        <span class="n">phia</span> <span class="o">=</span> <span class="n">Pi</span> <span class="o">*</span> <span class="n">phiaa</span> <span class="o">/</span> <span class="mf">180.0</span>
        <span class="c1"># /* 2 sets of four points */</span>
        <span class="n">theb</span> <span class="o">=</span> <span class="n">Pi</span> <span class="o">*</span> <span class="mf">36.0</span> <span class="o">/</span> <span class="mf">180.0</span>
        <span class="c1"># /* offset second set 36 degrees */</span>
        <span class="n">the72</span> <span class="o">=</span> <span class="n">Pi</span> <span class="o">*</span> <span class="mf">72.0</span> <span class="o">/</span> <span class="mi">180</span>
        <span class="c1"># /* step 72 degrees */</span>

        <span class="n">vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">r</span><span class="p">])</span>

        <span class="n">the</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">phia</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">phia</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">phia</span><span class="p">)</span>
            <span class="n">vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span>
            <span class="n">the</span> <span class="o">=</span> <span class="n">the</span> <span class="o">+</span> <span class="n">the72</span>

        <span class="n">the</span> <span class="o">=</span> <span class="n">theb</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>  <span class="c1"># for(i=10; i&lt;15; i++)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="o">-</span><span class="n">phia</span><span class="p">)</span>
            <span class="n">y</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="n">the</span><span class="p">)</span> <span class="o">*</span> <span class="n">cos</span><span class="p">(</span><span class="o">-</span><span class="n">phia</span><span class="p">)</span>
            <span class="n">z</span> <span class="o">=</span> <span class="n">r</span> <span class="o">*</span> <span class="n">sin</span><span class="p">(</span><span class="o">-</span><span class="n">phia</span><span class="p">)</span>
            <span class="n">vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span>
            <span class="n">the</span> <span class="o">=</span> <span class="n">the</span> <span class="o">+</span> <span class="n">the72</span>

        <span class="n">vertices</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">r</span><span class="p">])</span>

        <span class="c1"># /* map vertices to 12 faces */</span>
        <span class="c1"># these are the ngons</span>
        <span class="n">faces</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">3</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span>
            <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
        <span class="p">]</span>

        <span class="k">return</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.Icosahedron"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Icosahedron">[docs]</a>    <span class="k">def</span> <span class="nf">Icosahedron</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">radius</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create the mesh data and the mesh object of a Icosahedron of a given radius</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name for the spline to update</span>
<span class="sd">        @type  radius: float</span>
<span class="sd">        @param radius: radius of the embeding sphere</span>

<span class="sd">        @rtype:   Object, Mesh</span>
<span class="sd">        @return:  Icosahedron Object and Mesh</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">icosahedron</span><span class="p">(</span><span class="n">radius</span><span class="p">)</span>
        <span class="n">ob</span><span class="p">,</span> <span class="n">obme</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">createsNmesh</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ob</span><span class="p">,</span> <span class="n">obme</span></div>

<div class="viewcode-block" id="Helper.MidPoint"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.MidPoint">[docs]</a>    <span class="k">def</span> <span class="nf">MidPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">[(</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">,</span> <span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">p2</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="o">/</span> <span class="mf">2.0</span><span class="p">]</span></div>

<div class="viewcode-block" id="Helper.reporthook"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.reporthook">[docs]</a>    <span class="k">def</span> <span class="nf">reporthook</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">blockSize</span><span class="p">,</span> <span class="n">totalSize</span><span class="p">):</span>
        <span class="n">percent</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">count</span> <span class="o">*</span> <span class="n">blockSize</span> <span class="o">/</span> <span class="n">totalSize</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">progressBar</span><span class="p">(</span><span class="n">percent</span><span class="p">,</span> <span class="s2">&quot;Downloading...&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">percent</span> <span class="o">&gt;=</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">resetProgressBar</span><span class="p">()</span></div>

<div class="viewcode-block" id="Helper.progressBar"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.progressBar">[docs]</a>    <span class="k">def</span> <span class="nf">progressBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">progress</span><span class="p">,</span> <span class="n">label</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the progress bar status by progress value and label string</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  progress: Int/Float</span>
<span class="sd">        @param progress: the new progress</span>
<span class="sd">        @type  label: string</span>
<span class="sd">        @param label: the new message to put in the progress status</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.resetProgressBar"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.resetProgressBar">[docs]</a>    <span class="k">def</span> <span class="nf">resetProgressBar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the Progress Bar, using value</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="c1"># ===============================================================================</span>
    <span class="c1">#     Texture Mapping / UV</span>
    <span class="c1"># ===============================================================================</span>
<div class="viewcode-block" id="Helper.getUVs"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getUVs">[docs]</a>    <span class="k">def</span> <span class="nf">getUVs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the Progress Bar, using value</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setUVs"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setUVs">[docs]</a>    <span class="k">def</span> <span class="nf">setUVs</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Reset the Progress Bar, using value</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getUV"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getUV">[docs]</a>    <span class="k">def</span> <span class="nf">getUV</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">faceIndex</span><span class="p">,</span> <span class="n">vertexIndex</span><span class="p">,</span> <span class="n">perVertice</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the UV coordinate of the given object according faceIndex and vertexIndex</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: string/hostObject</span>
<span class="sd">        @param object: the object from which we want the UV</span>
<span class="sd">        @type  faceIndex: list</span>
<span class="sd">        @param faceIndex: the liste of face index for which we want the UV</span>
<span class="sd">        @type  vertexIndex: list</span>
<span class="sd">        @param vertexIndex: the liste of vertex index for which we want the UV</span>
<span class="sd">        @type  perVertice: Boolean</span>
<span class="sd">        @param perVertice: UV coordinate access per verticer or per face</span>

<span class="sd">        @rtype:   list</span>
<span class="sd">        @return:  the list of UV coordinates for the given object according faceIndex and vertexIndex</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setUV"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setUV">[docs]</a>    <span class="k">def</span> <span class="nf">setUV</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">faceIndex</span><span class="p">,</span> <span class="n">vertexIndex</span><span class="p">,</span> <span class="n">uv</span><span class="p">,</span> <span class="n">perVertice</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update/Set the UV coordinate of the given object according faceIndex and vertexIndex</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: string/hostObject</span>
<span class="sd">        @param object: the object from which we want to update the UV</span>
<span class="sd">        @type  faceIndex: list</span>
<span class="sd">        @param faceIndex: the liste of face index for which we want to update the UV</span>
<span class="sd">        @type  vertexIndex: list</span>
<span class="sd">        @param vertexIndex: the liste of vertex index for which we want to update the UV</span>
<span class="sd">        @type  uv: list</span>
<span class="sd">        @param uv: the new uv coordinate [i,j]</span>
<span class="sd">        @type  perVertice: Boolean</span>
<span class="sd">        @param perVertice: UV coordinate access per verticer or per face</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="c1"># ===============================================================================</span>
    <span class="c1">#     mesh</span>
    <span class="c1"># ===============================================================================</span>

<div class="viewcode-block" id="Helper.findClosestPoint"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.findClosestPoint">[docs]</a>    <span class="k">def</span> <span class="nf">findClosestPoint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Find the closest vertices to the given 3d points in Python implementation</span>

<span class="sd">        @type  point: 3 points</span>
<span class="sd">        @param point: the point to look up</span>
<span class="sd">        @type  object: hostObj/hostMesh/String</span>
<span class="sd">        @param object: the object to scan for closest vertices</span>
<span class="sd">        @type  transform: Boolean</span>
<span class="sd">        @param transform: take in account the object transformation or not</span>

<span class="sd">        @rtype  :list</span>
<span class="sd">        @return : the minimal distance found and the closest vertices in the given polygon</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># python lookup for closest point,probably not the fastest way</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMeshVertices</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">transform</span><span class="p">:</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTransformation</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
            <span class="n">vertices</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ApplyMatrix</span><span class="p">(</span><span class="n">vertices</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ToMat</span><span class="p">(</span><span class="n">mat</span><span class="p">))</span>
        <span class="n">mini</span> <span class="o">=</span> <span class="mf">9999.0</span>
        <span class="n">miniv</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)):</span>
            <span class="n">d</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_distance</span><span class="p">(</span><span class="n">vertices</span><span class="p">[</span><span class="n">v</span><span class="p">],</span> <span class="n">point</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="n">mini</span><span class="p">:</span>
                <span class="n">mini</span> <span class="o">=</span> <span class="n">d</span>
                <span class="n">miniv</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">v</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">mini</span><span class="p">,</span> <span class="n">miniv</span></div>

<div class="viewcode-block" id="Helper.ToMat"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.ToMat">[docs]</a>    <span class="k">def</span> <span class="nf">ToMat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mat</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a python (4,4) matrice array from a host matrice</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  mat: host matrice array</span>
<span class="sd">        @param mat: host matrice array</span>
<span class="sd">        @rtype:   matrice</span>
<span class="sd">        @return:  the converted  matrice array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">mat</span></div>

<div class="viewcode-block" id="Helper.ToVec"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.ToVec">[docs]</a>    <span class="k">def</span> <span class="nf">ToVec</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">pos</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a python xyz array from a host xyz array/vector</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  v: host vector array</span>
<span class="sd">        @param v: host vector array</span>
<span class="sd">        @rtype:   array</span>
<span class="sd">        @return:  the converted  vector array</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">v</span></div>

    <span class="c1"># ===============================================================================</span>
    <span class="c1"># Advanced Objects</span>
    <span class="c1"># ===============================================================================</span>
<div class="viewcode-block" id="Helper.createsNmesh"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.createsNmesh">[docs]</a>    <span class="k">def</span> <span class="nf">createsNmesh</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">vertices</span><span class="p">,</span>
        <span class="n">vnormals</span><span class="p">,</span>
        <span class="n">faces</span><span class="p">,</span>
        <span class="n">smooth</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">material</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">proxyCol</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="p">[</span>
            <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
        <span class="p">],</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Function that generate a Polygon object from the given vertices, face and normal.</span>
<span class="sd">        material or color can be passed and apply to the created polygon.</span>
<span class="sd">        Return the object and the mesh.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the pointCloud</span>
<span class="sd">        @type  vertices: list</span>
<span class="sd">        @param vertices: the list of vertices</span>
<span class="sd">        @type  vnormals: list</span>
<span class="sd">        @param vnormals: the list of vertices normal</span>
<span class="sd">        @type  faces: list</span>
<span class="sd">        @param faces:  the list of normal</span>
<span class="sd">        @type  smooth: string</span>
<span class="sd">        @param smooth: smooth the mesh or not</span>
<span class="sd">        @type  material: hostMaterial</span>
<span class="sd">        @param material: the material to apply to the mesh object</span>
<span class="sd">        @type  proxyCol: Boolean</span>
<span class="sd">        @param proxyCol: special option for C4D DEPRECATED</span>
<span class="sd">        @type  color: list</span>
<span class="sd">        @param color: color to apply to the mesh object</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options, ie :</span>
<span class="sd">            &#39;parent&#39;   hostAp parent object</span>

<span class="sd">        @rtype:   hostObj/hostMesh</span>
<span class="sd">        @return:  the polygon object and data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.PointCloudObject"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.PointCloudObject">[docs]</a>    <span class="k">def</span> <span class="nf">PointCloudObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function create a special polygon which have only point.</span>
<span class="sd">        See createsNmesh or particul if the hostdoes no support only point mesh</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the pointCloud</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options, ie :</span>
<span class="sd">            &#39;vertices&#39; array of coordinates ;</span>
<span class="sd">            &#39;faces&#39;    int array of faces ;</span>
<span class="sd">            &#39;parent&#39;   hostAp parent object</span>

<span class="sd">        @rtype:   hostApp obj</span>
<span class="sd">        @return:  the polygon object and data</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.addBone"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addBone">[docs]</a>    <span class="k">def</span> <span class="nf">addBone</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">i</span><span class="p">,</span>
        <span class="n">armData</span><span class="p">,</span>
        <span class="n">headCoord</span><span class="p">,</span>
        <span class="n">tailCoord</span><span class="p">,</span>
        <span class="n">roll</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">hR</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="n">tR</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span>
        <span class="n">dDist</span><span class="o">=</span><span class="mf">0.4</span><span class="p">,</span>
        <span class="n">boneParent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">editMode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add one bone to an armature.</span>
<span class="sd">        Optional function for creation of the armature</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  i: int</span>
<span class="sd">        @param i: indice for the new bone</span>
<span class="sd">        @type  armData: armature host data</span>
<span class="sd">        @param armData: the armature</span>
<span class="sd">        @type  headCoord: array xyz</span>
<span class="sd">        @param headCoord: coordinate of the head of the bone</span>
<span class="sd">        @type  tailCoord: array xyz</span>
<span class="sd">        @param tailCoord: coordinate of the tail of the bone</span>
<span class="sd">        @type  boneParent: bone</span>
<span class="sd">        @param boneParent: the parent for the created bone</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   bone</span>
<span class="sd">        @return:  the created bone</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">eb</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">return</span> <span class="n">eb</span></div>

<div class="viewcode-block" id="Helper.updateArmature"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.updateArmature">[docs]</a>    <span class="k">def</span> <span class="nf">updateArmature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basename</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">listeName</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scn</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">root</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.armature"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.armature">[docs]</a>    <span class="k">def</span> <span class="nf">armature</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">coords</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create an armature along the given coordinates</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the armature object</span>
<span class="sd">        @type  coords: list of array xyz</span>
<span class="sd">        @param coords: coordinate foreach bone</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   host Object,list of bone</span>
<span class="sd">        @return:  the created armature and the created bones</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;not supported&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>
        <span class="c1"># return armObj,bones</span>

<div class="viewcode-block" id="Helper.oneMetaBall"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.oneMetaBall">[docs]</a>    <span class="k">def</span> <span class="nf">oneMetaBall</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">metab</span><span class="p">,</span> <span class="n">rad</span><span class="p">,</span> <span class="n">coord</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add one ball to a metaball object.</span>
<span class="sd">        Optional function for creation of the metaball</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  metab: metaball host data</span>
<span class="sd">        @param metab: the metaball</span>
<span class="sd">        @type  rad: float</span>
<span class="sd">        @param rad: radius for the new ball</span>
<span class="sd">        @type  coord: array xyz</span>
<span class="sd">        @param coord: coordinate of the ball</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   ball/None</span>
<span class="sd">        @return:  the ball or None</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.metaballs"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.metaballs">[docs]</a>    <span class="k">def</span> <span class="nf">metaballs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">listePt</span><span class="p">,</span> <span class="n">listeR</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a metaballs along the given coordinates</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the metaballs object</span>
<span class="sd">        @type  listePt: list of array xyz</span>
<span class="sd">        @param listePt: coordinate foreach bone</span>
<span class="sd">        @type  listeR: list of float</span>
<span class="sd">        @param listeR: radius foreach ball</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   host Object,list of bone/metaball data</span>
<span class="sd">        @return:  the created metaballs,the created ball</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span></div>

    <span class="c1"># ==============================================================================</span>
    <span class="c1"># Particle</span>
    <span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="Helper.particle"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.particle">[docs]</a>    <span class="k">def</span> <span class="nf">particle</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">coords</span><span class="p">,</span>
        <span class="n">group_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">radius</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">color</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">hostmatrice</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a particle system along the given coordinates</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the particle system</span>
<span class="sd">        @type  coords: list of array xyz</span>
<span class="sd">        @param coords: coordinate foreach particle</span>
<span class="sd">        @type  radius: list of float</span>
<span class="sd">        @param radius: radius foreach particle</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   host Object,list of bone/metaball data</span>
<span class="sd">        @return:  the created metaballs,the created ball</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.updateParticles"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.updateParticles">[docs]</a>    <span class="k">def</span> <span class="nf">updateParticles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newPos</span><span class="p">,</span> <span class="n">PS</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the particle system along the given new coordinates.</span>
<span class="sd">        remove or add particle.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  newPos: list of array xyz</span>
<span class="sd">        @param newPos: coordinate foreach particle</span>
<span class="sd">        @type  PS: Particle object</span>
<span class="sd">        @param PS: the particle system</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getParticles"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getParticles">[docs]</a>    <span class="k">def</span> <span class="nf">getParticles</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a particle system along the given name</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  name: string</span>
<span class="sd">        @param name: name of the particle system</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   host Object particle data</span>
<span class="sd">        @return:  the created particle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.setParticulesPosition"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setParticulesPosition">[docs]</a>    <span class="k">def</span> <span class="nf">setParticulesPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newPos</span><span class="p">,</span> <span class="n">PS</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update he particle position of a particle system along the given new coordinates</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  newPos: list of array xyz</span>
<span class="sd">        @param newPos: coordinate foreach particle</span>
<span class="sd">        @type  PS: Particle object</span>
<span class="sd">        @param PS: the particle system</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getParticulesPosition"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getParticulesPosition">[docs]</a>    <span class="k">def</span> <span class="nf">getParticulesPosition</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">PS</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the particle position of a particle system</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  PS: Particle object</span>
<span class="sd">        @param PS: the particle system</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   list of array xyz</span>
<span class="sd">        @return:  coordinate foreach particle</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="c1"># ===============================================================================</span>
    <span class="c1"># Mesh Function</span>
    <span class="c1"># ===============================================================================</span>
<div class="viewcode-block" id="Helper.getMeshVertice"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getMeshVertice">[docs]</a>    <span class="k">def</span> <span class="nf">getMeshVertice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">vertex_indice</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the vertices of the given polygon object data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want the vertices</span>
<span class="sd">        @type  vertex_indice: int</span>
<span class="sd">        @param vertex_indice: return only the give vertice coordinates</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   list of float xyz</span>
<span class="sd">        @return:  coordinate for one vertice of the given object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getMeshVertices"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getMeshVertices">[docs]</a>    <span class="k">def</span> <span class="nf">getMeshVertices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">selected</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the vertices of the given polygon object data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want the vertices</span>
<span class="sd">        @type  selected: Boolean</span>
<span class="sd">        @param selected: return only the selected vertices or not</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   list of array xyz</span>
<span class="sd">        @return:  coordinate for all or for selected vertices of the given object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getMeshNormales"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getMeshNormales">[docs]</a>    <span class="k">def</span> <span class="nf">getMeshNormales</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">selected</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the normals of the given polygon object data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want the normals</span>
<span class="sd">        @type  selected: Boolean</span>
<span class="sd">        @param selected: return only the selected normals or not</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   list of array xyz</span>
<span class="sd">        @return:  coordinate for all or for selected normals of the given object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getMeshEdge"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getMeshEdge">[docs]</a>    <span class="k">def</span> <span class="nf">getMeshEdge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostedge</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the host edge in python format</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  hostedge: hostEdge</span>
<span class="sd">        @param hostedge: the edge to conver to python</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   list</span>
<span class="sd">        @return:  the edge in python format</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getMeshEdges"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getMeshEdges">[docs]</a>    <span class="k">def</span> <span class="nf">getMeshEdges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">selected</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the edges of the given polygon object data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want the edges</span>
<span class="sd">        @type  selected: Boolean</span>
<span class="sd">        @param selected: return only the selected edges or not</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   list</span>
<span class="sd">        @return:  all or selected edges of the given object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getFaceEdges"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getFaceEdges">[docs]</a>    <span class="k">def</span> <span class="nf">getFaceEdges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">faceindice</span><span class="p">,</span> <span class="n">selected</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the edges of the given face object data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want the edges of the face</span>
<span class="sd">        @type  faceindice: int</span>
<span class="sd">        @param faceindice: the face indice</span>
<span class="sd">        @type  selected: Boolean</span>
<span class="sd">        @param selected: return only the selected edges or not</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   list</span>
<span class="sd">        @return:  all or selected edges of the given face</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getFace"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getFace">[docs]</a>    <span class="k">def</span> <span class="nf">getFace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">hostface</span><span class="p">,</span> <span class="n">r</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert the face edge in python format</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  hostface: hostFace</span>
<span class="sd">        @param hostface: the face to convert to python</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options.</span>
<span class="sd">            - r=True : Cinema4D reverse face order</span>

<span class="sd">        @rtype:   list</span>
<span class="sd">        @return:  the face in python format [i,j,k]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getFaces"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getFaces">[docs]</a>    <span class="k">def</span> <span class="nf">getFaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">object</span><span class="p">,</span> <span class="n">selected</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the faces of the given polygon object data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  object: hostObject</span>
<span class="sd">        @param object: the object from which we want the faces</span>
<span class="sd">        @type  selected: Boolean</span>
<span class="sd">        @param selected: return only the selected faces or not</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   list</span>
<span class="sd">        @return:  all or selected faces of the given object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getMeshFaces"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getMeshFaces">[docs]</a>    <span class="k">def</span> <span class="nf">getMeshFaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">selected</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the faces of the given polygon object data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want the faces</span>
<span class="sd">        @type  selected: Boolean</span>
<span class="sd">        @param selected: return only the selected faces or not</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype:   list</span>
<span class="sd">        @return:  all or selected faces of the given object</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFaces</span><span class="p">(</span><span class="n">poly</span><span class="p">,</span> <span class="n">selected</span><span class="o">=</span><span class="n">selected</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.setMeshVertice"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setMeshVertice">[docs]</a>    <span class="k">def</span> <span class="nf">setMeshVertice</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">vertice_indice</span><span class="p">,</span> <span class="n">vertice_coordinate</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the vertice for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to set the vertice</span>
<span class="sd">        @type  vertice_indice: int</span>
<span class="sd">        @param vertice_indice: vertice indice</span>
<span class="sd">        @type  vertice_coordinate: list&lt;float&gt;[3]</span>
<span class="sd">        @param vertice_coordinate: x y z coordinate for vertice vertice_indice</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setMeshVertices"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setMeshVertices">[docs]</a>    <span class="k">def</span> <span class="nf">setMeshVertices</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">vertices_coordinates</span><span class="p">,</span> <span class="n">vertices_indices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the vertices for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to set the vertices</span>
<span class="sd">        @type  vertices_coordinates: list&lt;float&gt;[3]</span>
<span class="sd">        @param vertices_coordinates: x y z coordinates for all vertice or vertices_indices</span>
<span class="sd">        @type  vertices_indices: array&lt;int&gt;</span>
<span class="sd">        @param vertices_indices: list of vertices indices</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setMeshFace"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setMeshFace">[docs]</a>    <span class="k">def</span> <span class="nf">setMeshFace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">faceindce</span><span class="p">,</span> <span class="n">face_vertices_indices</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the  face for the given face</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: hostObject</span>
<span class="sd">        @param obj: the object from which we want to set the face</span>
<span class="sd">        @type  faceindce: int</span>
<span class="sd">        @param faceindce: the face indice</span>
<span class="sd">        @type  vertices_indices: array&lt;int&gt;</span>
<span class="sd">        @param vertices_indices: list of vertices indices</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setMeshFaces"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setMeshFaces">[docs]</a>    <span class="k">def</span> <span class="nf">setMeshFaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">faces_vertices_indices</span><span class="p">,</span> <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the faces  for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: hostObject</span>
<span class="sd">        @param obj: the object from which we want to set the faces</span>
<span class="sd">        @type  faces_vertices_indices: list&lt;array&lt;int&gt;&gt;</span>
<span class="sd">        @param faces_vertices_indices: list of faces vertices indices</span>
<span class="sd">        @type  faces: array&lt;int&gt;</span>
<span class="sd">        @param faces: list of faces indices</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setMeshEdge"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setMeshEdge">[docs]</a>    <span class="k">def</span> <span class="nf">setMeshEdge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">edgeindce</span><span class="p">,</span> <span class="n">edge_vertices_indices</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the edge for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to set the edge</span>
<span class="sd">        @type  edgeindce: int</span>
<span class="sd">        @param edgeindce: egde indice</span>
<span class="sd">        @type  edge_vertices_indices: array&lt;int&gt;</span>
<span class="sd">        @param edge_vertices_indices: list of edge vertices indices</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setMeshEdges"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setMeshEdges">[docs]</a>    <span class="k">def</span> <span class="nf">setMeshEdges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">edges_vertices_indices</span><span class="p">,</span> <span class="n">edges</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the edges selecion status  for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to select the edges</span>
<span class="sd">        @type  edge_vertices_indices: list&lt;array&lt;int&gt;&gt;</span>
<span class="sd">        @param edge_vertices_indices: list of edges vertices indices</span>
<span class="sd">        @type  edges: array&lt;int&gt;</span>
<span class="sd">        @param edges: list of edges indices</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.addMeshVertice"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addMeshVertice">[docs]</a>    <span class="k">def</span> <span class="nf">addMeshVertice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">vertice_coordinate</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add the vertice for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to add the vertice</span>
<span class="sd">        @type  vertice_coordinate: list&lt;float&gt;[3]</span>
<span class="sd">        @param vertice_coordinate: x y z coordinate for the new vertice</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.addMeshVertices"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addMeshVertices">[docs]</a>    <span class="k">def</span> <span class="nf">addMeshVertices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">vertices_coordinates</span><span class="p">,</span> <span class="n">vertices_indices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add the vertices for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to add the vertices</span>
<span class="sd">        @type  vertices_coordinates: list&lt;float&gt;[3]</span>
<span class="sd">        @param vertices_coordinates: x y z coordinates for all vertice or vertices_indices</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.addMeshFace"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addMeshFace">[docs]</a>    <span class="k">def</span> <span class="nf">addMeshFace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">face_vertices_indices</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add the  face for the given face</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: hostObject</span>
<span class="sd">        @param obj: the object from which we want to add the face</span>
<span class="sd">        @type  vertices_indices: array&lt;int&gt;</span>
<span class="sd">        @param vertices_indices: list of vertices indices</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.addMeshFaces"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addMeshFaces">[docs]</a>    <span class="k">def</span> <span class="nf">addMeshFaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">faces_vertices_indices</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add the faces  for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: hostObject</span>
<span class="sd">        @param obj: the object from which we want to add the faces</span>
<span class="sd">        @type  faces_vertices_indices: list&lt;array&lt;int&gt;&gt;</span>
<span class="sd">        @param faces_vertices_indices: list of faces vertices indices</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.addMeshEdge"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addMeshEdge">[docs]</a>    <span class="k">def</span> <span class="nf">addMeshEdge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">edge_vertices_indices</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the edge for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to add the edge</span>
<span class="sd">        @type  edge_vertices_indices: array&lt;int&gt;</span>
<span class="sd">        @param edge_vertices_indices: list of edge vertices indices</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.addMeshEdges"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addMeshEdges">[docs]</a>    <span class="k">def</span> <span class="nf">addMeshEdges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">edges_vertices_indices</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add the edges selecion status  for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to add the edges</span>
<span class="sd">        @type  edge_vertices_indices: list&lt;array&lt;int&gt;&gt;</span>
<span class="sd">        @param edge_vertices_indices: list of edges vertices indices</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.selectVertice"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.selectVertice">[docs]</a>    <span class="k">def</span> <span class="nf">selectVertice</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">vertice_indice</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the vertice selecion status  for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to select the vertice</span>
<span class="sd">        @type  vertice_indice: int</span>
<span class="sd">        @param vertice_indice: vertice indice</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.selectVertices"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.selectVertices">[docs]</a>    <span class="k">def</span> <span class="nf">selectVertices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">vertices_indices</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the vertices selecion status  for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to select the vertices</span>
<span class="sd">        @type  vertices_indices: array&lt;int&gt;</span>
<span class="sd">        @param vertices_indices: list of vertices indices</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.selectFace"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.selectFace">[docs]</a>    <span class="k">def</span> <span class="nf">selectFace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">faceindce</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the  selecion status  for the given face</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to select the face</span>
<span class="sd">        @type  faceindce: int</span>
<span class="sd">        @param faceindce: the face indice</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.selectFaces"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.selectFaces">[docs]</a>    <span class="k">def</span> <span class="nf">selectFaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the faces selecion status  for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to select the faces</span>
<span class="sd">        @type  faces: array&lt;int&gt;</span>
<span class="sd">        @param faces: list of faces indices</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.selectEdge"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.selectEdge">[docs]</a>    <span class="k">def</span> <span class="nf">selectEdge</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">edgeindce</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the edge selecion status  for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to select the edge</span>
<span class="sd">        @type  edgeindce: int</span>
<span class="sd">        @param edgeindce: egde indice</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.selectEdges"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.selectEdges">[docs]</a>    <span class="k">def</span> <span class="nf">selectEdges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">edges</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the edges selecion status  for the given mesh data</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to select the edges</span>
<span class="sd">        @type  edges: array&lt;int&gt;</span>
<span class="sd">        @param edges: list of edges indices</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: select status</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.deleteMeshVertices"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.deleteMeshVertices">[docs]</a>    <span class="k">def</span> <span class="nf">deleteMeshVertices</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">vertices</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the give vertices indices</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to delete the vertices</span>
<span class="sd">        @type  faces: array&lt;int&gt;</span>
<span class="sd">        @param faces: list of vertices indices or None for all</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: delete selected faces</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.deleteMeshFaces"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.deleteMeshFaces">[docs]</a>    <span class="k">def</span> <span class="nf">deleteMeshFaces</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the give faces indices</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to delete the faces</span>
<span class="sd">        @type  faces: array&lt;int&gt;</span>
<span class="sd">        @param faces: list of faces indices or None for all</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: delete selected faces</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.deleteMeshEdges"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.deleteMeshEdges">[docs]</a>    <span class="k">def</span> <span class="nf">deleteMeshEdges</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="n">edges</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Delete the give edges indices</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObject</span>
<span class="sd">        @param poly: the object from which we want to delete the edges</span>
<span class="sd">        @type  faces: array&lt;int&gt;</span>
<span class="sd">        @param faces: list of edges indices or None for all</span>
<span class="sd">        @type  select: Boolean</span>
<span class="sd">        @param select: delete selected faces</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.getFacesfromV"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getFacesfromV">[docs]</a>    <span class="k">def</span> <span class="nf">getFacesfromV</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vindice</span><span class="p">,</span> <span class="n">faces</span><span class="p">):</span>
        <span class="c1">#        print vindice</span>
        <span class="n">ifaces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">indfaces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">faces</span><span class="p">):</span>
            <span class="c1">#            print (vindice, f)</span>
            <span class="k">if</span> <span class="n">vindice</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
                <span class="c1">#                print &quot;OK&quot;</span>
                <span class="n">ifaces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="n">indfaces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">indfaces</span><span class="p">,</span> <span class="n">ifaces</span></div>

<div class="viewcode-block" id="Helper.getFaceNormalsArea"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getFaceNormalsArea">[docs]</a>    <span class="k">def</span> <span class="nf">getFaceNormalsArea</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;compute the face normal of the compartment mesh&quot;&quot;&quot;</span>
        <span class="n">normals</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">vnormals</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vertices</span><span class="p">[:])</span>
        <span class="n">areas</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># added by Graham</span>
        <span class="n">face</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
        <span class="n">v</span> <span class="o">=</span> <span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">faces</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">face</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">face</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
                <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">face</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">-</span> <span class="n">face</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="n">i</span><span class="p">]</span>
            <span class="n">normal</span> <span class="o">=</span> <span class="n">vcross</span><span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">vlen</span><span class="p">(</span><span class="n">normal</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">n</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                <span class="n">n1</span> <span class="o">=</span> <span class="mf">1.0</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">n1</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">n</span>
            <span class="n">normals</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n1</span><span class="p">,</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">n1</span><span class="p">,</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">n1</span><span class="p">))</span>
            <span class="c1">#        The area of a triangle is equal to half the magnitude of the cross product of two of its edges</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="n">vnormals</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="n">i</span><span class="p">]]</span> <span class="o">=</span> <span class="p">[</span><span class="n">normal</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">n1</span><span class="p">,</span> <span class="n">normal</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">n1</span><span class="p">,</span> <span class="n">normal</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">n1</span><span class="p">]</span>
            <span class="n">areas</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">vlen</span><span class="p">(</span><span class="n">normal</span><span class="p">))</span>  <span class="c1"># added by Graham</span>
        <span class="k">return</span> <span class="n">vnormals</span><span class="p">,</span> <span class="n">normals</span><span class="p">,</span> <span class="n">areas</span></div>

<div class="viewcode-block" id="Helper.FixNormals"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.FixNormals">[docs]</a>    <span class="k">def</span> <span class="nf">FixNormals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">vn</span><span class="p">,</span> <span class="n">fn</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
        <span class="n">newnormals</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">indice</span><span class="p">,</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
            <span class="n">ifaces</span><span class="p">,</span> <span class="n">faces</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFacesfromV</span><span class="p">(</span><span class="n">indice</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
            <span class="n">n</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="c1">#            print len(faces)</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">af</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">faces</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">fn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">n</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fn</span><span class="p">[</span><span class="n">ifaces</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">iv</span> <span class="ow">in</span> <span class="n">af</span><span class="p">:</span>
                        <span class="n">n</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">vn</span><span class="p">[</span><span class="n">iv</span><span class="p">])</span>
            <span class="n">nn</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">average</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
            <span class="c1">#            print nn</span>
            <span class="n">newnormals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">nn</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">newnormals</span></div>

<div class="viewcode-block" id="Helper.normalize_v3"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.normalize_v3">[docs]</a>    <span class="k">def</span> <span class="nf">normalize_v3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">arr</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Normalize a numpy array of 3 component vectors shape=(n,3)&quot;&quot;&quot;</span>
        <span class="c1">#        return self.unit_vector(arr,axis=1)</span>
        <span class="c1">#        lens = numpy.linalg.norm(arr,axis=1)</span>
        <span class="n">lens</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">arr</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span> <span class="o">+</span> <span class="n">arr</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">**</span> <span class="mi">2</span><span class="p">)</span>
        <span class="n">arr</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">/=</span> <span class="n">lens</span>
        <span class="n">arr</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">/=</span> <span class="n">lens</span>
        <span class="n">arr</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">/=</span> <span class="n">lens</span>
        <span class="k">return</span> <span class="n">arr</span></div>

<div class="viewcode-block" id="Helper.normal_array"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.normal_array">[docs]</a>    <span class="k">def</span> <span class="nf">normal_array</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span><span class="p">):</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
        <span class="n">faces</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">faces</span><span class="p">)</span>
        <span class="c1"># Create a zeroed array with the same type and shape as our vertices i.e., per vertex normal</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="n">vertices</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">vertices</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
        <span class="c1"># Create an indexed view into the vertex array using the array of three indices for triangles</span>
        <span class="n">tris</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">faces</span><span class="p">]</span>
        <span class="c1"># Calculate the normal for all the triangles, by taking the cross product of the vectors v1-v0, and v2-v0 in each triangle</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">tris</span><span class="p">[::,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">tris</span><span class="p">[::,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">tris</span><span class="p">[::,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">-</span> <span class="n">tris</span><span class="p">[::,</span> <span class="mi">0</span><span class="p">])</span>
        <span class="c1"># n is now an array of normals per triangle. The length of each normal is dependent the vertices, # we need to normalize these, so that our next step weights each normal equally.normalize_v3(n)</span>
        <span class="c1"># now we have a normalized array of normals, one per triangle, i.e., per triangle normals.</span>
        <span class="c1"># But instead of one per triangle (i.e., flat shading), we add to each vertex in that triangle,</span>
        <span class="c1"># the triangles&#39; normal. Multiple triangles would then contribute to every vertex, so we need to normalize again afterwards.</span>
        <span class="c1"># The cool part, we can actually add the normals through an indexed view of our (zeroed) per vertex normal array</span>
        <span class="n">norm</span><span class="p">[</span><span class="n">faces</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">n</span>
        <span class="n">norm</span><span class="p">[</span><span class="n">faces</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">n</span>
        <span class="n">norm</span><span class="p">[</span><span class="n">faces</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]]</span> <span class="o">+=</span> <span class="n">n</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">normalize_v3</span><span class="p">(</span><span class="n">norm</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.matrixToVNMesh"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.matrixToVNMesh">[docs]</a>    <span class="k">def</span> <span class="nf">matrixToVNMesh</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">matrices</span><span class="p">,</span> <span class="n">vector</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">transpose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>  <span class="c1"># edge size ?</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;convert liste of matrix (rotation/position) to point mesh in order to use cloner / dupliVert&quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.matrixToFacesMesh"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.matrixToFacesMesh">[docs]</a>    <span class="k">def</span> <span class="nf">matrixToFacesMesh</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">matrices</span><span class="p">,</span> <span class="n">vector</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">transpose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>  <span class="c1"># edge size ?</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;convert liste of matrix (rotation/position) to quad mesh in order to use cloner / dupliFace&quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.toggle"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.toggle">[docs]</a>    <span class="k">def</span> <span class="nf">toggle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">variable</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">pass</span></div>

    <span class="c1"># Quad</span>
    <span class="c1">#    0   1</span>
    <span class="c1">#    3   2</span>
    <span class="c1"># Tri</span>
    <span class="c1">#    0   1  3</span>
    <span class="c1">#    3   1  2</span>
    <span class="c1"># OR</span>
    <span class="c1">#   Quad A B C D</span>
    <span class="c1">#   Triangles A B C / A C D</span>
    <span class="c1">#   Triangles A B D / D B C (compare A-C B-D)</span>

<div class="viewcode-block" id="Helper.triangulateFace"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.triangulateFace">[docs]</a>    <span class="k">def</span> <span class="nf">triangulateFace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">f</span><span class="p">,</span> <span class="n">vertices</span><span class="p">):</span>
        <span class="n">A</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="n">B</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="n">C</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
        <span class="n">D</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
        <span class="n">a</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_distance</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">C</span><span class="p">)</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_distance</span><span class="p">(</span><span class="n">B</span><span class="p">,</span> <span class="n">D</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">a</span> <span class="o">&lt;</span> <span class="n">b</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[[</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">]]]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[[</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">]],</span> <span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">]]]</span></div>

<div class="viewcode-block" id="Helper.triangulateFaceArray"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.triangulateFaceArray">[docs]</a>    <span class="k">def</span> <span class="nf">triangulateFaceArray</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">faces</span><span class="p">):</span>
        <span class="n">trifaces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">faces</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                <span class="n">trifaces</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">trifaces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>  <span class="c1"># triangulate</span>
                <span class="n">f1</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">]]</span>
                <span class="n">f2</span> <span class="o">=</span> <span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">f</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
                <span class="n">trifaces</span><span class="o">.</span><span class="n">extend</span><span class="p">([</span><span class="n">f1</span><span class="p">,</span> <span class="n">f2</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">trifaces</span></div>

    <span class="c1">#    from pymunk.vec2d import Vec2d</span>

    <span class="c1"># &quot;hidden&quot; functions</span>

    <span class="k">def</span> <span class="nf">_is_corner</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="c1"># returns if point b is an outer corner</span>
        <span class="k">return</span> <span class="ow">not</span> <span class="p">(</span><span class="n">is_clockwise</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]))</span>

    <span class="k">def</span> <span class="nf">_point_in_triangle</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
        <span class="c1"># measure area of whole triangle</span>
        <span class="n">whole</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">calc_area</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">]))</span>
        <span class="c1"># measure areas of inner triangles formed by p</span>
        <span class="n">parta</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">calc_area</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">p</span><span class="p">]))</span>
        <span class="n">partb</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">calc_area</span><span class="p">([</span><span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">p</span><span class="p">]))</span>
        <span class="n">partc</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">calc_area</span><span class="p">([</span><span class="n">c</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">p</span><span class="p">]))</span>
        <span class="c1"># allow for potential rounding error in area calcs</span>
        <span class="c1"># (not that i&#39;ve encountered one yet, but just in case...)</span>
        <span class="n">thresh</span> <span class="o">=</span> <span class="mf">0.0000001</span>
        <span class="c1"># return if the sum of the inner areas = the whole area</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">parta</span> <span class="o">+</span> <span class="n">partb</span> <span class="o">+</span> <span class="n">partc</span><span class="p">)</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">whole</span> <span class="o">+</span> <span class="n">thresh</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_get_ear</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">):</span>
        <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
        <span class="c1"># not even a poly</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[],</span> <span class="p">[]</span>
        <span class="c1"># only a triangle anyway</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">poly</span><span class="p">,</span> <span class="p">[]</span>

        <span class="c1"># start checking points</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
            <span class="n">ia</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">count</span>
            <span class="n">ib</span> <span class="o">=</span> <span class="n">i</span>
            <span class="n">ic</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">count</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="n">ia</span><span class="p">]</span>
            <span class="n">b</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="n">ib</span><span class="p">]</span>
            <span class="n">c</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="n">ic</span><span class="p">]</span>
            <span class="c1"># is point b an outer corner?</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_is_corner</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
                <span class="c1"># are there any other points inside triangle abc?</span>
                <span class="n">valid</span> <span class="o">=</span> <span class="kc">True</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">j</span> <span class="ow">in</span> <span class="p">(</span><span class="n">ia</span><span class="p">,</span> <span class="n">ib</span><span class="p">,</span> <span class="n">ic</span><span class="p">)):</span>
                        <span class="n">p</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_point_in_triangle</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">):</span>
                            <span class="n">valid</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="c1"># if no such point found, abc must be an &quot;ear&quot;</span>
                <span class="k">if</span> <span class="n">valid</span><span class="p">:</span>
                    <span class="n">remaining</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">j</span> <span class="o">!=</span> <span class="n">ib</span><span class="p">:</span>
                            <span class="n">remaining</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">poly</span><span class="p">[</span><span class="n">j</span><span class="p">])</span>
                    <span class="c1"># return the ear, and what&#39;s left of the polygon after the ear is clipped</span>
                    <span class="k">return</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">],</span> <span class="n">remaining</span>

        <span class="c1"># no ear was found, so something is wrong with the given poly (not anticlockwise? self-intersects?)</span>
        <span class="k">return</span> <span class="p">[],</span> <span class="p">[]</span>

    <span class="c1"># major functions</span>

    <span class="k">def</span> <span class="nf">_triangulate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        triangulates poly and returns a list of triangles</span>
<span class="sd">        poly: list of points that form an anticlockwise polygon (self-intersecting polygons won&#39;t work, results are... undefined)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">triangles</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">remaining</span> <span class="o">=</span> <span class="n">poly</span><span class="p">[:]</span>
        <span class="c1"># while the poly still needs clipping</span>
        <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="c1"># rotate the list:</span>
            <span class="c1"># this stops the starting point from getting stale which sometimes a &quot;fan&quot; of polys, which often leads to poor convexisation</span>
            <span class="n">remaining</span> <span class="o">=</span> <span class="n">remaining</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span> <span class="o">+</span> <span class="n">remaining</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span>
            <span class="c1"># clip the ear, store it</span>
            <span class="n">ear</span><span class="p">,</span> <span class="n">remaining</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_get_ear</span><span class="p">(</span><span class="n">remaining</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ear</span> <span class="o">!=</span> <span class="p">[]:</span>
                <span class="n">triangles</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ear</span><span class="p">)</span>
        <span class="c1"># return stored triangles</span>
        <span class="k">return</span> <span class="n">triangles</span>

<div class="viewcode-block" id="Helper.triangulate"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.triangulate">[docs]</a>    <span class="k">def</span> <span class="nf">triangulate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">poly</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert quad to triangle the selected face of the given polygon object.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObj</span>
<span class="sd">        @param poly: the object to triangulate</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.recalc_normals"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.recalc_normals">[docs]</a>    <span class="k">def</span> <span class="nf">recalc_normals</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Recalcul normals mesh outside/inside</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  poly: hostObj</span>
<span class="sd">        @param poly: the object to change the normal</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.IndexedPolgonsToTriPoints"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.IndexedPolgonsToTriPoints">[docs]</a>    <span class="k">def</span> <span class="nf">IndexedPolgonsToTriPoints</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">geom</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Convert DejaVu IndexPolygon vertices data in a python list.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  geom: DejaVu IndexedPolygon</span>
<span class="sd">        @param geom: the object to triangulate</span>
<span class="sd">        @type  transform: Boolean</span>
<span class="sd">        @param transform: apply the object transformation to the vertices</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>

<span class="sd">        @rtype  : list</span>
<span class="sd">        @return : the vertices data as list</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">verts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMeshVertices</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
        <span class="n">tri</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMeshFaces</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
        <span class="k">assert</span> <span class="n">tri</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">3</span>
        <span class="k">if</span> <span class="n">transform</span><span class="p">:</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getTransformation</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
            <span class="n">verts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ApplyMatrix</span><span class="p">(</span><span class="n">verts</span><span class="p">,</span> <span class="n">mat</span><span class="p">)</span>
        <span class="n">triv</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">tri</span><span class="p">:</span>
            <span class="n">triv</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">verts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">t</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">triv</span></div>

    <span class="c1"># ==============================================================================</span>
    <span class="c1"># Object Properties function</span>
    <span class="c1"># ==============================================================================</span>
    <span class="c1"># object or scene property ?</span>
<div class="viewcode-block" id="Helper.getPropertyObject"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getPropertyObject">[docs]</a>    <span class="k">def</span> <span class="nf">getPropertyObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;radius&quot;</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the  property &quot;key&quot; of the object obj</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: host Obj</span>
<span class="sd">        @param obj: the object that contains the property</span>
<span class="sd">        @type  key: string</span>
<span class="sd">        @param key: name of the property</span>

<span class="sd">        @rtype  : int, float, str, dict, list</span>
<span class="sd">        @return : the property value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.setPropertyObject"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setPropertyObject">[docs]</a>    <span class="k">def</span> <span class="nf">setPropertyObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a property &quot;key&quot; for the object obj and set his value</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: host Obj</span>
<span class="sd">        @param obj: the object that contains the property</span>
<span class="sd">        @type  key: string</span>
<span class="sd">        @param key: name of the property</span>
<span class="sd">        @type  value: int, float, str, dict, list</span>
<span class="sd">        @param value: the value of the property</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">pass</span></div>

    <span class="c1"># ==============================================================================</span>
    <span class="c1"># Properties function</span>
    <span class="c1"># ==============================================================================</span>
    <span class="c1"># object or scene property ?</span>
<div class="viewcode-block" id="Helper.getProperty"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getProperty">[docs]</a>    <span class="k">def</span> <span class="nf">getProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the  property &quot;key&quot; of the object obj</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: host Obj</span>
<span class="sd">        @param obj: the object that contains the property</span>
<span class="sd">        @type  key: string</span>
<span class="sd">        @param key: name of the property</span>

<span class="sd">        @rtype  : int, float, str, dict, list</span>
<span class="sd">        @return : the property value</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.setProperty"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setProperty">[docs]</a>    <span class="k">def</span> <span class="nf">setProperty</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a property &quot;key&quot; for the object obj and set his value</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  obj: host Obj</span>
<span class="sd">        @param obj: the object that contains the property</span>
<span class="sd">        @type  key: string</span>
<span class="sd">        @param key: name of the property</span>
<span class="sd">        @type  value: int, float, str, dict, list</span>
<span class="sd">        @param value: the value of the property</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">pass</span></div>

    <span class="c1"># ===============================================================================</span>
    <span class="c1"># Advanced Function</span>
    <span class="c1"># ===============================================================================</span>

<div class="viewcode-block" id="Helper.pathDeform"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.pathDeform">[docs]</a>    <span class="k">def</span> <span class="nf">pathDeform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Should create a modifierfor the given object using the given path/curve/spline</span>
<span class="sd">        TO DO.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  args: list</span>
<span class="sd">        @param args: list of arguments options</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arguments options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.updatePathDeform"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.updatePathDeform">[docs]</a>    <span class="k">def</span> <span class="nf">updatePathDeform</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Should update the modifierfor the given object using the given path/curve/spline</span>

<span class="sd">        TO DO.</span>

<span class="sd">        * overwrited by children class for each host</span>

<span class="sd">        @type  args: list</span>
<span class="sd">        @param args: list of arguments options</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arguments options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

    <span class="c1"># ===============================================================================</span>
    <span class="c1"># numpy dependant function</span>
    <span class="c1"># we should have alternative from the host</span>
    <span class="c1"># overwrite if possible by the host math module</span>
    <span class="c1"># ===============================================================================</span>

<div class="viewcode-block" id="Helper.vector_norm"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.vector_norm">[docs]</a>    <span class="k">def</span> <span class="nf">vector_norm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return length, i.e. eucledian norm, of ndarray along axis.</span>

<span class="sd">        &gt;&gt;&gt; v = numpy.random.random(3)</span>
<span class="sd">        &gt;&gt;&gt; n = vector_norm(v)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(n, numpy.linalg.norm(v))</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; v = numpy.random.rand(6, 5, 3)</span>
<span class="sd">        &gt;&gt;&gt; n = vector_norm(v, axis=-1)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(n, numpy.sqrt(numpy.sum(v*v, axis=2)))</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; n = vector_norm(v, axis=1)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(n, numpy.sqrt(numpy.sum(v*v, axis=1)))</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; v = numpy.random.rand(5, 4, 3)</span>
<span class="sd">        &gt;&gt;&gt; n = numpy.empty((5, 3), dtype=numpy.float64)</span>
<span class="sd">        &gt;&gt;&gt; vector_norm(v, axis=1, out=n)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(n, numpy.sqrt(numpy.sum(v*v, axis=1)))</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; vector_norm([])</span>
<span class="sd">        0.0</span>
<span class="sd">        &gt;&gt;&gt; vector_norm([1.0])</span>
<span class="sd">        1.0</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>
            <span class="n">data</span> <span class="o">*=</span> <span class="n">data</span>
            <span class="n">out</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">))</span>
            <span class="n">numpy</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">out</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">*=</span> <span class="n">data</span>
            <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
            <span class="n">numpy</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">out</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.unit_vector"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.unit_vector">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">unit_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return ndarray normalized by length, i.e. eucledian norm, along axis.</span>

<span class="sd">        &gt;&gt;&gt; v0 = numpy.random.random(3)</span>
<span class="sd">        &gt;&gt;&gt; v1 = unit_vector(v0)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(v1, v0 / numpy.linalg.norm(v0))</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; v0 = numpy.random.rand(5, 4, 3)</span>
<span class="sd">        &gt;&gt;&gt; v1 = unit_vector(v0, axis=-1)</span>
<span class="sd">        &gt;&gt;&gt; v2 = v0 / numpy.expand_dims(numpy.sqrt(numpy.sum(v0*v0, axis=2)), 2)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(v1, v2)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; v1 = unit_vector(v0, axis=1)</span>
<span class="sd">        &gt;&gt;&gt; v2 = v0 / numpy.expand_dims(numpy.sqrt(numpy.sum(v0*v0, axis=1)), 1)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(v1, v2)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; v1 = numpy.empty((5, 4, 3), dtype=numpy.float64)</span>
<span class="sd">        &gt;&gt;&gt; unit_vector(v0, axis=1, out=v1)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(v1, v2)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; list(unit_vector([]))</span>
<span class="sd">        []</span>
<span class="sd">        &gt;&gt;&gt; list(unit_vector([1.0]))</span>
<span class="sd">        [1.0]</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">data</span> <span class="o">/=</span> <span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">data</span><span class="p">))</span>
                <span class="k">return</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
                <span class="n">out</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">out</span>
        <span class="n">length</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">data</span> <span class="o">*</span> <span class="n">data</span><span class="p">,</span> <span class="n">axis</span><span class="p">))</span>
        <span class="n">numpy</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">expand_dims</span><span class="p">(</span><span class="n">length</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
        <span class="n">data</span> <span class="o">/=</span> <span class="n">length</span>
        <span class="k">if</span> <span class="n">out</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">data</span></div>

<div class="viewcode-block" id="Helper.getAngleAxis"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getAngleAxis">[docs]</a>    <span class="k">def</span> <span class="nf">getAngleAxis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vec1</span><span class="p">,</span> <span class="n">vec2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return angle (radians) and axis of rotation between two given vectors.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">angle</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">angle_between_vectors</span><span class="p">(</span><span class="n">vec1</span><span class="p">,</span> <span class="n">vec2</span><span class="p">)</span>
        <span class="n">cr</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">vec1</span><span class="p">,</span> <span class="n">vec2</span><span class="p">)</span>
        <span class="n">axis</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_vector</span><span class="p">(</span><span class="n">cr</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">angle</span><span class="p">,</span> <span class="n">axis</span></div>

<div class="viewcode-block" id="Helper.scalar"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.scalar">[docs]</a>    <span class="k">def</span> <span class="nf">scalar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        calculates the scalar product of two vectors</span>
<span class="sd">        v1 and v2 are numpy.array objects.</span>
<span class="sd">        returns a float for a one-dimensional array.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">v1</span> <span class="o">*</span> <span class="n">v2</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.dihedral"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.dihedral">[docs]</a>    <span class="k">def</span> <span class="nf">dihedral</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Returns a float value for the dihedral angle between</span>
<span class="sd">        the four vectors. They define the bond for which the</span>
<span class="sd">        torsion is calculated (~) as:</span>
<span class="sd">        V1 - V2 ~ V3 - V4</span>
<span class="sd">        The vectors vec1 .. vec4 can be array objects, lists or tuples of length</span>
<span class="sd">        three containing floats.</span>
<span class="sd">        For Scientific.geometry.Vector objects the behavior is different</span>
<span class="sd">        on Windows and Linux. Therefore, the latter is not a featured input type</span>
<span class="sd">        even though it may work.</span>

<span class="sd">        If the dihedral angle cant be calculated (because vectors are collinear),</span>
<span class="sd">        the function raises a DihedralGeometryError</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># create array instances.</span>
        <span class="c1"># numpy.array</span>
        <span class="c1"># v1,v2,v3,v4 =create_vectors(vec1,vec2,vec3,vec4)</span>
        <span class="n">all_vecs</span> <span class="o">=</span> <span class="p">[</span><span class="n">v1</span><span class="p">,</span> <span class="n">v2</span><span class="p">,</span> <span class="n">v3</span><span class="p">,</span> <span class="n">v4</span><span class="p">]</span>

        <span class="c1"># rule out that two of the atoms are identical</span>
        <span class="c1"># except the first and last, which may be.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">all_vecs</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">all_vecs</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">:</span>  <span class="c1"># exclude the (1,4) pair</span>
                    <span class="n">equals</span> <span class="o">=</span> <span class="n">all_vecs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">all_vecs</span><span class="p">[</span><span class="n">j</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">equals</span><span class="o">.</span><span class="n">all</span><span class="p">():</span>
                        <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># raise DihedralGeometryError(\</span>
                        <span class="c1"># &quot;Vectors #%i and #%i may not be identical!&quot;%(i,j))</span>

        <span class="c1"># calculate vectors representing bonds</span>
        <span class="n">v12</span> <span class="o">=</span> <span class="n">v2</span> <span class="o">-</span> <span class="n">v1</span>
        <span class="n">v23</span> <span class="o">=</span> <span class="n">v3</span> <span class="o">-</span> <span class="n">v2</span>
        <span class="n">v34</span> <span class="o">=</span> <span class="n">v4</span> <span class="o">-</span> <span class="n">v3</span>

        <span class="c1"># calculate vectors perpendicular to the bonds</span>
        <span class="n">normal1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">v12</span><span class="p">,</span> <span class="n">v23</span><span class="p">)</span>
        <span class="n">normal2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">v23</span><span class="p">,</span> <span class="n">v34</span><span class="p">)</span>

        <span class="c1"># check for linearity</span>
        <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">normal1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">or</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">normal2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="kc">None</span>  <span class="c1"># raise DihedralGeometryError(\</span>
        <span class="c1">#            &quot;Vectors are in one line; cannot calculate normals!&quot;)</span>

        <span class="c1"># normalize them to length 1.0</span>
        <span class="n">normal1</span> <span class="o">=</span> <span class="n">normal1</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">normal1</span><span class="p">)</span>
        <span class="n">normal2</span> <span class="o">=</span> <span class="n">normal2</span> <span class="o">/</span> <span class="n">numpy</span><span class="o">.</span><span class="n">linalg</span><span class="o">.</span><span class="n">norm</span><span class="p">(</span><span class="n">normal2</span><span class="p">)</span>

        <span class="c1"># calculate torsion and convert to degrees</span>
        <span class="n">torsion</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">angle_between_vectors</span><span class="p">(</span><span class="n">normal1</span><span class="p">,</span> <span class="n">normal2</span><span class="p">)</span>
        <span class="p">)</span>  <span class="c1"># * 180.0/pi</span>

        <span class="c1"># take into account the determinant</span>
        <span class="c1"># (the determinant is a scalar value distinguishing</span>
        <span class="c1"># between clockwise and counter-clockwise torsion.</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">scalar</span><span class="p">(</span><span class="n">normal1</span><span class="p">,</span> <span class="n">v34</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">torsion</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">torsion</span> <span class="o">=</span> <span class="mi">360</span> <span class="o">-</span> <span class="n">torsion</span>
            <span class="k">if</span> <span class="n">torsion</span> <span class="o">==</span> <span class="mi">360</span><span class="p">:</span>
                <span class="n">torsion</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">return</span> <span class="n">torsion</span></div>

<div class="viewcode-block" id="Helper.rotation_matrix"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.rotation_matrix">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">rotation_matrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">angle</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">point</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">trans</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return matrix to rotate about axis defined by point and direction.</span>

<span class="sd">        &gt;&gt;&gt; R = rotation_matrix(math.pi/2.0, [0, 0, 1], [1, 0, 0])</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(numpy.dot(R, [0, 0, 0, 1]), [ 1., -1.,  0.,  1.])</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; angle = (random.random() - 0.5) * (2*math.pi)</span>
<span class="sd">        &gt;&gt;&gt; direc = numpy.random.random(3) - 0.5</span>
<span class="sd">        &gt;&gt;&gt; point = numpy.random.random(3) - 0.5</span>
<span class="sd">        &gt;&gt;&gt; R0 = rotation_matrix(angle, direc, point)</span>
<span class="sd">        &gt;&gt;&gt; R1 = rotation_matrix(angle-2*math.pi, direc, point)</span>
<span class="sd">        &gt;&gt;&gt; is_same_transform(R0, R1)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; R0 = rotation_matrix(angle, direc, point)</span>
<span class="sd">        &gt;&gt;&gt; R1 = rotation_matrix(-angle, -direc, point)</span>
<span class="sd">        &gt;&gt;&gt; is_same_transform(R0, R1)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; I = numpy.identity(4, numpy.float64)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(I, rotation_matrix(math.pi*2, direc))</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(2., numpy.trace(rotation_matrix(math.pi/2,</span>
<span class="sd">        ...                                                direc, point)))</span>
<span class="sd">        True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">sina</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="n">cosa</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">)</span>
        <span class="n">direction</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_vector</span><span class="p">(</span><span class="n">direction</span><span class="p">[:</span><span class="mi">3</span><span class="p">])</span>
        <span class="c1"># rotation matrix around unit vector</span>
        <span class="n">R</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">((</span><span class="n">cosa</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">cosa</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="n">cosa</span><span class="p">)),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span>
        <span class="p">)</span>
        <span class="n">R</span> <span class="o">+=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">outer</span><span class="p">(</span><span class="n">direction</span><span class="p">,</span> <span class="n">direction</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">cosa</span><span class="p">)</span>
        <span class="n">direction</span> <span class="o">*=</span> <span class="n">sina</span>
        <span class="n">R</span> <span class="o">+=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">(</span>
                <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">direction</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">direction</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span>
                <span class="p">(</span><span class="n">direction</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="n">direction</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span>
                <span class="p">(</span><span class="o">-</span><span class="n">direction</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">direction</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mf">0.0</span><span class="p">),</span>
            <span class="p">),</span>
            <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">M</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">M</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">R</span>
        <span class="k">if</span> <span class="n">point</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="c1"># rotation not around origin</span>
            <span class="n">point</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
            <span class="n">M</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">point</span> <span class="o">-</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">R</span><span class="p">,</span> <span class="n">point</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">trans</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">M</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[</span><span class="n">trans</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">trans</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">trans</span><span class="p">[</span><span class="mi">2</span><span class="p">]],</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span>
            <span class="p">)</span>
        <span class="k">return</span> <span class="n">M</span></div>

<div class="viewcode-block" id="Helper.rotate_about_axis"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.rotate_about_axis">[docs]</a>    <span class="k">def</span> <span class="nf">rotate_about_axis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">B</span><span class="p">,</span> <span class="n">theta</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        from http://480.sagenb.org/home/pub/20/</span>

<span class="sd">        Create the rotation matrix for a angle theta around the given axis, and apply it to the given point (B).</span>

<span class="sd">        Rotation about</span>

<span class="sd">        x-axis corresponds to axis==0,</span>

<span class="sd">        y-axis corresponds to axis==1,</span>

<span class="sd">        z-axis corresponds to axis==2,</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">M</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([])</span>
        <span class="k">if</span> <span class="n">axis</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">M</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)]],</span>
                <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">M</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[[</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">)],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">)]],</span>
                <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">axis</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">M</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
                <span class="p">[[</span><span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="o">-</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="n">sin</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="n">cos</span><span class="p">(</span><span class="n">theta</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]],</span>
                <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="c1"># Numpy makes large floating point matrix manipulations easy</span>
        <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">M</span><span class="p">,</span> <span class="n">B</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.angle_between_vectors"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.angle_between_vectors">[docs]</a>    <span class="k">def</span> <span class="nf">angle_between_vectors</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">v0</span><span class="p">,</span> <span class="n">v1</span><span class="p">,</span> <span class="n">directed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the angle between vectors.</span>

<span class="sd">        If directed is False, the input vectors are interpreted as undirected axes,</span>
<span class="sd">        i.e. the maximum angle is pi/2.</span>

<span class="sd">        &gt;&gt;&gt; a = angle_between_vectors([1, -2, 3], [-1, 2, -3])</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(a, math.pi)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; a = angle_between_vectors([1, -2, 3], [-1, 2, -3], directed=False)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(a, 0)</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; v0 = [[2, 0, 0, 2], [0, 2, 0, 2], [0, 0, 2, 2]]</span>
<span class="sd">        &gt;&gt;&gt; v1 = [[3], [0], [0]]</span>
<span class="sd">        &gt;&gt;&gt; a = angle_between_vectors(v0, v1)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(a, [0., 1.5708, 1.5708, 0.95532])</span>
<span class="sd">        True</span>
<span class="sd">        &gt;&gt;&gt; v0 = [[2, 0, 0], [2, 0, 0], [0, 2, 0], [2, 0, 0]]</span>
<span class="sd">        &gt;&gt;&gt; v1 = [[0, 3, 0], [0, 0, 3], [0, 0, 3], [3, 3, 3]]</span>
<span class="sd">        &gt;&gt;&gt; a = angle_between_vectors(v0, v1, axis=1)</span>
<span class="sd">        &gt;&gt;&gt; numpy.allclose(a, [1.5708, 1.5708, 1.5708, 0.95532])</span>
<span class="sd">        True</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v0</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v0</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">v1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">numpy</span><span class="o">.</span><span class="n">float64</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
        <span class="n">dot</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">v0</span> <span class="o">*</span> <span class="n">v1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="n">dot</span> <span class="o">/=</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_norm</span><span class="p">(</span><span class="n">v0</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">vector_norm</span><span class="p">(</span><span class="n">v1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="n">axis</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">arccos</span><span class="p">(</span><span class="n">dot</span> <span class="k">if</span> <span class="n">directed</span> <span class="k">else</span> <span class="n">numpy</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">dot</span><span class="p">))</span></div>

<div class="viewcode-block" id="Helper.rotVectToVect"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.rotVectToVect">[docs]</a>    <span class="k">def</span> <span class="nf">rotVectToVect</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vect1</span><span class="p">,</span> <span class="n">vect2</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;returns a 4x4 transformation that will align vect1 with vect2</span>
<span class="sd">        vect1 and vect2 can be any vector (non-normalized)</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">v1x</span><span class="p">,</span> <span class="n">v1y</span><span class="p">,</span> <span class="n">v1z</span> <span class="o">=</span> <span class="n">vect1</span>
        <span class="n">v2x</span><span class="p">,</span> <span class="n">v2y</span><span class="p">,</span> <span class="n">v2z</span> <span class="o">=</span> <span class="n">vect2</span>

        <span class="c1"># normalize input vectors</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">v1x</span> <span class="o">*</span> <span class="n">v1x</span> <span class="o">+</span> <span class="n">v1y</span> <span class="o">*</span> <span class="n">v1y</span> <span class="o">+</span> <span class="n">v1z</span> <span class="o">*</span> <span class="n">v1z</span><span class="p">)</span>
        <span class="n">v1x</span> <span class="o">*=</span> <span class="n">norm</span>
        <span class="n">v1y</span> <span class="o">*=</span> <span class="n">norm</span>
        <span class="n">v1z</span> <span class="o">*=</span> <span class="n">norm</span>
        <span class="n">norm</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">v2x</span> <span class="o">*</span> <span class="n">v2x</span> <span class="o">+</span> <span class="n">v2y</span> <span class="o">*</span> <span class="n">v2y</span> <span class="o">+</span> <span class="n">v2z</span> <span class="o">*</span> <span class="n">v2z</span><span class="p">)</span>
        <span class="n">v2x</span> <span class="o">*=</span> <span class="n">norm</span>
        <span class="n">v2y</span> <span class="o">*=</span> <span class="n">norm</span>
        <span class="n">v2z</span> <span class="o">*=</span> <span class="n">norm</span>

        <span class="c1"># compute cross product and rotation axis</span>
        <span class="n">cx</span> <span class="o">=</span> <span class="n">v1y</span> <span class="o">*</span> <span class="n">v2z</span> <span class="o">-</span> <span class="n">v1z</span> <span class="o">*</span> <span class="n">v2y</span>
        <span class="n">cy</span> <span class="o">=</span> <span class="n">v1z</span> <span class="o">*</span> <span class="n">v2x</span> <span class="o">-</span> <span class="n">v1x</span> <span class="o">*</span> <span class="n">v2z</span>
        <span class="n">cz</span> <span class="o">=</span> <span class="n">v1x</span> <span class="o">*</span> <span class="n">v2y</span> <span class="o">-</span> <span class="n">v1y</span> <span class="o">*</span> <span class="n">v2x</span>

        <span class="c1"># normalize</span>
        <span class="n">nc</span> <span class="o">=</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">cx</span> <span class="o">*</span> <span class="n">cx</span> <span class="o">+</span> <span class="n">cy</span> <span class="o">*</span> <span class="n">cy</span> <span class="o">+</span> <span class="n">cz</span> <span class="o">*</span> <span class="n">cz</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nc</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">return</span> <span class="p">[</span>
                <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
                <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
                <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
                <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">],</span>
            <span class="p">]</span>

        <span class="n">cx</span> <span class="o">/=</span> <span class="n">nc</span>
        <span class="n">cy</span> <span class="o">/=</span> <span class="n">nc</span>
        <span class="n">cz</span> <span class="o">/=</span> <span class="n">nc</span>

        <span class="c1"># compute angle of rotation</span>
        <span class="k">if</span> <span class="n">nc</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;truncating nc on step:&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">nc</span><span class="p">)</span>
            <span class="n">nc</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">elif</span> <span class="n">nc</span> <span class="o">&gt;</span> <span class="mf">1.0</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">i</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;truncating nc on step:&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">nc</span><span class="p">)</span>
            <span class="n">nc</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="n">alpha</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">asin</span><span class="p">(</span><span class="n">nc</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">v1x</span> <span class="o">*</span> <span class="n">v2x</span> <span class="o">+</span> <span class="n">v1y</span> <span class="o">*</span> <span class="n">v2y</span> <span class="o">+</span> <span class="n">v1z</span> <span class="o">*</span> <span class="n">v2z</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">alpha</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span> <span class="o">-</span> <span class="n">alpha</span>

        <span class="c1"># rotate about nc by alpha</span>
        <span class="c1"># Compute 3x3 rotation matrix</span>

        <span class="n">ct</span> <span class="o">=</span> <span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span>
        <span class="n">ct1</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">ct</span>
        <span class="n">st</span> <span class="o">=</span> <span class="n">sin</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span>

        <span class="n">rot</span> <span class="o">=</span> <span class="p">[</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
        <span class="p">]</span>

        <span class="n">rv2x</span><span class="p">,</span> <span class="n">rv2y</span><span class="p">,</span> <span class="n">rv2z</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">*</span> <span class="n">cx</span><span class="p">,</span> <span class="n">cy</span> <span class="o">*</span> <span class="n">cy</span><span class="p">,</span> <span class="n">cz</span> <span class="o">*</span> <span class="n">cz</span>
        <span class="n">rv3x</span><span class="p">,</span> <span class="n">rv3y</span><span class="p">,</span> <span class="n">rv3z</span> <span class="o">=</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">rv2x</span><span class="p">)</span> <span class="o">*</span> <span class="n">ct</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">rv2y</span><span class="p">)</span> <span class="o">*</span> <span class="n">ct</span><span class="p">,</span> <span class="p">(</span><span class="mf">1.0</span> <span class="o">-</span> <span class="n">rv2z</span><span class="p">)</span> <span class="o">*</span> <span class="n">ct</span>
        <span class="n">rot</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">rv2x</span> <span class="o">+</span> <span class="n">rv3x</span>
        <span class="n">rot</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">rv2y</span> <span class="o">+</span> <span class="n">rv3y</span>
        <span class="n">rot</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">rv2z</span> <span class="o">+</span> <span class="n">rv3z</span>
        <span class="n">rot</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>

        <span class="n">rv4x</span><span class="p">,</span> <span class="n">rv4y</span><span class="p">,</span> <span class="n">rv4z</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">*</span> <span class="n">st</span><span class="p">,</span> <span class="n">cy</span> <span class="o">*</span> <span class="n">st</span><span class="p">,</span> <span class="n">cz</span> <span class="o">*</span> <span class="n">st</span>
        <span class="n">rot</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">*</span> <span class="n">cy</span> <span class="o">*</span> <span class="n">ct1</span> <span class="o">-</span> <span class="n">rv4z</span>
        <span class="n">rot</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">*</span> <span class="n">cz</span> <span class="o">*</span> <span class="n">ct1</span> <span class="o">-</span> <span class="n">rv4x</span>
        <span class="n">rot</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">cz</span> <span class="o">*</span> <span class="n">cx</span> <span class="o">*</span> <span class="n">ct1</span> <span class="o">-</span> <span class="n">rv4y</span>
        <span class="n">rot</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">cx</span> <span class="o">*</span> <span class="n">cy</span> <span class="o">*</span> <span class="n">ct1</span> <span class="o">+</span> <span class="n">rv4z</span>
        <span class="n">rot</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">cy</span> <span class="o">*</span> <span class="n">cz</span> <span class="o">*</span> <span class="n">ct1</span> <span class="o">+</span> <span class="n">rv4x</span>
        <span class="n">rot</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">cz</span> <span class="o">*</span> <span class="n">cx</span> <span class="o">*</span> <span class="n">ct1</span> <span class="o">+</span> <span class="n">rv4y</span>

        <span class="k">return</span> <span class="n">rot</span></div>

<div class="viewcode-block" id="Helper.ApplyMatrix"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.ApplyMatrix">[docs]</a>    <span class="k">def</span> <span class="nf">ApplyMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">,</span> <span class="n">mat</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Apply the 4x4 transformation matrix to the given list of 3d points.</span>

<span class="sd">        @type  coords: array</span>
<span class="sd">        @param coords: the list of point to transform.</span>
<span class="sd">        @type  mat: 4x4array</span>
<span class="sd">        @param mat: the matrix to apply to the 3d points</span>

<span class="sd">        @rtype:   array</span>
<span class="sd">        @return:  the transformed list of 3d points</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># 4x4matrix&quot;</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>
        <span class="n">one</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="n">coords</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">),</span> <span class="n">coords</span><span class="o">.</span><span class="n">dtype</span><span class="o">.</span><span class="n">char</span><span class="p">)</span>
        <span class="n">c</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">coords</span><span class="p">,</span> <span class="n">one</span><span class="p">),</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">numpy</span><span class="o">.</span><span class="n">dot</span><span class="p">(</span><span class="n">c</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="n">mat</span><span class="p">))[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span></div>

<div class="viewcode-block" id="Helper.Decompose4x4"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.Decompose4x4">[docs]</a>    <span class="k">def</span> <span class="nf">Decompose4x4</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">matrix</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Takes a matrix in shape (16,) in OpenGL form (sequential values go</span>
<span class="sd">        down columns) and decomposes it into its rotation (shape (16,)),</span>
<span class="sd">        translation (shape (3,)), and scale (shape (3,))</span>

<span class="sd">        @type  matrix: 4x4array</span>
<span class="sd">        @param matrix: the matrix to decompose</span>

<span class="sd">        @rtype:   list of array</span>
<span class="sd">        @return:  the decomposition of the matrix ie : rotation,translation,scale</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">matrix</span>
        <span class="n">transl</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">m</span><span class="p">[</span><span class="mi">12</span><span class="p">],</span> <span class="n">m</span><span class="p">[</span><span class="mi">13</span><span class="p">],</span> <span class="n">m</span><span class="p">[</span><span class="mi">14</span><span class="p">]),</span> <span class="s2">&quot;f&quot;</span><span class="p">)</span>
        <span class="n">scale0</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">*</span> <span class="n">m</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">*</span> <span class="n">m</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span>
        <span class="n">scale1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="n">m</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">*</span> <span class="n">m</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">9</span><span class="p">]</span> <span class="o">*</span> <span class="n">m</span><span class="p">[</span><span class="mi">9</span><span class="p">])</span>
        <span class="n">scale2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">*</span> <span class="n">m</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">*</span> <span class="n">m</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">+</span> <span class="n">m</span><span class="p">[</span><span class="mi">10</span><span class="p">]</span> <span class="o">*</span> <span class="n">m</span><span class="p">[</span><span class="mi">10</span><span class="p">])</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">scale0</span><span class="p">,</span> <span class="n">scale1</span><span class="p">,</span> <span class="n">scale2</span><span class="p">))</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">)</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
        <span class="n">rot</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">)</span>
        <span class="n">rot</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">)</span>
        <span class="n">rot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">rot</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">scale0</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">)</span>
        <span class="n">rot</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">rot</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">/</span> <span class="n">scale1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">)</span>
        <span class="n">rot</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">rot</span><span class="p">[:,</span> <span class="mi">2</span><span class="p">]</span> <span class="o">/</span> <span class="n">scale2</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">)</span>
        <span class="n">rot</span><span class="o">.</span><span class="n">shape</span> <span class="o">=</span> <span class="p">(</span><span class="mi">16</span><span class="p">,)</span>
        <span class="c1"># rot1 = rot.astype(&#39;f&#39;)</span>
        <span class="k">return</span> <span class="n">rot</span><span class="p">,</span> <span class="n">transl</span><span class="p">,</span> <span class="n">scale</span></div>

<div class="viewcode-block" id="Helper.getTubePropertiesMatrix"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getTubePropertiesMatrix">[docs]</a>    <span class="k">def</span> <span class="nf">getTubePropertiesMatrix</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coord1</span><span class="p">,</span> <span class="n">coord2</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        From two point return the length, and the orientation from one to another.</span>
<span class="sd">        This function is used to build a cylinder from two points (see oneCylinder function)</span>

<span class="sd">        &gt;&gt;&gt; coord1 = [1.0,0.0,0.0]</span>
<span class="sd">        &gt;&gt;&gt; coord2 = [2.0,0.0,0.0]</span>
<span class="sd">        &gt;&gt;&gt; distance,matrix = helper.getTubePropertiesMatrix(coord1,coord2)</span>
<span class="sd">        &gt;&gt;&gt; helper.setObjectMatrix(obj,matrix)</span>

<span class="sd">        @type  coord1: vector</span>
<span class="sd">        @param coord1: first point</span>
<span class="sd">        @type  coord2: vector</span>
<span class="sd">        @param coord2: second point</span>

<span class="sd">        @rtype:   tupple</span>
<span class="sd">        @return:  length, 4*4 matrix of rotation</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># need ot overwrite in C4D</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">y1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">z1</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord1</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">x2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord2</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">y2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord2</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">z2</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">coord2</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="n">v</span><span class="p">,</span> <span class="n">length</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">measure_distance</span><span class="p">(</span><span class="n">coord2</span><span class="p">,</span> <span class="n">coord1</span><span class="p">,</span> <span class="n">vec</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="n">vx</span><span class="p">,</span> <span class="n">vy</span><span class="p">,</span> <span class="n">vz</span> <span class="o">=</span> <span class="n">v</span>
        <span class="n">offset</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span>
            <span class="p">[</span><span class="nb">float</span><span class="p">(</span><span class="n">x1</span> <span class="o">+</span> <span class="n">x2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">y1</span> <span class="o">+</span> <span class="n">y2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">float</span><span class="p">(</span><span class="n">z1</span> <span class="o">+</span> <span class="n">z2</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">]</span>
        <span class="p">)</span>  <span class="c1"># center of the line joining two points</span>
        <span class="n">v_2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_vector</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">v_1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">float</span><span class="p">(</span><span class="mf">0.0</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="mf">1.0</span><span class="p">),</span> <span class="nb">float</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)])</span>
        <span class="n">v_3</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">v_1</span><span class="p">,</span> <span class="n">v_2</span><span class="p">)</span>
        <span class="n">v_3</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_vector</span><span class="p">(</span><span class="n">v_3</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">v_1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">cross</span><span class="p">(</span><span class="n">v_2</span><span class="p">,</span> <span class="n">v_3</span><span class="p">)</span>
        <span class="n">v_1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unit_vector</span><span class="p">(</span><span class="n">v_1</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">M</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">identity</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
        <span class="n">M</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">v_1</span>
        <span class="n">M</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">v_2</span>
        <span class="n">M</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">v_3</span>
        <span class="n">M</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">offset</span>
        <span class="k">return</span> <span class="n">length</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">M</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span></div>

<div class="viewcode-block" id="Helper.getCenter"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getCenter">[docs]</a>    <span class="k">def</span> <span class="nf">getCenter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">coords</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the center from a 3d array of coordinate x,y,z.</span>

<span class="sd">        @type  coords: liste/array</span>
<span class="sd">        @param coords: the coordinates</span>

<span class="sd">        @rtype:   list/array</span>
<span class="sd">        @return:  the center of mass of the coordinates</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#        if len(coords) == 3 :</span>
        <span class="c1">#            if type(coords[0]) is int or type(coords[0]) is float :</span>
        <span class="c1">#                coords = [coords,]</span>
        <span class="n">coords</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span>  <span class="c1"># self.allAtoms.coords</span>
        <span class="n">center</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">coords</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">center</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
            <span class="n">center</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="n">center</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">4</span><span class="p">)</span>
        <span class="c1">#        print &quot;center =&quot;, center</span>
        <span class="k">return</span> <span class="n">center</span></div>

    <span class="c1"># ===============================================================================</span>
    <span class="c1"># animation features</span>
    <span class="c1"># ===============================================================================</span>
<div class="viewcode-block" id="Helper.setKeyFrame"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setKeyFrame">[docs]</a>    <span class="k">def</span> <span class="nf">setKeyFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set a keyframe for the curret object</span>

<span class="sd">        @type  obj: hostObj</span>
<span class="sd">        @param obj: the object</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.setFrame"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setFrame">[docs]</a>    <span class="k">def</span> <span class="nf">setFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the current frame</span>

<span class="sd">        @type  value: int/float</span>
<span class="sd">        @param value: the desired frame</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.frameAdvanced"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.frameAdvanced">[docs]</a>    <span class="k">def</span> <span class="nf">frameAdvanced</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">display</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">cb</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Play frame for a specifiy duration with/without display and with/without a callbac</span>

<span class="sd">        @type  doc: document/scene</span>
<span class="sd">        @param doc: the desired scene</span>
<span class="sd">        @type  duration: float</span>
<span class="sd">        @param duration: how long shoud we play</span>
<span class="sd">        @type  display: bool</span>
<span class="sd">        @param display: toggle the update of the viewport</span>
<span class="sd">        @type  cb: function</span>
<span class="sd">        @param cb: the callback function to execute at every frame</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="Helper.animationStart"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.animationStart">[docs]</a>    <span class="k">def</span> <span class="nf">animationStart</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">forward</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Play frame for a specifiy duration</span>

<span class="sd">        @type  doc: document/scene</span>
<span class="sd">        @param doc: the desired scene</span>
<span class="sd">        @type  duration: float</span>
<span class="sd">        @param duration: how long shoud we play</span>
<span class="sd">        @type  forward: bool</span>
<span class="sd">        @param forward: toggle the direction of the animation</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

<div class="viewcode-block" id="Helper.animationStop"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.animationStop">[docs]</a>    <span class="k">def</span> <span class="nf">animationStop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">doc</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stop the animation</span>

<span class="sd">        @type  doc: document/scene</span>
<span class="sd">        @param doc: the desired scene</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span></div>

    <span class="c1"># ==============================================================================</span>
    <span class="c1"># Dynamics simulation</span>
    <span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="Helper.setRigidBody"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setRigidBody">[docs]</a>    <span class="k">def</span> <span class="nf">setRigidBody</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">obj</span><span class="p">,</span>
        <span class="n">shape</span><span class="o">=</span><span class="s2">&quot;auto&quot;</span><span class="p">,</span>
        <span class="n">child</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">dynamicsBody</span><span class="o">=</span><span class="s2">&quot;on&quot;</span><span class="p">,</span>
        <span class="n">dynamicsLinearDamp</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">dynamicsAngularDamp</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">massClamp</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">rotMassClamp</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the curren objec as a rigid body</span>

<span class="sd">        @type  doc: document/scene</span>
<span class="sd">        @param doc: the desired scene</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.setSoftBody"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.setSoftBody">[docs]</a>    <span class="k">def</span> <span class="nf">setSoftBody</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set the curren object as a soft body</span>

<span class="sd">        @type  doc: document/scene</span>
<span class="sd">        @param doc: the desired scene</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.updateSpring"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.updateSpring">[docs]</a>    <span class="k">def</span> <span class="nf">updateSpring</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">spring</span><span class="p">,</span>
        <span class="n">targetA</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">tragetB</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">rlength</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">stifness</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update the spring control</span>

<span class="sd">        @type  doc: document/scene</span>
<span class="sd">        @param doc: the desired scene</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.createSpring"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.createSpring">[docs]</a>    <span class="k">def</span> <span class="nf">createSpring</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">,</span>
        <span class="n">targetA</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">tragetB</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">rlength</span><span class="o">=</span><span class="mf">0.0</span><span class="p">,</span>
        <span class="n">stifness</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">damping</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">parent</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Create a sprin between two physics objects</span>

<span class="sd">        @type  doc: document/scene</span>
<span class="sd">        @param doc: the desired scene</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">None</span></div>

<div class="viewcode-block" id="Helper.addConstraint"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.addConstraint">[docs]</a>    <span class="k">def</span> <span class="nf">addConstraint</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;spring&quot;</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add a constraint to the  given object</span>

<span class="sd">        @type  doc: document/scene</span>
<span class="sd">        @param doc: the desired scene</span>
<span class="sd">        @type  kw: dictionary</span>
<span class="sd">        @param kw: dictionary of arg options</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>
        <span class="k">return</span> <span class="kc">None</span></div>

    <span class="c1"># ==============================================================================</span>
    <span class="c1"># Noise and Fractal</span>
    <span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="Helper.get_noise"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.get_noise">[docs]</a>    <span class="k">def</span> <span class="nf">get_noise</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">point</span><span class="p">,</span>
        <span class="n">ntype</span><span class="p">,</span>
        <span class="n">nbasis</span><span class="p">,</span>
        <span class="n">dimension</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">lacunarity</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span>
        <span class="n">offset</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">octaves</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span>
        <span class="n">gain</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
        <span class="c1"># multi_fractal(position, H, lacunarity, octaves, noise_basis=noise.types.STDPERLIN)</span>
        <span class="c1"># NotePlease use InitFbm() before you use one of the following noise types:</span>
        <span class="c1"># NOISE_ZADA, NOISE_DISPL_VORONOI, NOISE_OBER, NOISE_FBM, NOISE_BUYA.</span>
        <span class="k">return</span> <span class="mf">0.0</span></div>

    <span class="c1"># ===============================================================================</span>
    <span class="c1"># depends on PIL</span>
    <span class="c1"># ===============================================================================</span>
<div class="viewcode-block" id="Helper.getImage"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getImage">[docs]</a>    <span class="k">def</span> <span class="nf">getImage</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">img</span><span class="p">,</span> <span class="n">draw</span><span class="p">,</span> <span class="n">sizex</span><span class="p">,</span> <span class="n">sizey</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">img</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">draw</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="s2">&quot;RGB&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">sizex</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">sizey</span><span class="p">)),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">draw</span><span class="p">:</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">int</span><span class="p">(</span><span class="n">sizex</span><span class="p">),</span> <span class="nb">int</span><span class="p">(</span><span class="n">sizey</span><span class="p">),</span> <span class="mi">3</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">img</span></div>

<div class="viewcode-block" id="Helper.makeTexture"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.makeTexture">[docs]</a>    <span class="k">def</span> <span class="nf">makeTexture</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="nb">object</span><span class="p">,</span>
        <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">img</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">sizex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">sizey</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">s</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">draw</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">invert</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Experiment for baking faces colors using a PIL image</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">invert</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getImage</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">draw</span><span class="p">,</span> <span class="n">sizex</span><span class="p">,</span> <span class="n">sizey</span><span class="p">)</span>

        <span class="c1"># object handling</span>
        <span class="k">if</span> <span class="n">faces</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">faces</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getFaces</span><span class="p">(</span><span class="nb">object</span><span class="p">)</span>
        <span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">host</span> <span class="o">!=</span> <span class="s2">&quot;c4d&quot;</span><span class="p">:</span>
            <span class="n">invert</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">s</span> <span class="o">=</span> <span class="n">s</span>
        <span class="n">uvindex</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetProgressBar</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">f</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">faces</span><span class="p">):</span>
            <span class="n">xys</span> <span class="o">=</span> <span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">s</span><span class="p">),</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span>
            <span class="n">c1</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convertColor</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]]]))</span>
            <span class="n">c2</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convertColor</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]]]))</span>
            <span class="n">c3</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">convertColor</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="n">f</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]]]))</span>

            <span class="n">img</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fillTriangleColor</span><span class="p">(</span><span class="n">img</span><span class="p">,</span> <span class="n">c1</span><span class="p">,</span> <span class="n">c2</span><span class="p">,</span> <span class="n">c3</span><span class="p">,</span> <span class="n">xys</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">invert</span><span class="p">:</span>
                <span class="n">uv</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizex</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">y</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizey</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span>
                    <span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizex</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizey</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span>
                    <span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizex</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">y</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizey</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span>
                    <span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizex</span><span class="p">,</span> <span class="mi">1</span> <span class="o">-</span> <span class="p">((</span><span class="n">y</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizey</span><span class="p">),</span> <span class="mi">0</span><span class="p">],</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">uv</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizex</span><span class="p">,</span> <span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizey</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                    <span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizex</span><span class="p">,</span> <span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="n">s</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizey</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                    <span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizex</span><span class="p">,</span> <span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizey</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                    <span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="n">s</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizex</span><span class="p">,</span> <span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)</span> <span class="o">/</span> <span class="n">sizey</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
                <span class="p">]</span>
            <span class="n">uvindex</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">setUV</span><span class="p">(</span>
                <span class="nb">object</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">uv</span><span class="p">,</span> <span class="n">perVertice</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">uvid</span><span class="o">=</span><span class="n">uvindex</span>
            <span class="p">)</span>  <span class="c1"># perFaces give 3-4 uv</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">progressBar</span><span class="p">(</span>
                <span class="n">i</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">faces</span><span class="p">),</span> <span class="s2">&quot;faces &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;/&quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">faces</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot; done&quot;</span>
            <span class="p">)</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="n">s</span>
            <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;=</span> <span class="n">sizex</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">+</span> <span class="n">s</span> <span class="o">&gt;=</span> <span class="n">sizex</span><span class="p">:</span>
                <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="n">s</span>
        <span class="k">if</span> <span class="n">draw</span><span class="p">:</span>
            <span class="n">img</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># what to do with the array - &gt; build image using host or PIL</span>
            <span class="c1"># n=int(len(img)/(sizex*sizey))</span>
            <span class="c1"># img=img.reshape(sizex,sizey,n)</span>
            <span class="n">mode</span> <span class="o">=</span> <span class="s2">&quot;RGB&quot;</span>
            <span class="c1"># else : mode = &quot;RGBA&quot;</span>
            <span class="n">pilImage</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">fromstring</span><span class="p">(</span><span class="n">mode</span><span class="p">,</span> <span class="n">img</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">2</span><span class="p">],</span> <span class="n">img</span><span class="o">.</span><span class="n">tostring</span><span class="p">())</span>
            <span class="c1"># img=numpy.array(img)</span>
            <span class="c1"># pilImage = Image.fromarray(img, mode)</span>
            <span class="n">pilImage</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">resetProgressBar</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">img</span></div>

<div class="viewcode-block" id="Helper.fillTriangleColor"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.fillTriangleColor">[docs]</a>    <span class="k">def</span> <span class="nf">fillTriangleColor</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">array</span><span class="p">,</span> <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span><span class="p">,</span> <span class="n">xys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw and color a Triangle according a color per corner.</span>

<span class="sd">        Interpolate the color as OpenGL will do with per vertex</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
            <span class="n">a</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="mf">20.0</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
                <span class="n">b</span> <span class="o">=</span> <span class="n">j</span> <span class="o">/</span> <span class="mf">20.0</span>
                <span class="n">xcol</span> <span class="o">=</span> <span class="n">col1</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="p">(</span><span class="n">col3</span> <span class="o">-</span> <span class="n">col1</span><span class="p">)</span>
                <span class="n">ycol</span> <span class="o">=</span> <span class="n">xcol</span> <span class="o">+</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span><span class="n">col2</span> <span class="o">-</span> <span class="n">xcol</span><span class="p">)</span>
                <span class="n">array</span><span class="p">[</span><span class="n">xys</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">j</span><span class="p">][</span><span class="n">xys</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">i</span><span class="p">][:]</span> <span class="o">=</span> <span class="p">[</span><span class="n">ycol</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ycol</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ycol</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
        <span class="k">return</span> <span class="n">array</span></div>

<div class="viewcode-block" id="Helper.drawGradientLine"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.drawGradientLine">[docs]</a>    <span class="k">def</span> <span class="nf">drawGradientLine</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imdraw</span><span class="p">,</span> <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span><span class="p">,</span> <span class="n">xys</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw and color a gradient using either PIL rectangle or point drawing methods</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">col1</span> <span class="ow">is</span> <span class="n">col2</span> <span class="ow">and</span> <span class="n">col2</span> <span class="ow">is</span> <span class="n">col3</span><span class="p">:</span>
            <span class="n">imdraw</span><span class="o">.</span><span class="n">rectangle</span><span class="p">([</span><span class="n">xys</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">xys</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">fill</span><span class="o">=</span><span class="p">(</span><span class="n">col1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">col1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">col1</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
                <span class="n">a</span> <span class="o">=</span> <span class="n">i</span> <span class="o">/</span> <span class="mf">20.0</span>
                <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="n">j</span> <span class="o">/</span> <span class="mf">20.0</span>
                    <span class="n">xcol</span> <span class="o">=</span> <span class="n">col1</span> <span class="o">+</span> <span class="n">b</span> <span class="o">*</span> <span class="p">(</span><span class="n">col3</span> <span class="o">-</span> <span class="n">col1</span><span class="p">)</span>
                    <span class="n">ycol</span> <span class="o">=</span> <span class="n">xcol</span> <span class="o">+</span> <span class="n">a</span> <span class="o">*</span> <span class="p">(</span><span class="n">col2</span> <span class="o">-</span> <span class="n">xcol</span><span class="p">)</span>
                    <span class="n">imdraw</span><span class="o">.</span><span class="n">point</span><span class="p">(</span>
                        <span class="p">(</span><span class="n">xys</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">j</span><span class="p">,</span> <span class="n">xys</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">i</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="p">(</span><span class="n">ycol</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ycol</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ycol</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
                    <span class="p">)</span></div>

<div class="viewcode-block" id="Helper.drawPtCol"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.drawPtCol">[docs]</a>    <span class="k">def</span> <span class="nf">drawPtCol</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">imdraw</span><span class="p">,</span> <span class="n">color</span><span class="p">,</span> <span class="n">uv</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Draw  on the given Texture image accordinge en UV coordinates and colors</span>
<span class="sd">        uv is the 3 vertex coordinate in UV</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># uv is the 3 vertex coordinate in UV</span>
        <span class="c1">#        uv=extendUV(uv)</span>
        <span class="n">uv</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">uv</span><span class="p">)</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">uv</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">uv</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># color = [c0,c1,c2]</span>
        <span class="n">distu</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]</span>
        <span class="n">distv</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">]]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>  <span class="c1"># points</span>
            <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
                <span class="c1">#                print i,j</span>
                <span class="n">distu</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">uv</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">uv</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
                <span class="n">distv</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">uv</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">uv</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="c1">#    print distu</span>
        <span class="c1">#    print distv</span>
        <span class="n">order</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getOrder</span><span class="p">(</span><span class="n">distu</span><span class="p">,</span> <span class="n">uv</span><span class="p">)</span>
        <span class="c1">#    orderv = getOrder(distv,uv=uv)</span>
        <span class="n">ab</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">ab</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getA</span><span class="p">(</span><span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]]))</span>
        <span class="n">ab</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getA</span><span class="p">(</span><span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]],</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]]))</span>
        <span class="n">ab</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getA</span><span class="p">(</span><span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]]))</span>
        <span class="n">uv</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">uv</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">v</span> <span class="o">=</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">up</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="n">distv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">up</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># second pt up</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">up</span><span class="p">,</span> <span class="n">distv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
        <span class="c1"># distu=numpy.array(distu,int)</span>
        <span class="c1"># distv=numpy.array(distv,int)</span>
        <span class="n">rgu</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">u</span><span class="p">,</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="mi">0</span><span class="p">]))</span>
        <span class="k">if</span> <span class="n">u</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="n">rgu</span> <span class="o">=</span> <span class="n">rgu</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1x &quot;</span><span class="p">,</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">1</span><span class="p">],</span> <span class="n">v</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;1x &quot;</span><span class="p">,</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="mi">1</span><span class="p">],</span> <span class="n">v</span><span class="p">)</span>
        <span class="n">maxv</span> <span class="o">=</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">v</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">distv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
            <span class="n">maxv</span> <span class="o">=</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">distv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>
        <span class="k">if</span> <span class="n">d</span> <span class="o">&lt;</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">d</span> <span class="o">=</span> <span class="n">d</span> <span class="o">*</span> <span class="o">-</span><span class="mi">1</span>
        <span class="n">rgv</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">maxv</span><span class="p">,</span> <span class="n">rgv</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgv</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">rgv</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
        <span class="n">ycol</span> <span class="o">=</span> <span class="n">color</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
        <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;draw first point&quot;</span><span class="p">,</span> <span class="n">order</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgu</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgv</span><span class="p">))</span>  <span class="c1">#</span>
        <span class="c1"># imdraw.point((u,v),fill=(ycol[0],ycol[1],ycol[2]))</span>
        <span class="c1">#    print &quot;line eq&quot;,ab,order,orderv</span>
        <span class="n">indice1</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># more on right</span>
        <span class="n">indice2</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># midlle which can be up/down compare to 1</span>
        <span class="n">x</span> <span class="o">=</span> <span class="mf">0.0</span>

        <span class="n">ca</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">for</span> <span class="n">gg</span> <span class="ow">in</span> <span class="n">rgu</span><span class="p">:</span>
            <span class="c1"># range of v</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;eq &quot;</span><span class="p">,</span>
                    <span class="n">u</span><span class="p">,</span>
                    <span class="n">ab</span><span class="p">[</span><span class="n">indice1</span><span class="p">],</span>
                    <span class="n">u</span> <span class="o">*</span> <span class="n">ab</span><span class="p">[</span><span class="n">indice1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">ab</span><span class="p">[</span><span class="n">indice1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                    <span class="n">ab</span><span class="p">[</span><span class="n">indice2</span><span class="p">],</span>
                    <span class="n">u</span> <span class="o">*</span> <span class="n">ab</span><span class="p">[</span><span class="n">indice2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">ab</span><span class="p">[</span><span class="n">indice2</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="c1"># y = ax+b</span>
            <span class="n">va</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="n">ab</span><span class="p">[</span><span class="n">indice1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">ab</span><span class="p">[</span><span class="n">indice1</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="n">ab</span><span class="p">[</span><span class="n">indice1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.0</span> <span class="ow">and</span> <span class="n">u</span> <span class="o">==</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">vb</span> <span class="o">=</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">1</span><span class="p">]</span>  <span class="c1"># - distv[order[0]][order[1]]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">vb</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">u</span> <span class="o">*</span> <span class="n">ab</span><span class="p">[</span><span class="n">indice2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">ab</span><span class="p">[</span><span class="n">indice2</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
            <span class="c1"># if up :</span>
            <span class="n">rg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">va</span><span class="p">,</span> <span class="n">vb</span><span class="p">))</span>
            <span class="c1"># else :</span>
            <span class="c1">#    rg = range(vb,va+1)</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">rg</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">rg</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">vb</span><span class="p">,</span> <span class="n">va</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;range V &quot;</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">va</span><span class="p">,</span> <span class="n">vb</span><span class="p">,</span> <span class="n">rg</span><span class="p">)</span>
            <span class="n">xcola</span> <span class="o">=</span> <span class="n">x</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgu</span><span class="p">)</span>  <span class="c1"># * ab[2][0] + ab[2][1] #</span>
            <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;xcola&quot;</span><span class="p">,</span> <span class="n">xcola</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgu</span><span class="p">),</span> <span class="n">ca</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgu</span><span class="p">))</span>

            <span class="n">y</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="k">for</span> <span class="n">cb</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">rg</span><span class="p">):</span>
                <span class="n">k</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">maxv</span><span class="p">)</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">k</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">k</span> <span class="o">=</span> <span class="n">k</span> <span class="o">*</span> <span class="o">-</span><span class="mf">1.0</span>
                <span class="n">ycola</span> <span class="o">=</span> <span class="n">k</span> <span class="o">/</span> <span class="nb">float</span><span class="p">(</span>
                    <span class="nb">len</span><span class="p">(</span><span class="n">rgv</span><span class="p">)</span>
                <span class="p">)</span>  <span class="c1"># (x/len(rgu) * ab[indice1][0] + ab[indice1][1])/len(rgv) #</span>
                <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;ycola&quot;</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgv</span><span class="p">),</span> <span class="n">y</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">rgv</span><span class="p">),</span> <span class="n">ycola</span><span class="p">)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">-</span> <span class="n">color</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                    <span class="c1"># if up:</span>
                    <span class="n">xcol</span> <span class="o">=</span> <span class="n">color</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>
                    <span class="c1"># else :</span>
                    <span class="c1">#    xcol = color[order[2]]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># if up:</span>
                    <span class="c1">#    xcol = color[order[2]]+x/len(rgu)*(color[order[0]]-color[order[2]])</span>
                    <span class="c1"># else :</span>
                    <span class="n">xcol</span> <span class="o">=</span> <span class="n">color</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">+</span> <span class="n">xcola</span> <span class="o">*</span> <span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span> <span class="o">-</span> <span class="n">color</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">-</span> <span class="n">color</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
                    <span class="n">ycol</span> <span class="o">=</span> <span class="n">xcol</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># if up :</span>
                    <span class="n">ycol</span> <span class="o">=</span> <span class="n">xcol</span> <span class="o">+</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="n">ycola</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">color</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">-</span> <span class="n">xcol</span><span class="p">)</span>
                    <span class="c1"># else :</span>
                    <span class="c1"># ycol = color[order[1]]+y/n*(xcol-color[order[1]])</span>
                <span class="n">imdraw</span><span class="o">.</span><span class="n">point</span><span class="p">((</span><span class="n">u</span><span class="p">,</span> <span class="n">v</span><span class="p">),</span> <span class="n">fill</span><span class="o">=</span><span class="p">(</span><span class="n">ycol</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">ycol</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">ycol</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">y</span> <span class="o">+</span> <span class="mf">1.0</span>
            <span class="k">if</span> <span class="n">u</span> <span class="o">==</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">0</span><span class="p">]:</span>
                <span class="k">if</span> <span class="n">debug</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="n">u</span><span class="p">,</span> <span class="n">uv</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]][</span><span class="mi">0</span><span class="p">])</span>
                <span class="c1">#            if y == uv[order[1]][1] :</span>
                <span class="c1">#                print &quot;change line eq&quot;,y , uv[order[1]][1],indice1,indice2</span>
                <span class="n">indice1</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="c1">#                if order[0] == orderv[0] :</span>
                <span class="c1">#                    indice1 = orderv[0]</span>
                <span class="n">indice2</span> <span class="o">=</span> <span class="mi">2</span>

            <span class="c1">#                print indice1,indice2</span>
            <span class="n">u</span> <span class="o">=</span> <span class="n">u</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">x</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mf">1.0</span></div>

<div class="viewcode-block" id="Helper.getOrder"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getOrder">[docs]</a>    <span class="k">def</span> <span class="nf">getOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">distu</span><span class="p">,</span> <span class="n">uv</span><span class="p">):</span>
        <span class="n">order</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
        <span class="n">u</span><span class="p">,</span> <span class="n">v</span> <span class="o">=</span> <span class="n">uv</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="n">imaxu</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">u</span> <span class="o">==</span> <span class="n">u</span><span class="o">.</span><span class="n">max</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># [0]</span>
        <span class="n">iminu</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">u</span> <span class="o">==</span> <span class="n">u</span><span class="o">.</span><span class="n">min</span><span class="p">())[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># [0]</span>
        <span class="c1"># order0 should be left/top</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">iminu</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>  <span class="c1">#</span>
            <span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">iminu</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="c1"># different max,top one is the one with v mini</span>
            <span class="nb">min</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9999</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">iminu</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nb">min</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="nb">min</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="n">ind</span><span class="p">],</span> <span class="n">ind</span><span class="p">]</span>
            <span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># order1</span>
        <span class="c1"># closest u from order[0]</span>
        <span class="c1"># print distu[order[0]]</span>
        <span class="nb">min</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9999</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">distu</span><span class="p">[</span><span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]]):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                <span class="n">ds</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
                <span class="k">if</span> <span class="o">-</span><span class="n">d</span> <span class="o">&lt;</span> <span class="nb">min</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="nb">min</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="n">d</span><span class="p">,</span> <span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ds</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">ds</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="nb">min</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9999</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ind</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">v</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">ind</span> <span class="o">!=</span> <span class="n">order</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                    <span class="k">if</span> <span class="n">val</span> <span class="o">&lt;</span> <span class="nb">min</span><span class="p">[</span><span class="mi">0</span><span class="p">]:</span>
                        <span class="nb">min</span> <span class="o">=</span> <span class="p">[</span><span class="n">val</span><span class="p">,</span> <span class="n">ind</span><span class="p">]</span>
        <span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># order2</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">imaxu</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">imaxu</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">min</span> <span class="o">=</span> <span class="p">[</span><span class="mi">9999</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">imaxu</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">v</span><span class="p">[</span><span class="n">ind</span><span class="p">]</span> <span class="o">&lt;</span> <span class="nb">min</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">ind</span> <span class="o">!=</span> <span class="n">order</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
                    <span class="nb">min</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="n">ind</span><span class="p">],</span> <span class="n">ind</span><span class="p">]</span>
            <span class="n">order</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="nb">min</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="c1"># print order</span>
        <span class="k">return</span> <span class="n">order</span></div>

<div class="viewcode-block" id="Helper.getA"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.getA">[docs]</a>    <span class="k">def</span> <span class="nf">getA</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pt1</span><span class="p">,</span> <span class="n">pt2</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">pt2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">pt1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mf">0.0</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">a</span> <span class="o">=</span> <span class="p">(</span><span class="n">pt2</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">pt1</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="o">/</span> <span class="p">(</span><span class="n">pt2</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="n">pt1</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="c1"># solve y = ax+b</span>
        <span class="c1"># b = y - ax</span>
        <span class="n">b</span> <span class="o">=</span> <span class="n">pt1</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">a</span> <span class="o">*</span> <span class="n">pt1</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span></div>

    <span class="c1"># ==============================================================================</span>
    <span class="c1"># IO / read/write 3D object, cene file etc</span>
    <span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="Helper.combineDaeMeshData"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.combineDaeMeshData">[docs]</a>    <span class="k">def</span> <span class="nf">combineDaeMeshData</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">vertices</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">vnormal</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">v</span><span class="p">,</span> <span class="n">vn</span><span class="p">,</span> <span class="n">f</span> <span class="o">=</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">]</span>
            <span class="n">f</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
            <span class="n">faces</span><span class="o">.</span><span class="n">extend</span><span class="p">((</span><span class="n">f</span> <span class="o">+</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">))</span><span class="o">.</span><span class="n">tolist</span><span class="p">())</span>

            <span class="k">if</span> <span class="n">transform</span> <span class="ow">and</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;instances&quot;</span><span class="p">]:</span>
                <span class="n">v</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ApplyMatrix</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">value</span><span class="p">[</span><span class="s2">&quot;instances&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">vertices</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">vn</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">vnormal</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">vn</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">vnormal</span><span class="p">,</span> <span class="n">faces</span></div>

<div class="viewcode-block" id="Helper.read"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.read">[docs]</a>    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.write"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.write">[docs]</a>    <span class="k">def</span> <span class="nf">write</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">pass</span></div>

<div class="viewcode-block" id="Helper.instancesToCollada"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.instancesToCollada">[docs]</a>    <span class="k">def</span> <span class="nf">instancesToCollada</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">parent_object</span><span class="p">,</span> <span class="n">collada_xml</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">instance_node</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span>
    <span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">cellpack.autopack.transformation</span> <span class="kn">import</span> <span class="n">decompose_matrix</span>
            <span class="kn">from</span> <span class="nn">collada</span> <span class="kn">import</span> <span class="n">Collada</span>
            <span class="kn">from</span> <span class="nn">collada</span> <span class="kn">import</span> <span class="n">material</span>
            <span class="kn">from</span> <span class="nn">collada</span> <span class="kn">import</span> <span class="n">source</span>
            <span class="kn">from</span> <span class="nn">collada</span> <span class="kn">import</span> <span class="n">geometry</span>
            <span class="kn">from</span> <span class="nn">collada</span> <span class="kn">import</span> <span class="n">scene</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">return</span>
        <span class="n">inst_parent</span> <span class="o">=</span> <span class="n">parent_object</span>  <span class="c1"># self.getCurrentSelection()[0]</span>
        <span class="n">ch</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getChilds</span><span class="p">(</span><span class="n">inst_parent</span><span class="p">)</span>
        <span class="n">transpose</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="s2">&quot;transpose&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">transpose</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;transpose&quot;</span><span class="p">]</span>
        <span class="c1"># instance master</span>
        <span class="k">if</span> <span class="s2">&quot;mesh&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">inst_master</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">]</span>
            <span class="n">f</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">vn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DecomposeMesh</span><span class="p">(</span>
                <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;mesh&quot;</span><span class="p">],</span> <span class="n">edit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tri</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">inst_master</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMasterInstance</span><span class="p">(</span><span class="n">ch</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="c1"># grabb v,f,n of inst_master</span>
            <span class="n">f</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span> <span class="n">vn</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DecomposeMesh</span><span class="p">(</span>
                <span class="n">inst_master</span><span class="p">,</span> <span class="n">edit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">tri</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">transform</span><span class="o">=</span><span class="kc">True</span>
            <span class="p">)</span>

        <span class="n">iname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">inst_master</span><span class="p">)</span>
        <span class="n">pname</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">inst_parent</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">collada_xml</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">collada_xml</span> <span class="o">=</span> <span class="n">Collada</span><span class="p">()</span>
            <span class="n">collada_xml</span><span class="o">.</span><span class="n">assetInfo</span><span class="o">.</span><span class="n">unitname</span> <span class="o">=</span> <span class="s2">&quot;centimeter&quot;</span>
            <span class="n">collada_xml</span><span class="o">.</span><span class="n">assetInfo</span><span class="o">.</span><span class="n">unitmeter</span> <span class="o">=</span> <span class="mf">0.01</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMaterialObject</span><span class="p">(</span><span class="n">inst_master</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mat</span><span class="p">):</span>
            <span class="n">mat</span> <span class="o">=</span> <span class="n">mat</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">props</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getMaterialProperty</span><span class="p">(</span><span class="n">mat</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># ,specular_color=1)</span>
        <span class="n">effect</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">Effect</span><span class="p">(</span><span class="s2">&quot;effect&quot;</span> <span class="o">+</span> <span class="n">iname</span><span class="p">,</span> <span class="p">[],</span> <span class="s2">&quot;phong&quot;</span><span class="p">,</span> <span class="n">diffuse</span><span class="o">=</span><span class="n">props</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">])</span>
        <span class="c1">#                                 specular = props[&quot;specular_color&quot;])</span>
        <span class="n">mat</span> <span class="o">=</span> <span class="n">material</span><span class="o">.</span><span class="n">Material</span><span class="p">(</span><span class="s2">&quot;material&quot;</span> <span class="o">+</span> <span class="n">iname</span><span class="p">,</span> <span class="n">iname</span> <span class="o">+</span> <span class="s2">&quot;_material&quot;</span><span class="p">,</span> <span class="n">effect</span><span class="p">)</span>
        <span class="n">matnode</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">MaterialNode</span><span class="p">(</span><span class="s2">&quot;material&quot;</span> <span class="o">+</span> <span class="n">iname</span><span class="p">,</span> <span class="n">mat</span><span class="p">,</span> <span class="n">inputs</span><span class="o">=</span><span class="p">[])</span>
        <span class="n">collada_xml</span><span class="o">.</span><span class="n">effects</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">effect</span><span class="p">)</span>
        <span class="n">collada_xml</span><span class="o">.</span><span class="n">materials</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">mat</span><span class="p">)</span>
        <span class="c1"># the geom</span>
        <span class="c1"># invert Z ? for C4D?</span>
        <span class="n">vertzyx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>  <span class="c1"># * numpy.array([1,1,-1])</span>
        <span class="n">z</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="n">vertzyx</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="n">vertxyz</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">vert_src</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">FloatSource</span><span class="p">(</span>
            <span class="n">iname</span> <span class="o">+</span> <span class="s2">&quot;_verts-array&quot;</span><span class="p">,</span> <span class="n">vertxyz</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">norzyx</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">vn</span><span class="p">)</span>
        <span class="n">nz</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nx</span> <span class="o">=</span> <span class="n">norzyx</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
        <span class="n">norxyz</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nz</span><span class="p">])</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span> <span class="o">*</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="n">normal_src</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">FloatSource</span><span class="p">(</span>
            <span class="n">iname</span> <span class="o">+</span> <span class="s2">&quot;_normals-array&quot;</span><span class="p">,</span> <span class="n">norxyz</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">,</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;Z&quot;</span><span class="p">)</span>
        <span class="p">)</span>
        <span class="n">geom</span> <span class="o">=</span> <span class="n">geometry</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span>
            <span class="n">collada_xml</span><span class="p">,</span> <span class="s2">&quot;geometry&quot;</span> <span class="o">+</span> <span class="n">iname</span><span class="p">,</span> <span class="n">iname</span><span class="p">,</span> <span class="p">[</span><span class="n">vert_src</span><span class="p">,</span> <span class="n">normal_src</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">input_list</span> <span class="o">=</span> <span class="n">source</span><span class="o">.</span><span class="n">InputList</span><span class="p">()</span>
        <span class="n">input_list</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;VERTEX&quot;</span><span class="p">,</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">iname</span> <span class="o">+</span> <span class="s2">&quot;_verts-array&quot;</span><span class="p">)</span>
        <span class="n">input_list</span><span class="o">.</span><span class="n">addInput</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;NORMAL&quot;</span><span class="p">,</span> <span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">iname</span> <span class="o">+</span> <span class="s2">&quot;_normals-array&quot;</span><span class="p">)</span>
        <span class="c1"># invert all the face</span>
        <span class="n">fi</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>  <span class="c1"># [:,::-1]</span>
        <span class="n">triset</span> <span class="o">=</span> <span class="n">geom</span><span class="o">.</span><span class="n">createTriangleSet</span><span class="p">(</span><span class="n">fi</span><span class="o">.</span><span class="n">flatten</span><span class="p">(),</span> <span class="n">input_list</span><span class="p">,</span> <span class="n">iname</span> <span class="o">+</span> <span class="s2">&quot;materialref&quot;</span><span class="p">)</span>
        <span class="n">geom</span><span class="o">.</span><span class="n">primitives</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">triset</span><span class="p">)</span>
        <span class="n">collada_xml</span><span class="o">.</span><span class="n">geometries</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
        <span class="c1"># the  noe</span>
        <span class="c1"># instance here ?</span>
        <span class="c1"># creae the instance maser node :</span>
        <span class="k">if</span> <span class="n">instance_node</span><span class="p">:</span>
            <span class="n">master_geomnode</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">GeometryNode</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="p">[</span><span class="n">matnode</span><span class="p">])</span>
            <span class="n">master_node</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span>
                <span class="s2">&quot;node_&quot;</span> <span class="o">+</span> <span class="n">iname</span><span class="p">,</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">master_geomnode</span><span class="p">,</span>
                <span class="p">],</span>
            <span class="p">)</span>  <span class="c1"># ,transforms=[tr,rz,ry,rx,s])</span>
        <span class="n">g</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">ch</span><span class="p">:</span>
            <span class="c1"># collada.scene.NodeNode</span>
            <span class="k">if</span> <span class="n">instance_node</span><span class="p">:</span>
                <span class="n">geomnode</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">NodeNode</span><span class="p">(</span><span class="n">master_node</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">geomnode</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">GeometryNode</span><span class="p">(</span><span class="n">geom</span><span class="p">,</span> <span class="p">[</span><span class="n">matnode</span><span class="p">])</span>
            <span class="n">matrix</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ToMat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">getTransformation</span><span class="p">(</span><span class="n">c</span><span class="p">))</span>  <span class="c1"># .transpose()#.flatten()</span>
            <span class="k">if</span> <span class="n">transpose</span><span class="p">:</span>
                <span class="n">matrix</span> <span class="o">=</span> <span class="n">numpy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span><span class="o">.</span><span class="n">transpose</span><span class="p">()</span>
            <span class="n">scale</span><span class="p">,</span> <span class="n">shear</span><span class="p">,</span> <span class="n">euler</span><span class="p">,</span> <span class="n">translate</span><span class="p">,</span> <span class="n">perspective</span> <span class="o">=</span> <span class="n">decompose_matrix</span><span class="p">(</span><span class="n">matrix</span><span class="p">)</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getScale</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="n">p</span> <span class="o">=</span> <span class="n">translate</span>  <span class="c1"># matrix[3,:3]/100.0#unit problem</span>
            <span class="n">tr</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">TranslateTransform</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">rx</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">RotateTransform</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">euler</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>
            <span class="n">ry</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">RotateTransform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">euler</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>
            <span class="n">rz</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">RotateTransform</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">numpy</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">euler</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">ScaleTransform</span><span class="p">(</span><span class="n">scale</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">scale</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">scale</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
            <span class="c1"># n = scene.NodeNode(master_node,transforms=[tr,rz,ry,rx,s])</span>
            <span class="c1">#            gnode = scene.Node(self.getName(c)+&quot;_inst&quot;, children=[geomnode,])</span>
            <span class="n">n</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">getName</span><span class="p">(</span><span class="n">c</span><span class="p">),</span>
                <span class="n">children</span><span class="o">=</span><span class="p">[</span>
                    <span class="n">geomnode</span><span class="p">,</span>
                <span class="p">],</span>
                <span class="n">transforms</span><span class="o">=</span><span class="p">[</span><span class="n">tr</span><span class="p">,</span> <span class="n">rz</span><span class="p">,</span> <span class="n">ry</span><span class="p">,</span> <span class="n">rx</span><span class="p">,</span> <span class="n">s</span><span class="p">],</span>
            <span class="p">)</span>  <span class="c1"># scene.MatrixTransform(matrix)[scene.MatrixTransform(numpy.array(matrix).reshape(16,))]</span>
            <span class="c1">#            n = scene.Node(self.getName(c), children=[geomnode,],</span>
            <span class="c1">#                           transforms=[scene.MatrixTransform(numpy.array(matrix).reshape(16,))]) #scene.MatrixTransform(matrix)[scene.MatrixTransform(numpy.array(matrix).reshape(16,))]</span>
            <span class="n">g</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

        <span class="n">node</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span>
            <span class="n">pname</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="n">g</span>
        <span class="p">)</span>  <span class="c1"># ,transforms=[scene.RotateTransform(0,1,0,90.0)])</span>
        <span class="k">if</span> <span class="s2">&quot;parent_node&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;parent_node&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">children</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
            <span class="n">node</span> <span class="o">=</span> <span class="n">kw</span><span class="p">[</span><span class="s2">&quot;parent_node&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">collada_xml</span><span class="o">.</span><span class="n">scenes</span><span class="p">):</span>
            <span class="n">myscene</span> <span class="o">=</span> <span class="n">scene</span><span class="o">.</span><span class="n">Scene</span><span class="p">(</span><span class="s2">&quot;myscene&quot;</span><span class="p">,</span> <span class="p">[</span><span class="n">node</span><span class="p">])</span>
            <span class="n">collada_xml</span><span class="o">.</span><span class="n">scenes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">myscene</span><span class="p">)</span>
            <span class="n">collada_xml</span><span class="o">.</span><span class="n">scene</span> <span class="o">=</span> <span class="n">myscene</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="s2">&quot;parent_node&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
                <span class="n">collada_xml</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">node</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">instance_node</span><span class="p">:</span>
            <span class="n">collada_xml</span><span class="o">.</span><span class="n">node</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">master_node</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">collada_xml</span></div>

<div class="viewcode-block" id="Helper.writeMeshToFile"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.writeMeshToFile">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">writeMeshToFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">verts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">faces</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vnorms</span><span class="o">=</span><span class="p">[],</span> <span class="n">fnorms</span><span class="o">=</span><span class="p">[]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write the given mesh data (vertices, faces, normal, face normal) in the DejaVu format.</span>
<span class="sd">        Create two files : filename.indpolvert and filename.indpolface</span>

<span class="sd">        @type  filename: string</span>
<span class="sd">        @param filename: the destinaon filename.</span>
<span class="sd">        @type  verts: list</span>
<span class="sd">        @param verts: the liste of vertices</span>
<span class="sd">        @type  faces: list</span>
<span class="sd">        @param faces: the liste of faces</span>
<span class="sd">        @type  vnorms: list</span>
<span class="sd">        @param vnorms: the liste of vertices normal</span>
<span class="sd">        @type  fnorms: list</span>
<span class="sd">        @param fnorms: the liste of faces normal</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.indpolvert&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="p">[</span>
            <span class="p">(</span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%f</span><span class="s2"> </span><span class="si">%f</span><span class="s2"> </span><span class="si">%f</span><span class="s2"> </span><span class="si">%f</span><span class="s2"> </span><span class="si">%f</span><span class="s2"> </span><span class="si">%f</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="nb">tuple</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">n</span><span class="p">))))</span>
            <span class="k">for</span> <span class="n">v</span><span class="p">,</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">verts</span><span class="p">,</span> <span class="n">vnorms</span><span class="p">)</span>
        <span class="p">]</span>

        <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">file</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.indpolface&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">v</span><span class="p">,</span> <span class="n">face</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">fnorms</span><span class="p">,</span> <span class="n">faces</span><span class="p">):</span>
            <span class="p">[</span><span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">ind</span><span class="p">)</span> <span class="k">for</span> <span class="n">ind</span> <span class="ow">in</span> <span class="n">face</span><span class="p">]</span>
            <span class="c1"># map( lambda ind, f=file: f.write(&quot;%d &quot;%ind ), face )</span>
            <span class="n">file</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%f</span><span class="s2"> </span><span class="si">%f</span><span class="s2"> </span><span class="si">%f</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">v</span><span class="p">))</span>
        <span class="n">file</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

<div class="viewcode-block" id="Helper.readMeshFromFile"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.readMeshFromFile">[docs]</a>    <span class="k">def</span> <span class="nf">readMeshFromFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Given the DejaVu filename return the mesh data (vertices, faces, normal).</span>

<span class="sd">        Parse two files : filename.indpolvert and filename.indpolface</span>

<span class="sd">        @type  filename: string</span>
<span class="sd">        @param filename: the destinaon filename.</span>

<span class="sd">        @rtype  :list</span>
<span class="sd">        @return : the liste of vertices,faces and normals</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.indpolvert&quot;</span><span class="p">)</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">]</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">verts</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">0</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>
        <span class="n">norms</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">3</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">]),</span> <span class="nb">float</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">5</span><span class="p">]))</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">data</span><span class="p">]</span>

        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.indpolface&quot;</span><span class="p">)</span>
        <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="n">data</span> <span class="o">=</span> <span class="p">[</span><span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">]</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">faces</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">fnorms</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">data</span><span class="p">:</span>
            <span class="n">faces</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">line</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">])))</span>
            <span class="n">fnorms</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">float</span><span class="p">,</span> <span class="n">line</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:])))</span>
        <span class="k">return</span> <span class="n">verts</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="n">norms</span></div>

<div class="viewcode-block" id="Helper.writeToFile"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.writeToFile">[docs]</a>    <span class="k">def</span> <span class="nf">writeToFile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">polygon</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Write the given polygon mesh data (vertices, faces, normal, face normal) in the DejaVu format.</span>

<span class="sd">        Create two files : filename.indpolvert and filename.indpolface.</span>

<span class="sd">        See writeMeshToFile</span>

<span class="sd">        @type  polygon: hostObj/hostMesh/String</span>
<span class="sd">        @param polygon: the polygon to export in DejaVu format</span>
<span class="sd">        @type  filename: string</span>
<span class="sd">        @param filename: the destinaon filename.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># get shild ?</span>
        <span class="n">faces</span><span class="p">,</span> <span class="n">vertices</span><span class="p">,</span> <span class="n">vnormals</span><span class="p">,</span> <span class="n">fnormals</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">DecomposeMesh</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">getMesh</span><span class="p">(</span><span class="n">polygon</span><span class="p">),</span>
            <span class="n">edit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">copy</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">tri</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">transform</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">fn</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">writeMeshToFile</span><span class="p">(</span>
            <span class="n">filename</span><span class="p">,</span> <span class="n">verts</span><span class="o">=</span><span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span><span class="o">=</span><span class="n">faces</span><span class="p">,</span> <span class="n">vnorms</span><span class="o">=</span><span class="n">vnormals</span><span class="p">,</span> <span class="n">fnorms</span><span class="o">=</span><span class="n">fnormals</span>
        <span class="p">)</span></div>

<div class="viewcode-block" id="Helper.saveDejaVuMesh"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.saveDejaVuMesh">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">saveDejaVuMesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">verts</span><span class="o">=</span><span class="p">[],</span> <span class="n">faces</span><span class="o">=</span><span class="p">[]):</span>
        <span class="n">numpy</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span>
            <span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.indpolvert&quot;</span><span class="p">,</span> <span class="n">verts</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot; &quot;</span>
        <span class="p">)</span>  <span class="c1"># numpy.hstack([self.vertices, self.vnormals])</span>
        <span class="n">numpy</span><span class="o">.</span><span class="n">savetxt</span><span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="s2">&quot;.indpolface&quot;</span><span class="p">,</span> <span class="n">faces</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s2">&quot; &quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.saveObjMesh"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.saveObjMesh">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">saveObjMesh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filepath</span><span class="p">,</span> <span class="n">vertices</span><span class="o">=</span><span class="p">[],</span> <span class="n">faces</span><span class="o">=</span><span class="p">[],</span> <span class="n">vnorms</span><span class="o">=</span><span class="p">[]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;save OBJ &quot;</span> <span class="o">+</span> <span class="n">filepath</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filepath</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;OBJ File: </span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vertices</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;v </span><span class="si">%.4f</span><span class="s2"> </span><span class="si">%.4f</span><span class="s2"> </span><span class="si">%.4f</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">faces</span><span class="p">:</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;f &quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
                    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
                <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span></div>

<div class="viewcode-block" id="Helper.writeDX"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.writeDX">[docs]</a>    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">writeDX</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">gridvalue</span><span class="p">,</span> <span class="n">gridcenter</span><span class="p">,</span> <span class="n">gridstep</span><span class="p">,</span> <span class="n">grisize</span><span class="p">,</span> <span class="n">commens</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">):</span>
        <span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nz</span> <span class="o">=</span> <span class="n">grisize</span>
        <span class="n">ox</span><span class="p">,</span> <span class="n">oy</span><span class="p">,</span> <span class="n">oz</span> <span class="o">=</span> <span class="n">gridcenter</span>
        <span class="n">sx</span><span class="p">,</span> <span class="n">sy</span><span class="p">,</span> <span class="n">sz</span> <span class="o">=</span> <span class="n">gridstep</span>
        <span class="n">N</span> <span class="o">=</span> <span class="n">nx</span> <span class="o">*</span> <span class="n">ny</span> <span class="o">*</span> <span class="n">nz</span>
        <span class="n">aStr</span> <span class="o">=</span> <span class="s2">&quot;#Data frm upy</span><span class="se">\n</span><span class="s2">&quot;</span>
        <span class="n">aStr</span> <span class="o">+=</span> <span class="s2">&quot;#</span><span class="si">%s</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">commens</span>
        <span class="n">aStr</span> <span class="o">+=</span> <span class="s2">&quot;object 1 class gridpositions counts </span><span class="si">%i</span><span class="s2"> </span><span class="si">%i</span><span class="s2"> </span><span class="si">%i</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nz</span><span class="p">)</span>
        <span class="n">aStr</span> <span class="o">+=</span> <span class="s2">&quot;origin </span><span class="si">%f</span><span class="s2"> </span><span class="si">%f</span><span class="s2"> </span><span class="si">%f</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ox</span><span class="p">,</span> <span class="n">oy</span><span class="p">,</span> <span class="n">oz</span><span class="p">)</span>
        <span class="n">aStr</span> <span class="o">+=</span> <span class="s2">&quot;delta </span><span class="si">%f</span><span class="s2"> 0.000000e+00 0.000000e+00</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">sx</span>
        <span class="n">aStr</span> <span class="o">+=</span> <span class="s2">&quot;delta 0.000000e+00 </span><span class="si">%f</span><span class="s2"> 0.000000e+00</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">sy</span>
        <span class="n">aStr</span> <span class="o">+=</span> <span class="s2">&quot;delta 0.000000e+00 0.000000e+00 </span><span class="si">%f</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">sz</span>
        <span class="n">aStr</span> <span class="o">+=</span> <span class="s2">&quot;object 2 class gridconnections counts </span><span class="si">%i</span><span class="s2"> </span><span class="si">%i</span><span class="s2"> </span><span class="si">%i</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">nx</span><span class="p">,</span> <span class="n">ny</span><span class="p">,</span> <span class="n">nz</span><span class="p">)</span>
        <span class="n">aStr</span> <span class="o">+=</span> <span class="s2">&quot;object 3 class array type double rank 0 items </span><span class="si">%i</span><span class="s2"> data follows</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">N</span>
        <span class="c1"># u(*,*,*)</span>
        <span class="c1"># The data values, ordered with the z-index increasing most quickly, followed by the y-index, and then the x-index.</span>
        <span class="n">counterLine</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">v</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nx</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">ny</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">z</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">nz</span><span class="p">):</span>
                    <span class="n">v</span> <span class="o">+=</span> <span class="s2">&quot;</span><span class="si">%f</span><span class="s2"> &quot;</span> <span class="o">%</span> <span class="n">gridvalue</span><span class="p">[</span><span class="n">counter</span><span class="p">]</span>
                    <span class="n">counter</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="n">counterLine</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">if</span> <span class="n">counterLine</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                        <span class="n">aStr</span> <span class="o">+=</span> <span class="n">v</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span>
                        <span class="n">counterLine</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">aStr</span><span class="p">)</span>
        <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span></div>

    <span class="c1"># ==============================================================================</span>
    <span class="c1"># raycasting RAPID? python ?</span>
    <span class="c1"># ==============================================================================</span>
<div class="viewcode-block" id="Helper.raycast"><a class="viewcode-back" href="../../../../cellpack.autopack.upy.html#cellpack.autopack.upy.hostHelper.Helper.raycast">[docs]</a>    <span class="k">def</span> <span class="nf">raycast</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">point</span><span class="p">,</span> <span class="n">direction</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="n">intersect</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="k">if</span> <span class="s2">&quot;count&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">intersect</span><span class="p">,</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="s2">&quot;fnormal&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">intersect</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;hitpos&quot;</span> <span class="ow">in</span> <span class="n">kw</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">intersect</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">intersect</span></div></div>
</pre></div>

            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">cellPack 1.0.3 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../../cellpack.html" >cellpack</a> &#187;</li>
          <li class="nav-item nav-item-3"><a href="../../autopack.html" >cellpack.autopack</a> &#187;</li>
          <li class="nav-item nav-item-4"><a href="../upy.html" >cellpack.autopack.upy</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">cellpack.autopack.upy.hostHelper</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2021, Megan Riel-Mehan.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.0.
    </div>
  </body>
</html>